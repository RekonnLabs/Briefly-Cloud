9dea988d948c6ce0f852e233d8d37575
"use strict";

/* istanbul ignore next */
function cov_q57dc2sqn() {
  var path = "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\user\\profile\\route.ts";
  var hash = "68c519eeb433da64a984e081d5890c46645a469e";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\user\\profile\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 21,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 22
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 19
        }
      },
      "6": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 19
        }
      },
      "7": {
        start: {
          line: 22,
          column: 23
        },
        end: {
          line: 22,
          column: 61
        }
      },
      "8": {
        start: {
          line: 23,
          column: 18
        },
        end: {
          line: 23,
          column: 51
        }
      },
      "9": {
        start: {
          line: 24,
          column: 19
        },
        end: {
          line: 24,
          column: 53
        }
      },
      "10": {
        start: {
          line: 25,
          column: 21
        },
        end: {
          line: 25,
          column: 56
        }
      },
      "11": {
        start: {
          line: 26,
          column: 18
        },
        end: {
          line: 26,
          column: 50
        }
      },
      "12": {
        start: {
          line: 27,
          column: 16
        },
        end: {
          line: 27,
          column: 46
        }
      },
      "13": {
        start: {
          line: 30,
          column: 21
        },
        end: {
          line: 30,
          column: 28
        }
      },
      "14": {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 33,
          column: 5
        }
      },
      "15": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 32,
          column: 76
        }
      },
      "16": {
        start: {
          line: 34,
          column: 4
        },
        end: {
          line: 95,
          column: 5
        }
      },
      "17": {
        start: {
          line: 35,
          column: 25
        },
        end: {
          line: 35,
          column: 48
        }
      },
      "18": {
        start: {
          line: 37,
          column: 45
        },
        end: {
          line: 58,
          column: 35
        }
      },
      "19": {
        start: {
          line: 59,
          column: 8
        },
        end: {
          line: 62,
          column: 9
        }
      },
      "20": {
        start: {
          line: 60,
          column: 12
        },
        end: {
          line: 60,
          column: 57
        }
      },
      "21": {
        start: {
          line: 61,
          column: 12
        },
        end: {
          line: 61,
          column: 87
        }
      },
      "22": {
        start: {
          line: 64,
          column: 27
        },
        end: {
          line: 85,
          column: 9
        }
      },
      "23": {
        start: {
          line: 87,
          column: 8
        },
        end: {
          line: 87,
          column: 79
        }
      },
      "24": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 91,
          column: 11
        }
      },
      "25": {
        start: {
          line: 93,
          column: 8
        },
        end: {
          line: 93,
          column: 55
        }
      },
      "26": {
        start: {
          line: 94,
          column: 8
        },
        end: {
          line: 94,
          column: 88
        }
      },
      "27": {
        start: {
          line: 99,
          column: 36
        },
        end: {
          line: 99,
          column: 43
        }
      },
      "28": {
        start: {
          line: 100,
          column: 4
        },
        end: {
          line: 102,
          column: 5
        }
      },
      "29": {
        start: {
          line: 101,
          column: 8
        },
        end: {
          line: 101,
          column: 76
        }
      },
      "30": {
        start: {
          line: 103,
          column: 4
        },
        end: {
          line: 105,
          column: 5
        }
      },
      "31": {
        start: {
          line: 104,
          column: 8
        },
        end: {
          line: 104,
          column: 72
        }
      },
      "32": {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 129,
          column: 5
        }
      },
      "33": {
        start: {
          line: 107,
          column: 25
        },
        end: {
          line: 107,
          column: 48
        }
      },
      "34": {
        start: {
          line: 108,
          column: 27
        },
        end: {
          line: 108,
          column: 45
        }
      },
      "35": {
        start: {
          line: 110,
          column: 48
        },
        end: {
          line: 114,
          column: 46
        }
      },
      "36": {
        start: {
          line: 115,
          column: 8
        },
        end: {
          line: 118,
          column: 9
        }
      },
      "37": {
        start: {
          line: 116,
          column: 12
        },
        end: {
          line: 116,
          column: 58
        }
      },
      "38": {
        start: {
          line: 117,
          column: 12
        },
        end: {
          line: 117,
          column: 83
        }
      },
      "39": {
        start: {
          line: 120,
          column: 8
        },
        end: {
          line: 122,
          column: 11
        }
      },
      "40": {
        start: {
          line: 123,
          column: 8
        },
        end: {
          line: 125,
          column: 43
        }
      },
      "41": {
        start: {
          line: 127,
          column: 8
        },
        end: {
          line: 127,
          column: 62
        }
      },
      "42": {
        start: {
          line: 128,
          column: 8
        },
        end: {
          line: 128,
          column: 87
        }
      },
      "43": {
        start: {
          line: 133,
          column: 21
        },
        end: {
          line: 133,
          column: 28
        }
      },
      "44": {
        start: {
          line: 134,
          column: 4
        },
        end: {
          line: 136,
          column: 5
        }
      },
      "45": {
        start: {
          line: 135,
          column: 8
        },
        end: {
          line: 135,
          column: 76
        }
      },
      "46": {
        start: {
          line: 137,
          column: 4
        },
        end: {
          line: 167,
          column: 5
        }
      },
      "47": {
        start: {
          line: 138,
          column: 25
        },
        end: {
          line: 138,
          column: 48
        }
      },
      "48": {
        start: {
          line: 141,
          column: 8
        },
        end: {
          line: 148,
          column: 11
        }
      },
      "49": {
        start: {
          line: 150,
          column: 39
        },
        end: {
          line: 150,
          column: 94
        }
      },
      "50": {
        start: {
          line: 151,
          column: 8
        },
        end: {
          line: 154,
          column: 9
        }
      },
      "51": {
        start: {
          line: 152,
          column: 12
        },
        end: {
          line: 152,
          column: 66
        }
      },
      "52": {
        start: {
          line: 153,
          column: 12
        },
        end: {
          line: 153,
          column: 83
        }
      },
      "53": {
        start: {
          line: 156,
          column: 43
        },
        end: {
          line: 156,
          column: 88
        }
      },
      "54": {
        start: {
          line: 157,
          column: 8
        },
        end: {
          line: 160,
          column: 9
        }
      },
      "55": {
        start: {
          line: 158,
          column: 12
        },
        end: {
          line: 158,
          column: 67
        }
      },
      "56": {
        start: {
          line: 162,
          column: 8
        },
        end: {
          line: 162,
          column: 83
        }
      },
      "57": {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 163,
          column: 83
        }
      },
      "58": {
        start: {
          line: 165,
          column: 8
        },
        end: {
          line: 165,
          column: 64
        }
      },
      "59": {
        start: {
          line: 166,
          column: 8
        },
        end: {
          line: 166,
          column: 89
        }
      },
      "60": {
        start: {
          line: 169,
          column: 12
        },
        end: {
          line: 175,
          column: 2
        }
      },
      "61": {
        start: {
          line: 176,
          column: 12
        },
        end: {
          line: 188,
          column: 2
        }
      },
      "62": {
        start: {
          line: 189,
          column: 15
        },
        end: {
          line: 198,
          column: 2
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 18
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 15
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 15
          },
          end: {
            line: 20,
            column: 5
          }
        },
        line: 18
      },
      "4": {
        name: "getProfileHandler",
        decl: {
          start: {
            line: 29,
            column: 15
          },
          end: {
            line: 29,
            column: 32
          }
        },
        loc: {
          start: {
            line: 29,
            column: 51
          },
          end: {
            line: 96,
            column: 1
          }
        },
        line: 29
      },
      "5": {
        name: "updateProfileHandler",
        decl: {
          start: {
            line: 98,
            column: 15
          },
          end: {
            line: 98,
            column: 35
          }
        },
        loc: {
          start: {
            line: 98,
            column: 54
          },
          end: {
            line: 130,
            column: 1
          }
        },
        line: 98
      },
      "6": {
        name: "deleteProfileHandler",
        decl: {
          start: {
            line: 132,
            column: 15
          },
          end: {
            line: 132,
            column: 35
          }
        },
        loc: {
          start: {
            line: 132,
            column: 54
          },
          end: {
            line: 168,
            column: 1
          }
        },
        line: 132
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 31
      },
      "1": {
        loc: {
          start: {
            line: 59,
            column: 8
          },
          end: {
            line: 62,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 59,
            column: 8
          },
          end: {
            line: 62,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 59
      },
      "2": {
        loc: {
          start: {
            line: 66,
            column: 22
          },
          end: {
            line: 66,
            column: 58
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 66,
            column: 22
          },
          end: {
            line: 66,
            column: 53
          }
        }, {
          start: {
            line: 66,
            column: 57
          },
          end: {
            line: 66,
            column: 58
          }
        }],
        line: 66
      },
      "3": {
        loc: {
          start: {
            line: 67,
            column: 23
          },
          end: {
            line: 67,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 67,
            column: 23
          },
          end: {
            line: 67,
            column: 54
          }
        }, {
          start: {
            line: 67,
            column: 58
          },
          end: {
            line: 67,
            column: 59
          }
        }],
        line: 67
      },
      "4": {
        loc: {
          start: {
            line: 68,
            column: 40
          },
          end: {
            line: 68,
            column: 76
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 68,
            column: 40
          },
          end: {
            line: 68,
            column: 71
          }
        }, {
          start: {
            line: 68,
            column: 75
          },
          end: {
            line: 68,
            column: 76
          }
        }],
        line: 68
      },
      "5": {
        loc: {
          start: {
            line: 68,
            column: 81
          },
          end: {
            line: 68,
            column: 117
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 68,
            column: 81
          },
          end: {
            line: 68,
            column: 112
          }
        }, {
          start: {
            line: 68,
            column: 116
          },
          end: {
            line: 68,
            column: 117
          }
        }],
        line: 68
      },
      "6": {
        loc: {
          start: {
            line: 71,
            column: 22
          },
          end: {
            line: 71,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 71,
            column: 22
          },
          end: {
            line: 71,
            column: 52
          }
        }, {
          start: {
            line: 71,
            column: 56
          },
          end: {
            line: 71,
            column: 57
          }
        }],
        line: 71
      },
      "7": {
        loc: {
          start: {
            line: 72,
            column: 23
          },
          end: {
            line: 72,
            column: 55
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 72,
            column: 23
          },
          end: {
            line: 72,
            column: 50
          }
        }, {
          start: {
            line: 72,
            column: 54
          },
          end: {
            line: 72,
            column: 55
          }
        }],
        line: 72
      },
      "8": {
        loc: {
          start: {
            line: 73,
            column: 40
          },
          end: {
            line: 73,
            column: 75
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 73,
            column: 40
          },
          end: {
            line: 73,
            column: 70
          }
        }, {
          start: {
            line: 73,
            column: 74
          },
          end: {
            line: 73,
            column: 75
          }
        }],
        line: 73
      },
      "9": {
        loc: {
          start: {
            line: 73,
            column: 80
          },
          end: {
            line: 73,
            column: 112
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 73,
            column: 80
          },
          end: {
            line: 73,
            column: 107
          }
        }, {
          start: {
            line: 73,
            column: 111
          },
          end: {
            line: 73,
            column: 112
          }
        }],
        line: 73
      },
      "10": {
        loc: {
          start: {
            line: 76,
            column: 22
          },
          end: {
            line: 76,
            column: 54
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 76,
            column: 22
          },
          end: {
            line: 76,
            column: 49
          }
        }, {
          start: {
            line: 76,
            column: 53
          },
          end: {
            line: 76,
            column: 54
          }
        }],
        line: 76
      },
      "11": {
        loc: {
          start: {
            line: 77,
            column: 23
          },
          end: {
            line: 77,
            column: 55
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 77,
            column: 23
          },
          end: {
            line: 77,
            column: 50
          }
        }, {
          start: {
            line: 77,
            column: 54
          },
          end: {
            line: 77,
            column: 55
          }
        }],
        line: 77
      },
      "12": {
        loc: {
          start: {
            line: 78,
            column: 40
          },
          end: {
            line: 78,
            column: 72
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 78,
            column: 40
          },
          end: {
            line: 78,
            column: 67
          }
        }, {
          start: {
            line: 78,
            column: 71
          },
          end: {
            line: 78,
            column: 72
          }
        }],
        line: 78
      },
      "13": {
        loc: {
          start: {
            line: 78,
            column: 77
          },
          end: {
            line: 78,
            column: 109
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 78,
            column: 77
          },
          end: {
            line: 78,
            column: 104
          }
        }, {
          start: {
            line: 78,
            column: 108
          },
          end: {
            line: 78,
            column: 109
          }
        }],
        line: 78
      },
      "14": {
        loc: {
          start: {
            line: 81,
            column: 22
          },
          end: {
            line: 81,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 81,
            column: 22
          },
          end: {
            line: 81,
            column: 52
          }
        }, {
          start: {
            line: 81,
            column: 56
          },
          end: {
            line: 81,
            column: 57
          }
        }],
        line: 81
      },
      "15": {
        loc: {
          start: {
            line: 82,
            column: 23
          },
          end: {
            line: 82,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 82,
            column: 23
          },
          end: {
            line: 82,
            column: 54
          }
        }, {
          start: {
            line: 82,
            column: 58
          },
          end: {
            line: 82,
            column: 59
          }
        }],
        line: 82
      },
      "16": {
        loc: {
          start: {
            line: 83,
            column: 40
          },
          end: {
            line: 83,
            column: 75
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 83,
            column: 40
          },
          end: {
            line: 83,
            column: 70
          }
        }, {
          start: {
            line: 83,
            column: 74
          },
          end: {
            line: 83,
            column: 75
          }
        }],
        line: 83
      },
      "17": {
        loc: {
          start: {
            line: 83,
            column: 80
          },
          end: {
            line: 83,
            column: 116
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 83,
            column: 80
          },
          end: {
            line: 83,
            column: 111
          }
        }, {
          start: {
            line: 83,
            column: 115
          },
          end: {
            line: 83,
            column: 116
          }
        }],
        line: 83
      },
      "18": {
        loc: {
          start: {
            line: 100,
            column: 4
          },
          end: {
            line: 102,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 100,
            column: 4
          },
          end: {
            line: 102,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 100
      },
      "19": {
        loc: {
          start: {
            line: 103,
            column: 4
          },
          end: {
            line: 105,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 103,
            column: 4
          },
          end: {
            line: 105,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 103
      },
      "20": {
        loc: {
          start: {
            line: 115,
            column: 8
          },
          end: {
            line: 118,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 115,
            column: 8
          },
          end: {
            line: 118,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 115
      },
      "21": {
        loc: {
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 136,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 136,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 134
      },
      "22": {
        loc: {
          start: {
            line: 151,
            column: 8
          },
          end: {
            line: 154,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 151,
            column: 8
          },
          end: {
            line: 154,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 151
      },
      "23": {
        loc: {
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 160,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 160,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 157
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\user\\profile\\route.ts"],
      sourcesContent: ["import { NextResponse } from 'next/server'\r\nimport { createProtectedApiHandler, ApiContext } from '@/app/lib/api-middleware'\r\nimport { ApiResponse } from '@/app/lib/api-utils'\r\nimport { rateLimitConfigs } from '@/app/lib/rate-limit'\r\nimport { userProfileSchema } from '@/app/lib/validations'\r\nimport { supabaseAdmin } from '@/app/lib/supabase'\r\nimport { logApiUsage } from '@/app/lib/logger'\r\n\r\n// GET /api/user/profile - Get user profile\r\nasync function getProfileHandler(request: Request, context: ApiContext): Promise<NextResponse> {\r\n  const { user } = context\r\n  \r\n  if (!user) {\r\n    return ApiResponse.unauthorized('User not authenticated')\r\n  }\r\n  \r\n  try {\r\n    const supabase = supabaseAdmin\r\n    \r\n    // Get full user profile with usage statistics\r\n    const { data: userProfile, error } = await supabase\r\n      .from('users')\r\n      .select(`\r\n        id,\r\n        email,\r\n        full_name,\r\n        subscription_tier,\r\n        subscription_status,\r\n        chat_messages_count,\r\n        chat_messages_limit,\r\n        documents_uploaded,\r\n        documents_limit,\r\n        api_calls_count,\r\n        api_calls_limit,\r\n        storage_used_bytes,\r\n        storage_limit_bytes,\r\n        preferences,\r\n        features_enabled,\r\n        permissions,\r\n        created_at,\r\n        updated_at,\r\n        usage_reset_date,\r\n        trial_end_date\r\n      `)\r\n      .eq('id', user.id)\r\n      .single()\r\n    \r\n    if (error) {\r\n      console.error('Profile fetch error:', error)\r\n      return ApiResponse.internalError('Failed to fetch user profile')\r\n    }\r\n    \r\n    // Calculate usage percentages\r\n    const usageStats = {\r\n      chat_messages: {\r\n        used: userProfile.chat_messages_count || 0,\r\n        limit: userProfile.chat_messages_limit || 0,\r\n        percentage: Math.round(((userProfile.chat_messages_count || 0) / (userProfile.chat_messages_limit || 1)) * 100)\r\n      },\r\n      documents: {\r\n        used: userProfile.documents_uploaded || 0,\r\n        limit: userProfile.documents_limit || 0,\r\n        percentage: Math.round(((userProfile.documents_uploaded || 0) / (userProfile.documents_limit || 1)) * 100)\r\n      },\r\n      api_calls: {\r\n        used: userProfile.api_calls_count || 0,\r\n        limit: userProfile.api_calls_limit || 0,\r\n        percentage: Math.round(((userProfile.api_calls_count || 0) / (userProfile.api_calls_limit || 1)) * 100)\r\n      },\r\n      storage: {\r\n        used: userProfile.storage_used_bytes || 0,\r\n        limit: userProfile.storage_limit_bytes || 0,\r\n        percentage: Math.round(((userProfile.storage_used_bytes || 0) / (userProfile.storage_limit_bytes || 1)) * 100)\r\n      }\r\n    }\r\n    \r\n    // Log usage\r\n    logApiUsage(user.id, '/api/user/profile', 'profile_view')\r\n    \r\n    return ApiResponse.success({\r\n      profile: userProfile,\r\n      usage_stats: usageStats,\r\n    })\r\n    \r\n  } catch (error) {\r\n    console.error('Profile handler error:', error)\r\n    return ApiResponse.internalError('Failed to process profile request')\r\n  }\r\n}\r\n\r\n// PUT /api/user/profile - Update user profile\r\nasync function updateProfileHandler(request: Request, context: ApiContext): Promise<NextResponse> {\r\n  const { user, validatedData } = context\r\n  \r\n  if (!user) {\r\n    return ApiResponse.unauthorized('User not authenticated')\r\n  }\r\n  \r\n  if (!validatedData?.body) {\r\n    return ApiResponse.badRequest('Invalid request body')\r\n  }\r\n  \r\n  try {\r\n    const supabase = supabaseAdmin\r\n    \r\n    const updateData = validatedData.body\r\n    \r\n    // Update user profile\r\n    const { data: updatedProfile, error } = await supabase\r\n      .from('users')\r\n      .update({\r\n        full_name: updateData.full_name,\r\n        preferences: updateData.preferences,\r\n        updated_at: new Date().toISOString(),\r\n      })\r\n      .eq('id', user.id)\r\n      .select()\r\n      .single()\r\n    \r\n    if (error) {\r\n      console.error('Profile update error:', error)\r\n      return ApiResponse.internalError('Failed to update profile')\r\n    }\r\n    \r\n    // Log usage\r\n    logApiUsage(user.id, '/api/user/profile', 'profile_update', {\r\n      fields_updated: Object.keys(updateData)\r\n    })\r\n    \r\n    return ApiResponse.success(\r\n      { profile: updatedProfile },\r\n      'Profile updated successfully'\r\n    )\r\n    \r\n  } catch (error) {\r\n    console.error('Profile update handler error:', error)\r\n    return ApiResponse.internalError('Failed to process profile update')\r\n  }\r\n}\r\n\r\n// DELETE /api/user/profile - Delete user account\r\nasync function deleteProfileHandler(request: Request, context: ApiContext): Promise<NextResponse> {\r\n  const { user } = context\r\n  \r\n  if (!user) {\r\n    return ApiResponse.unauthorized('User not authenticated')\r\n  }\r\n  \r\n  try {\r\n    const supabase = supabaseAdmin\r\n    \r\n    // Start transaction-like operations\r\n    // 1. Delete user data from related tables\r\n    await Promise.all([\r\n      supabase.from('conversations').delete().eq('user_id', user.id),\r\n      supabase.from('file_metadata').delete().eq('user_id', user.id),\r\n      supabase.from('document_chunks').delete().eq('user_id', user.id),\r\n      supabase.from('usage_logs').delete().eq('user_id', user.id),\r\n      supabase.from('oauth_tokens').delete().eq('user_id', user.id),\r\n      supabase.from('user_settings').delete().eq('user_id', user.id),\r\n    ])\r\n    \r\n    // 2. Delete user profile\r\n    const { error: deleteError } = await supabase\r\n      .from('users')\r\n      .delete()\r\n      .eq('id', user.id)\r\n    \r\n    if (deleteError) {\r\n      console.error('Profile deletion error:', deleteError)\r\n      return ApiResponse.internalError('Failed to delete profile')\r\n    }\r\n    \r\n    // 3. Delete from Supabase Auth\r\n    const { error: authDeleteError } = await supabase.auth.admin.deleteUser(user.id)\r\n    \r\n    if (authDeleteError) {\r\n      console.error('Auth deletion error:', authDeleteError)\r\n      // Continue anyway as the profile data is already deleted\r\n    }\r\n    \r\n    // Log usage\r\n    logApiUsage(user.id, '/api/user/profile', 'account_deletion')\r\n    \r\n    return ApiResponse.success(\r\n      null,\r\n      'Account deleted successfully'\r\n    )\r\n    \r\n  } catch (error) {\r\n    console.error('Profile deletion handler error:', error)\r\n    return ApiResponse.internalError('Failed to process account deletion')\r\n  }\r\n}\r\n\r\n// Export handlers with middleware\r\nexport const GET = createProtectedApiHandler(getProfileHandler, {\r\n  rateLimit: rateLimitConfigs.general,\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: false,\r\n  },\r\n})\r\n\r\nexport const PUT = createProtectedApiHandler(updateProfileHandler, {\r\n  rateLimit: {\r\n    ...rateLimitConfigs.general,\r\n    maxRequests: 20, // More restrictive for updates\r\n  },\r\n  validation: {\r\n    body: userProfileSchema,\r\n  },\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: true,\r\n  },\r\n})\r\n\r\nexport const DELETE = createProtectedApiHandler(deleteProfileHandler, {\r\n  rateLimit: {\r\n    ...rateLimitConfigs.strict,\r\n    maxRequests: 2, // Very restrictive for account deletion\r\n  },\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: false,\r\n  },\r\n})"],
      names: ["DELETE", "GET", "PUT", "getProfileHandler", "request", "context", "user", "ApiResponse", "unauthorized", "supabase", "supabaseAdmin", "data", "userProfile", "error", "from", "select", "eq", "id", "single", "console", "internalError", "usageStats", "chat_messages", "used", "chat_messages_count", "limit", "chat_messages_limit", "percentage", "Math", "round", "documents", "documents_uploaded", "documents_limit", "api_calls", "api_calls_count", "api_calls_limit", "storage", "storage_used_bytes", "storage_limit_bytes", "logApiUsage", "success", "profile", "usage_stats", "updateProfileHandler", "validatedData", "body", "badRequest", "updateData", "updatedProfile", "update", "full_name", "preferences", "updated_at", "Date", "toISOString", "fields_updated", "Object", "keys", "deleteProfileHandler", "Promise", "all", "delete", "deleteError", "authDeleteError", "auth", "admin", "deleteUser", "createProtectedApiHandler", "rateLimit", "rateLimitConfigs", "general", "logging", "enabled", "includeBody", "maxRequests", "validation", "userProfileSchema", "strict"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "68c519eeb433da64a984e081d5890c46645a469e"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_q57dc2sqn = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_q57dc2sqn();
cov_q57dc2sqn().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_q57dc2sqn().f[0]++;
  cov_q57dc2sqn().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_q57dc2sqn().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_q57dc2sqn().s[3]++;
_export(exports, {
  get DELETE() {
    /* istanbul ignore next */
    cov_q57dc2sqn().f[1]++;
    cov_q57dc2sqn().s[4]++;
    return DELETE;
  },
  get GET() {
    /* istanbul ignore next */
    cov_q57dc2sqn().f[2]++;
    cov_q57dc2sqn().s[5]++;
    return GET;
  },
  get PUT() {
    /* istanbul ignore next */
    cov_q57dc2sqn().f[3]++;
    cov_q57dc2sqn().s[6]++;
    return PUT;
  }
});
const _apimiddleware =
/* istanbul ignore next */
(cov_q57dc2sqn().s[7]++, require("../../../lib/api-middleware"));
const _apiutils =
/* istanbul ignore next */
(cov_q57dc2sqn().s[8]++, require("../../../lib/api-utils"));
const _ratelimit =
/* istanbul ignore next */
(cov_q57dc2sqn().s[9]++, require("../../../lib/rate-limit"));
const _validations =
/* istanbul ignore next */
(cov_q57dc2sqn().s[10]++, require("../../../lib/validations"));
const _supabase =
/* istanbul ignore next */
(cov_q57dc2sqn().s[11]++, require("../../../lib/supabase"));
const _logger =
/* istanbul ignore next */
(cov_q57dc2sqn().s[12]++, require("../../../lib/logger"));
// GET /api/user/profile - Get user profile
async function getProfileHandler(request, context) {
  /* istanbul ignore next */
  cov_q57dc2sqn().f[4]++;
  const {
    user
  } =
  /* istanbul ignore next */
  (cov_q57dc2sqn().s[13]++, context);
  /* istanbul ignore next */
  cov_q57dc2sqn().s[14]++;
  if (!user) {
    /* istanbul ignore next */
    cov_q57dc2sqn().b[0][0]++;
    cov_q57dc2sqn().s[15]++;
    return _apiutils.ApiResponse.unauthorized('User not authenticated');
  } else
  /* istanbul ignore next */
  {
    cov_q57dc2sqn().b[0][1]++;
  }
  cov_q57dc2sqn().s[16]++;
  try {
    const supabase =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[17]++, _supabase.supabaseAdmin);
    // Get full user profile with usage statistics
    const {
      data: userProfile,
      error
    } =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[18]++, await supabase.from('users').select(`
        id,
        email,
        full_name,
        subscription_tier,
        subscription_status,
        chat_messages_count,
        chat_messages_limit,
        documents_uploaded,
        documents_limit,
        api_calls_count,
        api_calls_limit,
        storage_used_bytes,
        storage_limit_bytes,
        preferences,
        features_enabled,
        permissions,
        created_at,
        updated_at,
        usage_reset_date,
        trial_end_date
      `).eq('id', user.id).single());
    /* istanbul ignore next */
    cov_q57dc2sqn().s[19]++;
    if (error) {
      /* istanbul ignore next */
      cov_q57dc2sqn().b[1][0]++;
      cov_q57dc2sqn().s[20]++;
      console.error('Profile fetch error:', error);
      /* istanbul ignore next */
      cov_q57dc2sqn().s[21]++;
      return _apiutils.ApiResponse.internalError('Failed to fetch user profile');
    } else
    /* istanbul ignore next */
    {
      cov_q57dc2sqn().b[1][1]++;
    }
    // Calculate usage percentages
    const usageStats =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[22]++, {
      chat_messages: {
        used:
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[2][0]++, userProfile.chat_messages_count) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[2][1]++, 0),
        limit:
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[3][0]++, userProfile.chat_messages_limit) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[3][1]++, 0),
        percentage: Math.round((
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[4][0]++, userProfile.chat_messages_count) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[4][1]++, 0)) / (
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[5][0]++, userProfile.chat_messages_limit) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[5][1]++, 1)) * 100)
      },
      documents: {
        used:
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[6][0]++, userProfile.documents_uploaded) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[6][1]++, 0),
        limit:
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[7][0]++, userProfile.documents_limit) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[7][1]++, 0),
        percentage: Math.round((
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[8][0]++, userProfile.documents_uploaded) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[8][1]++, 0)) / (
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[9][0]++, userProfile.documents_limit) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[9][1]++, 1)) * 100)
      },
      api_calls: {
        used:
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[10][0]++, userProfile.api_calls_count) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[10][1]++, 0),
        limit:
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[11][0]++, userProfile.api_calls_limit) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[11][1]++, 0),
        percentage: Math.round((
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[12][0]++, userProfile.api_calls_count) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[12][1]++, 0)) / (
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[13][0]++, userProfile.api_calls_limit) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[13][1]++, 1)) * 100)
      },
      storage: {
        used:
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[14][0]++, userProfile.storage_used_bytes) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[14][1]++, 0),
        limit:
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[15][0]++, userProfile.storage_limit_bytes) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[15][1]++, 0),
        percentage: Math.round((
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[16][0]++, userProfile.storage_used_bytes) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[16][1]++, 0)) / (
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[17][0]++, userProfile.storage_limit_bytes) ||
        /* istanbul ignore next */
        (cov_q57dc2sqn().b[17][1]++, 1)) * 100)
      }
    });
    // Log usage
    /* istanbul ignore next */
    cov_q57dc2sqn().s[23]++;
    (0, _logger.logApiUsage)(user.id, '/api/user/profile', 'profile_view');
    /* istanbul ignore next */
    cov_q57dc2sqn().s[24]++;
    return _apiutils.ApiResponse.success({
      profile: userProfile,
      usage_stats: usageStats
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_q57dc2sqn().s[25]++;
    console.error('Profile handler error:', error);
    /* istanbul ignore next */
    cov_q57dc2sqn().s[26]++;
    return _apiutils.ApiResponse.internalError('Failed to process profile request');
  }
}
// PUT /api/user/profile - Update user profile
async function updateProfileHandler(request, context) {
  /* istanbul ignore next */
  cov_q57dc2sqn().f[5]++;
  const {
    user,
    validatedData
  } =
  /* istanbul ignore next */
  (cov_q57dc2sqn().s[27]++, context);
  /* istanbul ignore next */
  cov_q57dc2sqn().s[28]++;
  if (!user) {
    /* istanbul ignore next */
    cov_q57dc2sqn().b[18][0]++;
    cov_q57dc2sqn().s[29]++;
    return _apiutils.ApiResponse.unauthorized('User not authenticated');
  } else
  /* istanbul ignore next */
  {
    cov_q57dc2sqn().b[18][1]++;
  }
  cov_q57dc2sqn().s[30]++;
  if (!validatedData?.body) {
    /* istanbul ignore next */
    cov_q57dc2sqn().b[19][0]++;
    cov_q57dc2sqn().s[31]++;
    return _apiutils.ApiResponse.badRequest('Invalid request body');
  } else
  /* istanbul ignore next */
  {
    cov_q57dc2sqn().b[19][1]++;
  }
  cov_q57dc2sqn().s[32]++;
  try {
    const supabase =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[33]++, _supabase.supabaseAdmin);
    const updateData =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[34]++, validatedData.body);
    // Update user profile
    const {
      data: updatedProfile,
      error
    } =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[35]++, await supabase.from('users').update({
      full_name: updateData.full_name,
      preferences: updateData.preferences,
      updated_at: new Date().toISOString()
    }).eq('id', user.id).select().single());
    /* istanbul ignore next */
    cov_q57dc2sqn().s[36]++;
    if (error) {
      /* istanbul ignore next */
      cov_q57dc2sqn().b[20][0]++;
      cov_q57dc2sqn().s[37]++;
      console.error('Profile update error:', error);
      /* istanbul ignore next */
      cov_q57dc2sqn().s[38]++;
      return _apiutils.ApiResponse.internalError('Failed to update profile');
    } else
    /* istanbul ignore next */
    {
      cov_q57dc2sqn().b[20][1]++;
    }
    // Log usage
    cov_q57dc2sqn().s[39]++;
    (0, _logger.logApiUsage)(user.id, '/api/user/profile', 'profile_update', {
      fields_updated: Object.keys(updateData)
    });
    /* istanbul ignore next */
    cov_q57dc2sqn().s[40]++;
    return _apiutils.ApiResponse.success({
      profile: updatedProfile
    }, 'Profile updated successfully');
  } catch (error) {
    /* istanbul ignore next */
    cov_q57dc2sqn().s[41]++;
    console.error('Profile update handler error:', error);
    /* istanbul ignore next */
    cov_q57dc2sqn().s[42]++;
    return _apiutils.ApiResponse.internalError('Failed to process profile update');
  }
}
// DELETE /api/user/profile - Delete user account
async function deleteProfileHandler(request, context) {
  /* istanbul ignore next */
  cov_q57dc2sqn().f[6]++;
  const {
    user
  } =
  /* istanbul ignore next */
  (cov_q57dc2sqn().s[43]++, context);
  /* istanbul ignore next */
  cov_q57dc2sqn().s[44]++;
  if (!user) {
    /* istanbul ignore next */
    cov_q57dc2sqn().b[21][0]++;
    cov_q57dc2sqn().s[45]++;
    return _apiutils.ApiResponse.unauthorized('User not authenticated');
  } else
  /* istanbul ignore next */
  {
    cov_q57dc2sqn().b[21][1]++;
  }
  cov_q57dc2sqn().s[46]++;
  try {
    const supabase =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[47]++, _supabase.supabaseAdmin);
    // Start transaction-like operations
    // 1. Delete user data from related tables
    /* istanbul ignore next */
    cov_q57dc2sqn().s[48]++;
    await Promise.all([supabase.from('conversations').delete().eq('user_id', user.id), supabase.from('file_metadata').delete().eq('user_id', user.id), supabase.from('document_chunks').delete().eq('user_id', user.id), supabase.from('usage_logs').delete().eq('user_id', user.id), supabase.from('oauth_tokens').delete().eq('user_id', user.id), supabase.from('user_settings').delete().eq('user_id', user.id)]);
    // 2. Delete user profile
    const {
      error: deleteError
    } =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[49]++, await supabase.from('users').delete().eq('id', user.id));
    /* istanbul ignore next */
    cov_q57dc2sqn().s[50]++;
    if (deleteError) {
      /* istanbul ignore next */
      cov_q57dc2sqn().b[22][0]++;
      cov_q57dc2sqn().s[51]++;
      console.error('Profile deletion error:', deleteError);
      /* istanbul ignore next */
      cov_q57dc2sqn().s[52]++;
      return _apiutils.ApiResponse.internalError('Failed to delete profile');
    } else
    /* istanbul ignore next */
    {
      cov_q57dc2sqn().b[22][1]++;
    }
    // 3. Delete from Supabase Auth
    const {
      error: authDeleteError
    } =
    /* istanbul ignore next */
    (cov_q57dc2sqn().s[53]++, await supabase.auth.admin.deleteUser(user.id));
    /* istanbul ignore next */
    cov_q57dc2sqn().s[54]++;
    if (authDeleteError) {
      /* istanbul ignore next */
      cov_q57dc2sqn().b[23][0]++;
      cov_q57dc2sqn().s[55]++;
      console.error('Auth deletion error:', authDeleteError);
      // Continue anyway as the profile data is already deleted
    } else
    /* istanbul ignore next */
    {
      cov_q57dc2sqn().b[23][1]++;
    }
    // Log usage
    cov_q57dc2sqn().s[56]++;
    (0, _logger.logApiUsage)(user.id, '/api/user/profile', 'account_deletion');
    /* istanbul ignore next */
    cov_q57dc2sqn().s[57]++;
    return _apiutils.ApiResponse.success(null, 'Account deleted successfully');
  } catch (error) {
    /* istanbul ignore next */
    cov_q57dc2sqn().s[58]++;
    console.error('Profile deletion handler error:', error);
    /* istanbul ignore next */
    cov_q57dc2sqn().s[59]++;
    return _apiutils.ApiResponse.internalError('Failed to process account deletion');
  }
}
const GET =
/* istanbul ignore next */
(cov_q57dc2sqn().s[60]++, (0, _apimiddleware.createProtectedApiHandler)(getProfileHandler, {
  rateLimit: _ratelimit.rateLimitConfigs.general,
  logging: {
    enabled: true,
    includeBody: false
  }
}));
const PUT =
/* istanbul ignore next */
(cov_q57dc2sqn().s[61]++, (0, _apimiddleware.createProtectedApiHandler)(updateProfileHandler, {
  rateLimit: {
    ..._ratelimit.rateLimitConfigs.general,
    maxRequests: 20
  },
  validation: {
    body: _validations.userProfileSchema
  },
  logging: {
    enabled: true,
    includeBody: true
  }
}));
const DELETE =
/* istanbul ignore next */
(cov_q57dc2sqn().s[62]++, (0, _apimiddleware.createProtectedApiHandler)(deleteProfileHandler, {
  rateLimit: {
    ..._ratelimit.rateLimitConfigs.strict,
    maxRequests: 2
  },
  logging: {
    enabled: true,
    includeBody: false
  }
}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJERUxFVEUiLCJjb3ZfcTU3ZGMyc3FuIiwiZiIsInMiLCJHRVQiLCJQVVQiLCJnZXRQcm9maWxlSGFuZGxlciIsInJlcXVlc3QiLCJjb250ZXh0IiwidXNlciIsImIiLCJfYXBpdXRpbHMiLCJBcGlSZXNwb25zZSIsInVuYXV0aG9yaXplZCIsInN1cGFiYXNlIiwiX3N1cGFiYXNlIiwic3VwYWJhc2VBZG1pbiIsImRhdGEiLCJ1c2VyUHJvZmlsZSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiaWQiLCJzaW5nbGUiLCJjb25zb2xlIiwiaW50ZXJuYWxFcnJvciIsInVzYWdlU3RhdHMiLCJjaGF0X21lc3NhZ2VzIiwidXNlZCIsImNoYXRfbWVzc2FnZXNfY291bnQiLCJsaW1pdCIsImNoYXRfbWVzc2FnZXNfbGltaXQiLCJwZXJjZW50YWdlIiwiTWF0aCIsInJvdW5kIiwiZG9jdW1lbnRzIiwiZG9jdW1lbnRzX3VwbG9hZGVkIiwiZG9jdW1lbnRzX2xpbWl0IiwiYXBpX2NhbGxzIiwiYXBpX2NhbGxzX2NvdW50IiwiYXBpX2NhbGxzX2xpbWl0Iiwic3RvcmFnZSIsInN0b3JhZ2VfdXNlZF9ieXRlcyIsInN0b3JhZ2VfbGltaXRfYnl0ZXMiLCJfbG9nZ2VyIiwibG9nQXBpVXNhZ2UiLCJzdWNjZXNzIiwicHJvZmlsZSIsInVzYWdlX3N0YXRzIiwidXBkYXRlUHJvZmlsZUhhbmRsZXIiLCJ2YWxpZGF0ZWREYXRhIiwiYm9keSIsImJhZFJlcXVlc3QiLCJ1cGRhdGVEYXRhIiwidXBkYXRlZFByb2ZpbGUiLCJ1cGRhdGUiLCJmdWxsX25hbWUiLCJwcmVmZXJlbmNlcyIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJmaWVsZHNfdXBkYXRlZCIsIk9iamVjdCIsImtleXMiLCJkZWxldGVQcm9maWxlSGFuZGxlciIsIlByb21pc2UiLCJhbGwiLCJkZWxldGUiLCJkZWxldGVFcnJvciIsImF1dGhEZWxldGVFcnJvciIsImF1dGgiLCJhZG1pbiIsImRlbGV0ZVVzZXIiLCJfYXBpbWlkZGxld2FyZSIsImNyZWF0ZVByb3RlY3RlZEFwaUhhbmRsZXIiLCJyYXRlTGltaXQiLCJfcmF0ZWxpbWl0IiwicmF0ZUxpbWl0Q29uZmlncyIsImdlbmVyYWwiLCJsb2dnaW5nIiwiZW5hYmxlZCIsImluY2x1ZGVCb2R5IiwibWF4UmVxdWVzdHMiLCJ2YWxpZGF0aW9uIiwiX3ZhbGlkYXRpb25zIiwidXNlclByb2ZpbGVTY2hlbWEiLCJzdHJpY3QiXSwic291cmNlcyI6WyJSOlxcQXBwc1xcQnJpZWZseV9DbG91ZFxcYnJpZWZseS1jbG91ZC1uZXh0anNcXHNyY1xcYXBwXFxhcGlcXHVzZXJcXHByb2ZpbGVcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBjcmVhdGVQcm90ZWN0ZWRBcGlIYW5kbGVyLCBBcGlDb250ZXh0IH0gZnJvbSAnQC9hcHAvbGliL2FwaS1taWRkbGV3YXJlJ1xyXG5pbXBvcnQgeyBBcGlSZXNwb25zZSB9IGZyb20gJ0AvYXBwL2xpYi9hcGktdXRpbHMnXHJcbmltcG9ydCB7IHJhdGVMaW1pdENvbmZpZ3MgfSBmcm9tICdAL2FwcC9saWIvcmF0ZS1saW1pdCdcclxuaW1wb3J0IHsgdXNlclByb2ZpbGVTY2hlbWEgfSBmcm9tICdAL2FwcC9saWIvdmFsaWRhdGlvbnMnXHJcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2FwcC9saWIvc3VwYWJhc2UnXHJcbmltcG9ydCB7IGxvZ0FwaVVzYWdlIH0gZnJvbSAnQC9hcHAvbGliL2xvZ2dlcidcclxuXHJcbi8vIEdFVCAvYXBpL3VzZXIvcHJvZmlsZSAtIEdldCB1c2VyIHByb2ZpbGVcclxuYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZmlsZUhhbmRsZXIocmVxdWVzdDogUmVxdWVzdCwgY29udGV4dDogQXBpQ29udGV4dCk6IFByb21pc2U8TmV4dFJlc3BvbnNlPiB7XHJcbiAgY29uc3QgeyB1c2VyIH0gPSBjb250ZXh0XHJcbiAgXHJcbiAgaWYgKCF1c2VyKSB7XHJcbiAgICByZXR1cm4gQXBpUmVzcG9uc2UudW5hdXRob3JpemVkKCdVc2VyIG5vdCBhdXRoZW50aWNhdGVkJylcclxuICB9XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gc3VwYWJhc2VBZG1pblxyXG4gICAgXHJcbiAgICAvLyBHZXQgZnVsbCB1c2VyIHByb2ZpbGUgd2l0aCB1c2FnZSBzdGF0aXN0aWNzXHJcbiAgICBjb25zdCB7IGRhdGE6IHVzZXJQcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3VzZXJzJylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgZnVsbF9uYW1lLFxyXG4gICAgICAgIHN1YnNjcmlwdGlvbl90aWVyLFxyXG4gICAgICAgIHN1YnNjcmlwdGlvbl9zdGF0dXMsXHJcbiAgICAgICAgY2hhdF9tZXNzYWdlc19jb3VudCxcclxuICAgICAgICBjaGF0X21lc3NhZ2VzX2xpbWl0LFxyXG4gICAgICAgIGRvY3VtZW50c191cGxvYWRlZCxcclxuICAgICAgICBkb2N1bWVudHNfbGltaXQsXHJcbiAgICAgICAgYXBpX2NhbGxzX2NvdW50LFxyXG4gICAgICAgIGFwaV9jYWxsc19saW1pdCxcclxuICAgICAgICBzdG9yYWdlX3VzZWRfYnl0ZXMsXHJcbiAgICAgICAgc3RvcmFnZV9saW1pdF9ieXRlcyxcclxuICAgICAgICBwcmVmZXJlbmNlcyxcclxuICAgICAgICBmZWF0dXJlc19lbmFibGVkLFxyXG4gICAgICAgIHBlcm1pc3Npb25zLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQsXHJcbiAgICAgICAgdXBkYXRlZF9hdCxcclxuICAgICAgICB1c2FnZV9yZXNldF9kYXRlLFxyXG4gICAgICAgIHRyaWFsX2VuZF9kYXRlXHJcbiAgICAgIGApXHJcbiAgICAgIC5lcSgnaWQnLCB1c2VyLmlkKVxyXG4gICAgICAuc2luZ2xlKClcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Byb2ZpbGUgZmV0Y2ggZXJyb3I6JywgZXJyb3IpXHJcbiAgICAgIHJldHVybiBBcGlSZXNwb25zZS5pbnRlcm5hbEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggdXNlciBwcm9maWxlJylcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIHVzYWdlIHBlcmNlbnRhZ2VzXHJcbiAgICBjb25zdCB1c2FnZVN0YXRzID0ge1xyXG4gICAgICBjaGF0X21lc3NhZ2VzOiB7XHJcbiAgICAgICAgdXNlZDogdXNlclByb2ZpbGUuY2hhdF9tZXNzYWdlc19jb3VudCB8fCAwLFxyXG4gICAgICAgIGxpbWl0OiB1c2VyUHJvZmlsZS5jaGF0X21lc3NhZ2VzX2xpbWl0IHx8IDAsXHJcbiAgICAgICAgcGVyY2VudGFnZTogTWF0aC5yb3VuZCgoKHVzZXJQcm9maWxlLmNoYXRfbWVzc2FnZXNfY291bnQgfHwgMCkgLyAodXNlclByb2ZpbGUuY2hhdF9tZXNzYWdlc19saW1pdCB8fCAxKSkgKiAxMDApXHJcbiAgICAgIH0sXHJcbiAgICAgIGRvY3VtZW50czoge1xyXG4gICAgICAgIHVzZWQ6IHVzZXJQcm9maWxlLmRvY3VtZW50c191cGxvYWRlZCB8fCAwLFxyXG4gICAgICAgIGxpbWl0OiB1c2VyUHJvZmlsZS5kb2N1bWVudHNfbGltaXQgfHwgMCxcclxuICAgICAgICBwZXJjZW50YWdlOiBNYXRoLnJvdW5kKCgodXNlclByb2ZpbGUuZG9jdW1lbnRzX3VwbG9hZGVkIHx8IDApIC8gKHVzZXJQcm9maWxlLmRvY3VtZW50c19saW1pdCB8fCAxKSkgKiAxMDApXHJcbiAgICAgIH0sXHJcbiAgICAgIGFwaV9jYWxsczoge1xyXG4gICAgICAgIHVzZWQ6IHVzZXJQcm9maWxlLmFwaV9jYWxsc19jb3VudCB8fCAwLFxyXG4gICAgICAgIGxpbWl0OiB1c2VyUHJvZmlsZS5hcGlfY2FsbHNfbGltaXQgfHwgMCxcclxuICAgICAgICBwZXJjZW50YWdlOiBNYXRoLnJvdW5kKCgodXNlclByb2ZpbGUuYXBpX2NhbGxzX2NvdW50IHx8IDApIC8gKHVzZXJQcm9maWxlLmFwaV9jYWxsc19saW1pdCB8fCAxKSkgKiAxMDApXHJcbiAgICAgIH0sXHJcbiAgICAgIHN0b3JhZ2U6IHtcclxuICAgICAgICB1c2VkOiB1c2VyUHJvZmlsZS5zdG9yYWdlX3VzZWRfYnl0ZXMgfHwgMCxcclxuICAgICAgICBsaW1pdDogdXNlclByb2ZpbGUuc3RvcmFnZV9saW1pdF9ieXRlcyB8fCAwLFxyXG4gICAgICAgIHBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKCh1c2VyUHJvZmlsZS5zdG9yYWdlX3VzZWRfYnl0ZXMgfHwgMCkgLyAodXNlclByb2ZpbGUuc3RvcmFnZV9saW1pdF9ieXRlcyB8fCAxKSkgKiAxMDApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTG9nIHVzYWdlXHJcbiAgICBsb2dBcGlVc2FnZSh1c2VyLmlkLCAnL2FwaS91c2VyL3Byb2ZpbGUnLCAncHJvZmlsZV92aWV3JylcclxuICAgIFxyXG4gICAgcmV0dXJuIEFwaVJlc3BvbnNlLnN1Y2Nlc3Moe1xyXG4gICAgICBwcm9maWxlOiB1c2VyUHJvZmlsZSxcclxuICAgICAgdXNhZ2Vfc3RhdHM6IHVzYWdlU3RhdHMsXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Byb2ZpbGUgaGFuZGxlciBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS5pbnRlcm5hbEVycm9yKCdGYWlsZWQgdG8gcHJvY2VzcyBwcm9maWxlIHJlcXVlc3QnKVxyXG4gIH1cclxufVxyXG5cclxuLy8gUFVUIC9hcGkvdXNlci9wcm9maWxlIC0gVXBkYXRlIHVzZXIgcHJvZmlsZVxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlSGFuZGxlcihyZXF1ZXN0OiBSZXF1ZXN0LCBjb250ZXh0OiBBcGlDb250ZXh0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U+IHtcclxuICBjb25zdCB7IHVzZXIsIHZhbGlkYXRlZERhdGEgfSA9IGNvbnRleHRcclxuICBcclxuICBpZiAoIXVzZXIpIHtcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS51bmF1dGhvcml6ZWQoJ1VzZXIgbm90IGF1dGhlbnRpY2F0ZWQnKVxyXG4gIH1cclxuICBcclxuICBpZiAoIXZhbGlkYXRlZERhdGE/LmJvZHkpIHtcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS5iYWRSZXF1ZXN0KCdJbnZhbGlkIHJlcXVlc3QgYm9keScpXHJcbiAgfVxyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IHN1cGFiYXNlQWRtaW5cclxuICAgIFxyXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHZhbGlkYXRlZERhdGEuYm9keVxyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgdXNlciBwcm9maWxlXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRQcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3VzZXJzJylcclxuICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgZnVsbF9uYW1lOiB1cGRhdGVEYXRhLmZ1bGxfbmFtZSxcclxuICAgICAgICBwcmVmZXJlbmNlczogdXBkYXRlRGF0YS5wcmVmZXJlbmNlcyxcclxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIH0pXHJcbiAgICAgIC5lcSgnaWQnLCB1c2VyLmlkKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpXHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdQcm9maWxlIHVwZGF0ZSBlcnJvcjonLCBlcnJvcilcclxuICAgICAgcmV0dXJuIEFwaVJlc3BvbnNlLmludGVybmFsRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgcHJvZmlsZScpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIExvZyB1c2FnZVxyXG4gICAgbG9nQXBpVXNhZ2UodXNlci5pZCwgJy9hcGkvdXNlci9wcm9maWxlJywgJ3Byb2ZpbGVfdXBkYXRlJywge1xyXG4gICAgICBmaWVsZHNfdXBkYXRlZDogT2JqZWN0LmtleXModXBkYXRlRGF0YSlcclxuICAgIH0pXHJcbiAgICBcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS5zdWNjZXNzKFxyXG4gICAgICB7IHByb2ZpbGU6IHVwZGF0ZWRQcm9maWxlIH0sXHJcbiAgICAgICdQcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5J1xyXG4gICAgKVxyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Byb2ZpbGUgdXBkYXRlIGhhbmRsZXIgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gQXBpUmVzcG9uc2UuaW50ZXJuYWxFcnJvcignRmFpbGVkIHRvIHByb2Nlc3MgcHJvZmlsZSB1cGRhdGUnKVxyXG4gIH1cclxufVxyXG5cclxuLy8gREVMRVRFIC9hcGkvdXNlci9wcm9maWxlIC0gRGVsZXRlIHVzZXIgYWNjb3VudFxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVQcm9maWxlSGFuZGxlcihyZXF1ZXN0OiBSZXF1ZXN0LCBjb250ZXh0OiBBcGlDb250ZXh0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U+IHtcclxuICBjb25zdCB7IHVzZXIgfSA9IGNvbnRleHRcclxuICBcclxuICBpZiAoIXVzZXIpIHtcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS51bmF1dGhvcml6ZWQoJ1VzZXIgbm90IGF1dGhlbnRpY2F0ZWQnKVxyXG4gIH1cclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBzdXBhYmFzZUFkbWluXHJcbiAgICBcclxuICAgIC8vIFN0YXJ0IHRyYW5zYWN0aW9uLWxpa2Ugb3BlcmF0aW9uc1xyXG4gICAgLy8gMS4gRGVsZXRlIHVzZXIgZGF0YSBmcm9tIHJlbGF0ZWQgdGFibGVzXHJcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIHN1cGFiYXNlLmZyb20oJ2NvbnZlcnNhdGlvbnMnKS5kZWxldGUoKS5lcSgndXNlcl9pZCcsIHVzZXIuaWQpLFxyXG4gICAgICBzdXBhYmFzZS5mcm9tKCdmaWxlX21ldGFkYXRhJykuZGVsZXRlKCkuZXEoJ3VzZXJfaWQnLCB1c2VyLmlkKSxcclxuICAgICAgc3VwYWJhc2UuZnJvbSgnZG9jdW1lbnRfY2h1bmtzJykuZGVsZXRlKCkuZXEoJ3VzZXJfaWQnLCB1c2VyLmlkKSxcclxuICAgICAgc3VwYWJhc2UuZnJvbSgndXNhZ2VfbG9ncycpLmRlbGV0ZSgpLmVxKCd1c2VyX2lkJywgdXNlci5pZCksXHJcbiAgICAgIHN1cGFiYXNlLmZyb20oJ29hdXRoX3Rva2VucycpLmRlbGV0ZSgpLmVxKCd1c2VyX2lkJywgdXNlci5pZCksXHJcbiAgICAgIHN1cGFiYXNlLmZyb20oJ3VzZXJfc2V0dGluZ3MnKS5kZWxldGUoKS5lcSgndXNlcl9pZCcsIHVzZXIuaWQpLFxyXG4gICAgXSlcclxuICAgIFxyXG4gICAgLy8gMi4gRGVsZXRlIHVzZXIgcHJvZmlsZVxyXG4gICAgY29uc3QgeyBlcnJvcjogZGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgIC5kZWxldGUoKVxyXG4gICAgICAuZXEoJ2lkJywgdXNlci5pZClcclxuICAgIFxyXG4gICAgaWYgKGRlbGV0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Byb2ZpbGUgZGVsZXRpb24gZXJyb3I6JywgZGVsZXRlRXJyb3IpXHJcbiAgICAgIHJldHVybiBBcGlSZXNwb25zZS5pbnRlcm5hbEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIHByb2ZpbGUnKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyAzLiBEZWxldGUgZnJvbSBTdXBhYmFzZSBBdXRoXHJcbiAgICBjb25zdCB7IGVycm9yOiBhdXRoRGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguYWRtaW4uZGVsZXRlVXNlcih1c2VyLmlkKVxyXG4gICAgXHJcbiAgICBpZiAoYXV0aERlbGV0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGggZGVsZXRpb24gZXJyb3I6JywgYXV0aERlbGV0ZUVycm9yKVxyXG4gICAgICAvLyBDb250aW51ZSBhbnl3YXkgYXMgdGhlIHByb2ZpbGUgZGF0YSBpcyBhbHJlYWR5IGRlbGV0ZWRcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTG9nIHVzYWdlXHJcbiAgICBsb2dBcGlVc2FnZSh1c2VyLmlkLCAnL2FwaS91c2VyL3Byb2ZpbGUnLCAnYWNjb3VudF9kZWxldGlvbicpXHJcbiAgICBcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS5zdWNjZXNzKFxyXG4gICAgICBudWxsLFxyXG4gICAgICAnQWNjb3VudCBkZWxldGVkIHN1Y2Nlc3NmdWxseSdcclxuICAgIClcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdQcm9maWxlIGRlbGV0aW9uIGhhbmRsZXIgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gQXBpUmVzcG9uc2UuaW50ZXJuYWxFcnJvcignRmFpbGVkIHRvIHByb2Nlc3MgYWNjb3VudCBkZWxldGlvbicpXHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgaGFuZGxlcnMgd2l0aCBtaWRkbGV3YXJlXHJcbmV4cG9ydCBjb25zdCBHRVQgPSBjcmVhdGVQcm90ZWN0ZWRBcGlIYW5kbGVyKGdldFByb2ZpbGVIYW5kbGVyLCB7XHJcbiAgcmF0ZUxpbWl0OiByYXRlTGltaXRDb25maWdzLmdlbmVyYWwsXHJcbiAgbG9nZ2luZzoge1xyXG4gICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgIGluY2x1ZGVCb2R5OiBmYWxzZSxcclxuICB9LFxyXG59KVxyXG5cclxuZXhwb3J0IGNvbnN0IFBVVCA9IGNyZWF0ZVByb3RlY3RlZEFwaUhhbmRsZXIodXBkYXRlUHJvZmlsZUhhbmRsZXIsIHtcclxuICByYXRlTGltaXQ6IHtcclxuICAgIC4uLnJhdGVMaW1pdENvbmZpZ3MuZ2VuZXJhbCxcclxuICAgIG1heFJlcXVlc3RzOiAyMCwgLy8gTW9yZSByZXN0cmljdGl2ZSBmb3IgdXBkYXRlc1xyXG4gIH0sXHJcbiAgdmFsaWRhdGlvbjoge1xyXG4gICAgYm9keTogdXNlclByb2ZpbGVTY2hlbWEsXHJcbiAgfSxcclxuICBsb2dnaW5nOiB7XHJcbiAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgaW5jbHVkZUJvZHk6IHRydWUsXHJcbiAgfSxcclxufSlcclxuXHJcbmV4cG9ydCBjb25zdCBERUxFVEUgPSBjcmVhdGVQcm90ZWN0ZWRBcGlIYW5kbGVyKGRlbGV0ZVByb2ZpbGVIYW5kbGVyLCB7XHJcbiAgcmF0ZUxpbWl0OiB7XHJcbiAgICAuLi5yYXRlTGltaXRDb25maWdzLnN0cmljdCxcclxuICAgIG1heFJlcXVlc3RzOiAyLCAvLyBWZXJ5IHJlc3RyaWN0aXZlIGZvciBhY2NvdW50IGRlbGV0aW9uXHJcbiAgfSxcclxuICBsb2dnaW5nOiB7XHJcbiAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgaW5jbHVkZUJvZHk6IGZhbHNlLFxyXG4gIH0sXHJcbn0pIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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