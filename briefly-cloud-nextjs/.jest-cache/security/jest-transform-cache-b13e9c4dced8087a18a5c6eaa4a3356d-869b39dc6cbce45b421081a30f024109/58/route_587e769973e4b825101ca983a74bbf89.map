{"version":3,"names":["DELETE","cov_168en85j29","f","s","POST","PUT","bulkDeleteSchema","_zod","z","object","file_ids","array","string","min","max","bulkUpdateSchema","updates","name","optional","metadata","record","any","bulkDeleteHandler","request","context","user","b","_apiutils","ApiResponse","unauthorized","body","json","validation","safeParse","success","badRequest","data","supabase","_supabase","supabaseAdmin","files","error","fetchError","from","select","eq","id","in","console","internalError","length","notFound","results","deleted","failed","total_size_freed","file","source","path","storageError","storage","remove","delete","deleteError","push","size","userProfile","single","update","documents_uploaded","Math","storage_used_bytes","updated_at","Date","toISOString","_logger","logApiUsage","requested_count","deleted_count","failed_count","size_freed","bulkUpdateHandler","updated","updateData","updateError","updated_count","update_fields","Object","keys","bulkInfoHandler","Array","isArray","filesMap","Map","map","get","found","mime_type","processed","processing_status","created_at","found_count","summary","requested","not_found","_apimiddleware","createProtectedApiHandler","rateLimit","_ratelimit","rateLimitConfigs","general","maxRequests","logging","enabled","includeBody"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\upload\\bulk\\route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport { createProtectedApiHandler, ApiContext } from '@/app/lib/api-middleware'\r\nimport { ApiResponse } from '@/app/lib/api-utils'\r\nimport { rateLimitConfigs } from '@/app/lib/rate-limit'\r\nimport { supabaseAdmin } from '@/app/lib/supabase'\r\nimport { logApiUsage } from '@/app/lib/logger'\r\nimport { z } from 'zod'\r\n\r\n// Validation schemas\r\nconst bulkDeleteSchema = z.object({\r\n  file_ids: z.array(z.string()).min(1).max(50), // Limit to 50 files at once\r\n})\r\n\r\nconst bulkUpdateSchema = z.object({\r\n  file_ids: z.array(z.string()).min(1).max(50),\r\n  updates: z.object({\r\n    name: z.string().optional(),\r\n    metadata: z.record(z.any()).optional(),\r\n  }),\r\n})\r\n\r\n// DELETE /api/upload/bulk - Delete multiple files\r\nasync function bulkDeleteHandler(request: Request, context: ApiContext): Promise<NextResponse> {\r\n  const { user } = context\r\n  \r\n  if (!user) {\r\n    return ApiResponse.unauthorized('User not authenticated')\r\n  }\r\n  \r\n  try {\r\n    const body = await request.json()\r\n    const validation = bulkDeleteSchema.safeParse(body)\r\n    \r\n    if (!validation.success) {\r\n      return ApiResponse.badRequest('Invalid request data')\r\n    }\r\n    \r\n    const { file_ids } = validation.data\r\n    \r\n    const supabase = supabaseAdmin\r\n    \r\n    // Get files to delete (ensure user owns them)\r\n    const { data: files, error: fetchError } = await supabase\r\n      .from('file_metadata')\r\n      .select('*')\r\n      .eq('user_id', user.id)\r\n      .in('id', file_ids)\r\n    \r\n    if (fetchError) {\r\n      console.error('Files fetch error:', fetchError)\r\n      return ApiResponse.internalError('Failed to fetch files')\r\n    }\r\n    \r\n    if (!files || files.length === 0) {\r\n      return ApiResponse.notFound('No files found to delete')\r\n    }\r\n    \r\n    const results = {\r\n      deleted: [] as string[],\r\n      failed: [] as { id: string; error: string }[],\r\n      total_size_freed: 0,\r\n    }\r\n    \r\n    // Delete files one by one to handle errors gracefully\r\n    for (const file of files) {\r\n      try {\r\n        // Delete from storage if it's an uploaded file\r\n        if (file.source === 'upload' && file.path) {\r\n          const { error: storageError } = await supabase.storage\r\n            .from('documents')\r\n            .remove([file.path])\r\n          \r\n          if (storageError) {\r\n            console.error(`Storage deletion error for ${file.id}:`, storageError)\r\n            // Continue with metadata deletion\r\n          }\r\n        }\r\n        \r\n        // Delete related document chunks\r\n        await supabase\r\n          .from('document_chunks')\r\n          .delete()\r\n          .eq('file_id', file.id)\r\n        \r\n        // Delete file metadata\r\n        const { error: deleteError } = await supabase\r\n          .from('file_metadata')\r\n          .delete()\r\n          .eq('id', file.id)\r\n          .eq('user_id', user.id)\r\n        \r\n        if (deleteError) {\r\n          results.failed.push({\r\n            id: file.id,\r\n            error: 'Failed to delete metadata',\r\n          })\r\n        } else {\r\n          results.deleted.push(file.id)\r\n          results.total_size_freed += file.size || 0\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error(`Error deleting file ${file.id}:`, error)\r\n        results.failed.push({\r\n          id: file.id,\r\n          error: 'Unexpected error during deletion',\r\n        })\r\n      }\r\n    }\r\n    \r\n    // Update user usage statistics\r\n    if (results.deleted.length > 0) {\r\n      const { data: userProfile } = await supabase\r\n        .from('users')\r\n        .select('documents_uploaded, storage_used_bytes')\r\n        .eq('id', user.id)\r\n        .single()\r\n      \r\n      if (userProfile) {\r\n        await supabase\r\n          .from('users')\r\n          .update({\r\n            documents_uploaded: Math.max(0, (userProfile.documents_uploaded || 0) - results.deleted.length),\r\n            storage_used_bytes: Math.max(0, (userProfile.storage_used_bytes || 0) - results.total_size_freed),\r\n            updated_at: new Date().toISOString(),\r\n          })\r\n          .eq('id', user.id)\r\n      }\r\n    }\r\n    \r\n    // Log usage\r\n    logApiUsage(user.id, '/api/upload/bulk', 'bulk_delete', {\r\n      requested_count: file_ids.length,\r\n      deleted_count: results.deleted.length,\r\n      failed_count: results.failed.length,\r\n      size_freed: results.total_size_freed,\r\n    })\r\n    \r\n    return ApiResponse.success(results, \r\n      `Bulk delete completed: ${results.deleted.length} deleted, ${results.failed.length} failed`\r\n    )\r\n    \r\n  } catch (error) {\r\n    console.error('Bulk delete handler error:', error)\r\n    return ApiResponse.internalError('Failed to process bulk delete')\r\n  }\r\n}\r\n\r\n// PUT /api/upload/bulk - Update multiple files\r\nasync function bulkUpdateHandler(request: Request, context: ApiContext): Promise<NextResponse> {\r\n  const { user } = context\r\n  \r\n  if (!user) {\r\n    return ApiResponse.unauthorized('User not authenticated')\r\n  }\r\n  \r\n  try {\r\n    const body = await request.json()\r\n    const validation = bulkUpdateSchema.safeParse(body)\r\n    \r\n    if (!validation.success) {\r\n      return ApiResponse.badRequest('Invalid request data')\r\n    }\r\n    \r\n    const { file_ids, updates } = validation.data\r\n    \r\n    if (!updates.name && !updates.metadata) {\r\n      return ApiResponse.badRequest('At least one update field is required')\r\n    }\r\n    \r\n    const supabase = supabaseAdmin\r\n    \r\n    // Get files to update (ensure user owns them)\r\n    const { data: files, error: fetchError } = await supabase\r\n      .from('file_metadata')\r\n      .select('*')\r\n      .eq('user_id', user.id)\r\n      .in('id', file_ids)\r\n    \r\n    if (fetchError) {\r\n      console.error('Files fetch error:', fetchError)\r\n      return ApiResponse.internalError('Failed to fetch files')\r\n    }\r\n    \r\n    if (!files || files.length === 0) {\r\n      return ApiResponse.notFound('No files found to update')\r\n    }\r\n    \r\n    const results = {\r\n      updated: [] as string[],\r\n      failed: [] as { id: string; error: string }[],\r\n    }\r\n    \r\n    // Update files one by one to handle errors gracefully\r\n    for (const file of files) {\r\n      try {\r\n        // Prepare update data\r\n        const updateData: any = {\r\n          updated_at: new Date().toISOString(),\r\n        }\r\n        \r\n        if (updates.name) {\r\n          updateData.name = updates.name\r\n        }\r\n        \r\n        if (updates.metadata) {\r\n          updateData.metadata = {\r\n            ...file.metadata,\r\n            ...updates.metadata,\r\n          }\r\n        }\r\n        \r\n        // Update file metadata\r\n        const { error: updateError } = await supabase\r\n          .from('file_metadata')\r\n          .update(updateData)\r\n          .eq('id', file.id)\r\n          .eq('user_id', user.id)\r\n        \r\n        if (updateError) {\r\n          results.failed.push({\r\n            id: file.id,\r\n            error: 'Failed to update metadata',\r\n          })\r\n        } else {\r\n          results.updated.push(file.id)\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error(`Error updating file ${file.id}:`, error)\r\n        results.failed.push({\r\n          id: file.id,\r\n          error: 'Unexpected error during update',\r\n        })\r\n      }\r\n    }\r\n    \r\n    // Log usage\r\n    logApiUsage(user.id, '/api/upload/bulk', 'bulk_update', {\r\n      requested_count: file_ids.length,\r\n      updated_count: results.updated.length,\r\n      failed_count: results.failed.length,\r\n      update_fields: Object.keys(updates),\r\n    })\r\n    \r\n    return ApiResponse.success(results,\r\n      `Bulk update completed: ${results.updated.length} updated, ${results.failed.length} failed`\r\n    )\r\n    \r\n  } catch (error) {\r\n    console.error('Bulk update handler error:', error)\r\n    return ApiResponse.internalError('Failed to process bulk update')\r\n  }\r\n}\r\n\r\n// POST /api/upload/bulk - Get multiple files info\r\nasync function bulkInfoHandler(request: Request, context: ApiContext): Promise<NextResponse> {\r\n  const { user } = context\r\n  \r\n  if (!user) {\r\n    return ApiResponse.unauthorized('User not authenticated')\r\n  }\r\n  \r\n  try {\r\n    const body = await request.json()\r\n    const { file_ids } = body\r\n    \r\n    if (!Array.isArray(file_ids) || file_ids.length === 0 || file_ids.length > 100) {\r\n      return ApiResponse.badRequest('file_ids must be an array with 1-100 items')\r\n    }\r\n    \r\n    const supabase = supabaseAdmin\r\n    \r\n    // Get files info\r\n    const { data: files, error } = await supabase\r\n      .from('file_metadata')\r\n      .select('*')\r\n      .eq('user_id', user.id)\r\n      .in('id', file_ids)\r\n    \r\n    if (error) {\r\n      console.error('Files fetch error:', error)\r\n      return ApiResponse.internalError('Failed to fetch files')\r\n    }\r\n    \r\n    // Format response\r\n    const filesMap = new Map(files?.map(file => [file.id, file]) || [])\r\n    const results = file_ids.map(id => {\r\n      const file = filesMap.get(id)\r\n      if (!file) {\r\n        return { id, found: false }\r\n      }\r\n      \r\n      return {\r\n        id: file.id,\r\n        found: true,\r\n        name: file.name,\r\n        size: file.size,\r\n        mime_type: file.mime_type,\r\n        source: file.source,\r\n        processed: file.processed,\r\n        processing_status: file.processing_status,\r\n        created_at: file.created_at,\r\n        updated_at: file.updated_at,\r\n      }\r\n    })\r\n    \r\n    // Log usage\r\n    logApiUsage(user.id, '/api/upload/bulk', 'bulk_info', {\r\n      requested_count: file_ids.length,\r\n      found_count: files?.length || 0,\r\n    })\r\n    \r\n    return ApiResponse.success({\r\n      files: results,\r\n      summary: {\r\n        requested: file_ids.length,\r\n        found: files?.length || 0,\r\n        not_found: file_ids.length - (files?.length || 0),\r\n      },\r\n    })\r\n    \r\n  } catch (error) {\r\n    console.error('Bulk info handler error:', error)\r\n    return ApiResponse.internalError('Failed to get files info')\r\n  }\r\n}\r\n\r\n// Export handlers with middleware\r\nexport const DELETE = createProtectedApiHandler(bulkDeleteHandler, {\r\n  rateLimit: {\r\n    ...rateLimitConfigs.general,\r\n    maxRequests: 10, // More restrictive for bulk operations\r\n  },\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: true,\r\n  },\r\n})\r\n\r\nexport const PUT = createProtectedApiHandler(bulkUpdateHandler, {\r\n  rateLimit: {\r\n    ...rateLimitConfigs.general,\r\n    maxRequests: 20,\r\n  },\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: true,\r\n  },\r\n})\r\n\r\nexport const POST = createProtectedApiHandler(bulkInfoHandler, {\r\n  rateLimit: rateLimitConfigs.general,\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: false,\r\n  },\r\n})"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}