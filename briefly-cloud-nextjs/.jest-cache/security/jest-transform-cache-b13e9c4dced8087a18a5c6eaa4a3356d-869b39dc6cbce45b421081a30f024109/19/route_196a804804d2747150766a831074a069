aac8a4008bf7c3758743c1e8d159a604
"use strict";

/* istanbul ignore next */
function cov_129ghamrr6() {
  var path = "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\extract\\route.ts";
  var hash = "28265420710a0b7fa1a348389b705e8e78bb5a67";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\extract\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 20
        }
      },
      "3": {
        start: {
          line: 11,
          column: 23
        },
        end: {
          line: 11,
          column: 58
        }
      },
      "4": {
        start: {
          line: 12,
          column: 18
        },
        end: {
          line: 12,
          column: 48
        }
      },
      "5": {
        start: {
          line: 13,
          column: 19
        },
        end: {
          line: 13,
          column: 50
        }
      },
      "6": {
        start: {
          line: 14,
          column: 16
        },
        end: {
          line: 14,
          column: 43
        }
      },
      "7": {
        start: {
          line: 15,
          column: 27
        },
        end: {
          line: 15,
          column: 66
        }
      },
      "8": {
        start: {
          line: 18,
          column: 21
        },
        end: {
          line: 18,
          column: 28
        }
      },
      "9": {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 21,
          column: 5
        }
      },
      "10": {
        start: {
          line: 20,
          column: 8
        },
        end: {
          line: 20,
          column: 76
        }
      },
      "11": {
        start: {
          line: 22,
          column: 4
        },
        end: {
          line: 90,
          column: 5
        }
      },
      "12": {
        start: {
          line: 29,
          column: 25
        },
        end: {
          line: 29,
          column: 49
        }
      },
      "13": {
        start: {
          line: 30,
          column: 21
        },
        end: {
          line: 30,
          column: 41
        }
      },
      "14": {
        start: {
          line: 31,
          column: 24
        },
        end: {
          line: 31,
          column: 90
        }
      },
      "15": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 34,
          column: 9
        }
      },
      "16": {
        start: {
          line: 33,
          column: 12
        },
        end: {
          line: 33,
          column: 72
        }
      },
      "17": {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 38,
          column: 9
        }
      },
      "18": {
        start: {
          line: 37,
          column: 12
        },
        end: {
          line: 37,
          column: 115
        }
      },
      "19": {
        start: {
          line: 40,
          column: 24
        },
        end: {
          line: 40,
          column: 40
        }
      },
      "20": {
        start: {
          line: 42,
          column: 8
        },
        end: {
          line: 44,
          column: 9
        }
      },
      "21": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 43,
          column: 163
        }
      },
      "22": {
        start: {
          line: 46,
          column: 23
        },
        end: {
          line: 46,
          column: 60
        }
      },
      "23": {
        start: {
          line: 48,
          column: 33
        },
        end: {
          line: 48,
          column: 114
        }
      },
      "24": {
        start: {
          line: 50,
          column: 21
        },
        end: {
          line: 50,
          column: 25
        }
      },
      "25": {
        start: {
          line: 51,
          column: 8
        },
        end: {
          line: 54,
          column: 9
        }
      },
      "26": {
        start: {
          line: 52,
          column: 33
        },
        end: {
          line: 52,
          column: 61
        }
      },
      "27": {
        start: {
          line: 53,
          column: 12
        },
        end: {
          line: 53,
          column: 143
        }
      },
      "28": {
        start: {
          line: 56,
          column: 22
        },
        end: {
          line: 56,
          column: 82
        }
      },
      "29": {
        start: {
          line: 58,
          column: 8
        },
        end: {
          line: 66,
          column: 11
        }
      },
      "30": {
        start: {
          line: 67,
          column: 8
        },
        end: {
          line: 82,
          column: 42
        }
      },
      "31": {
        start: {
          line: 84,
          column: 8
        },
        end: {
          line: 84,
          column: 63
        }
      },
      "32": {
        start: {
          line: 86,
          column: 8
        },
        end: {
          line: 88,
          column: 9
        }
      },
      "33": {
        start: {
          line: 87,
          column: 12
        },
        end: {
          line: 87,
          column: 24
        }
      },
      "34": {
        start: {
          line: 89,
          column: 8
        },
        end: {
          line: 89,
          column: 91
        }
      },
      "35": {
        start: {
          line: 92,
          column: 13
        },
        end: {
          line: 101,
          column: 2
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "extractTextHandler",
        decl: {
          start: {
            line: 17,
            column: 15
          },
          end: {
            line: 17,
            column: 33
          }
        },
        loc: {
          start: {
            line: 17,
            column: 52
          },
          end: {
            line: 91,
            column: 1
          }
        },
        line: 17
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 19,
            column: 4
          },
          end: {
            line: 21,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 19,
            column: 4
          },
          end: {
            line: 21,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 19
      },
      "1": {
        loc: {
          start: {
            line: 31,
            column: 24
          },
          end: {
            line: 31,
            column: 90
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 31,
            column: 50
          },
          end: {
            line: 31,
            column: 85
          }
        }, {
          start: {
            line: 31,
            column: 88
          },
          end: {
            line: 31,
            column: 90
          }
        }],
        line: 31
      },
      "2": {
        loc: {
          start: {
            line: 32,
            column: 8
          },
          end: {
            line: 34,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 32,
            column: 8
          },
          end: {
            line: 34,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 32
      },
      "3": {
        loc: {
          start: {
            line: 36,
            column: 8
          },
          end: {
            line: 38,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 36,
            column: 8
          },
          end: {
            line: 38,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 36
      },
      "4": {
        loc: {
          start: {
            line: 42,
            column: 8
          },
          end: {
            line: 44,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 42,
            column: 8
          },
          end: {
            line: 44,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 42
      },
      "5": {
        loc: {
          start: {
            line: 51,
            column: 8
          },
          end: {
            line: 54,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 51,
            column: 8
          },
          end: {
            line: 54,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 51
      },
      "6": {
        loc: {
          start: {
            line: 52,
            column: 33
          },
          end: {
            line: 52,
            column: 61
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 52,
            column: 33
          },
          end: {
            line: 52,
            column: 53
          }
        }, {
          start: {
            line: 52,
            column: 57
          },
          end: {
            line: 52,
            column: 61
          }
        }],
        line: 52
      },
      "7": {
        loc: {
          start: {
            line: 65,
            column: 25
          },
          end: {
            line: 65,
            column: 44
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 65,
            column: 25
          },
          end: {
            line: 65,
            column: 39
          }
        }, {
          start: {
            line: 65,
            column: 43
          },
          end: {
            line: 65,
            column: 44
          }
        }],
        line: 65
      },
      "8": {
        loc: {
          start: {
            line: 74,
            column: 15
          },
          end: {
            line: 76,
            column: 13
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 74,
            column: 15
          },
          end: {
            line: 74,
            column: 21
          }
        }, {
          start: {
            line: 74,
            column: 25
          },
          end: {
            line: 76,
            column: 13
          }
        }],
        line: 74
      },
      "9": {
        loc: {
          start: {
            line: 86,
            column: 8
          },
          end: {
            line: 88,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 86,
            column: 8
          },
          end: {
            line: 88,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 86
      },
      "10": {
        loc: {
          start: {
            line: 86,
            column: 12
          },
          end: {
            line: 86,
            column: 63
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 86,
            column: 12
          },
          end: {
            line: 86,
            column: 34
          }
        }, {
          start: {
            line: 86,
            column: 38
          },
          end: {
            line: 86,
            column: 63
          }
        }],
        line: 86
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\extract\\route.ts"],
      sourcesContent: ["import { NextResponse } from 'next/server'\r\nimport { createProtectedApiHandler, ApiContext } from '@/app/lib/api-middleware'\r\nimport { ApiResponse } from '@/app/lib/api-utils'\r\nimport { rateLimitConfigs } from '@/app/lib/rate-limit'\r\n// import { createClient } from '@supabase/supabase-js'\r\nimport { logApiUsage } from '@/app/lib/logger'\r\nimport { \r\n  extractTextFromBuffer, \r\n  createTextChunks, \r\n  isSupportedMimeType,\r\n  getExtractionStats \r\n} from '@/app/lib/document-extractor'\r\n\r\n// POST /api/extract - Extract text from uploaded file\r\nasync function extractTextHandler(request: Request, context: ApiContext): Promise<NextResponse> {\r\n  const { user } = context\r\n  \r\n  if (!user) {\r\n    return ApiResponse.unauthorized('User not authenticated')\r\n  }\r\n  \r\n  try {\r\n    // Note: supabase client available if needed for future enhancements\r\n    // const supabase = createClient(\r\n    //   process.env.SUPABASE_URL!,\r\n    //   process.env.SUPABASE_ANON_KEY!\r\n    // )\r\n    \r\n    // Parse multipart form data\r\n    const formData = await request.formData()\r\n    const file = formData.get('file') as File\r\n    const options = formData.get('options') ? JSON.parse(formData.get('options') as string) : {}\r\n    \r\n    if (!file) {\r\n      return ApiResponse.badRequest('No file provided')\r\n    }\r\n    \r\n    // Validate file type\r\n    if (!isSupportedMimeType(file.type)) {\r\n      return ApiResponse.badRequest(\r\n        `File type ${file.type} is not supported for text extraction`\r\n      )\r\n    }\r\n    \r\n    // Check file size (limit to 50MB for extraction)\r\n    const maxSize = 50 * 1024 * 1024 // 50MB\r\n    if (file.size > maxSize) {\r\n      return ApiResponse.badRequest(\r\n        `File size ${Math.round(file.size / 1024 / 1024)}MB exceeds maximum allowed size of 50MB for text extraction`\r\n      )\r\n    }\r\n    \r\n    // Convert File to Buffer\r\n    const buffer = Buffer.from(await file.arrayBuffer())\r\n    \r\n    // Extract text\r\n    const extractionResult = await extractTextFromBuffer(buffer, file.type, file.name)\r\n    \r\n    // Create chunks if requested\r\n    let chunks = null\r\n    if (options.createChunks !== false) {\r\n      const maxChunkSize = options.maxChunkSize || 1000\r\n      chunks = createTextChunks(\r\n        extractionResult.text,\r\n        `temp_${Date.now()}`,\r\n        file.name,\r\n        file.type,\r\n        maxChunkSize\r\n      )\r\n    }\r\n    \r\n    // Get extraction statistics\r\n    const stats = getExtractionStats(extractionResult)\r\n    \r\n    // Log usage\r\n    logApiUsage(user.id, '/api/extract', 'text_extraction', {\r\n      file_name: file.name,\r\n      file_size: file.size,\r\n      file_type: file.type,\r\n      text_length: extractionResult.text.length,\r\n      processing_time: extractionResult.metadata.processingTime,\r\n      extractor_used: extractionResult.metadata.extractorUsed,\r\n      chunk_count: chunks?.length || 0,\r\n    })\r\n    \r\n    return ApiResponse.success({\r\n      extraction: {\r\n        text: extractionResult.text,\r\n        metadata: extractionResult.metadata,\r\n        warnings: extractionResult.warnings,\r\n        stats,\r\n      },\r\n      ...(chunks && { chunks }),\r\n      file_info: {\r\n        name: file.name,\r\n        size: file.size,\r\n        type: file.type,\r\n      },\r\n    }, 'Text extracted successfully')\r\n    \r\n  } catch (error) {\r\n    console.error('Text extraction handler error:', error)\r\n    \r\n    // Re-throw known errors\r\n    if (error instanceof Error && error.name === 'AppError') {\r\n      throw error\r\n    }\r\n    \r\n    return ApiResponse.internalError('Failed to extract text from document')\r\n  }\r\n}\r\n\r\n// Export handler with middleware\r\nexport const POST = createProtectedApiHandler(extractTextHandler, {\r\n  rateLimit: {\r\n    ...rateLimitConfigs.general,\r\n    maxRequests: 30, // More restrictive for processing-intensive operations\r\n  },\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: false, // Don't log file content\r\n  },\r\n})"],
      names: ["POST", "extractTextHandler", "request", "context", "user", "ApiResponse", "unauthorized", "formData", "file", "get", "options", "JSON", "parse", "badRequest", "isSupportedMimeType", "type", "maxSize", "size", "Math", "round", "buffer", "Buffer", "from", "arrayBuffer", "extractionResult", "extractTextFromBuffer", "name", "chunks", "createChunks", "maxChunkSize", "createTextChunks", "text", "Date", "now", "stats", "getExtractionStats", "logApiUsage", "id", "file_name", "file_size", "file_type", "text_length", "length", "processing_time", "metadata", "processingTime", "extractor_used", "extractorUsed", "chunk_count", "success", "extraction", "warnings", "file_info", "error", "console", "Error", "internalError", "createProtectedApiHandler", "rateLimit", "rateLimitConfigs", "general", "maxRequests", "logging", "enabled", "includeBody"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "28265420710a0b7fa1a348389b705e8e78bb5a67"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_129ghamrr6 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_129ghamrr6();
cov_129ghamrr6().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_129ghamrr6().s[1]++;
Object.defineProperty(exports, "POST", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_129ghamrr6().f[0]++;
    cov_129ghamrr6().s[2]++;
    return POST;
  }
});
const _apimiddleware =
/* istanbul ignore next */
(cov_129ghamrr6().s[3]++, require("../../lib/api-middleware"));
const _apiutils =
/* istanbul ignore next */
(cov_129ghamrr6().s[4]++, require("../../lib/api-utils"));
const _ratelimit =
/* istanbul ignore next */
(cov_129ghamrr6().s[5]++, require("../../lib/rate-limit"));
const _logger =
/* istanbul ignore next */
(cov_129ghamrr6().s[6]++, require("../../lib/logger"));
const _documentextractor =
/* istanbul ignore next */
(cov_129ghamrr6().s[7]++, require("../../lib/document-extractor"));
// POST /api/extract - Extract text from uploaded file
async function extractTextHandler(request, context) {
  /* istanbul ignore next */
  cov_129ghamrr6().f[1]++;
  const {
    user
  } =
  /* istanbul ignore next */
  (cov_129ghamrr6().s[8]++, context);
  /* istanbul ignore next */
  cov_129ghamrr6().s[9]++;
  if (!user) {
    /* istanbul ignore next */
    cov_129ghamrr6().b[0][0]++;
    cov_129ghamrr6().s[10]++;
    return _apiutils.ApiResponse.unauthorized('User not authenticated');
  } else
  /* istanbul ignore next */
  {
    cov_129ghamrr6().b[0][1]++;
  }
  cov_129ghamrr6().s[11]++;
  try {
    // Note: supabase client available if needed for future enhancements
    // const supabase = createClient(
    //   process.env.SUPABASE_URL!,
    //   process.env.SUPABASE_ANON_KEY!
    // )
    // Parse multipart form data
    const formData =
    /* istanbul ignore next */
    (cov_129ghamrr6().s[12]++, await request.formData());
    const file =
    /* istanbul ignore next */
    (cov_129ghamrr6().s[13]++, formData.get('file'));
    const options =
    /* istanbul ignore next */
    (cov_129ghamrr6().s[14]++, formData.get('options') ?
    /* istanbul ignore next */
    (cov_129ghamrr6().b[1][0]++, JSON.parse(formData.get('options'))) :
    /* istanbul ignore next */
    (cov_129ghamrr6().b[1][1]++, {}));
    /* istanbul ignore next */
    cov_129ghamrr6().s[15]++;
    if (!file) {
      /* istanbul ignore next */
      cov_129ghamrr6().b[2][0]++;
      cov_129ghamrr6().s[16]++;
      return _apiutils.ApiResponse.badRequest('No file provided');
    } else
    /* istanbul ignore next */
    {
      cov_129ghamrr6().b[2][1]++;
    }
    // Validate file type
    cov_129ghamrr6().s[17]++;
    if (!(0, _documentextractor.isSupportedMimeType)(file.type)) {
      /* istanbul ignore next */
      cov_129ghamrr6().b[3][0]++;
      cov_129ghamrr6().s[18]++;
      return _apiutils.ApiResponse.badRequest(`File type ${file.type} is not supported for text extraction`);
    } else
    /* istanbul ignore next */
    {
      cov_129ghamrr6().b[3][1]++;
    }
    // Check file size (limit to 50MB for extraction)
    const maxSize =
    /* istanbul ignore next */
    (cov_129ghamrr6().s[19]++, 50 * 1024 * 1024) // 50MB
    ;
    /* istanbul ignore next */
    cov_129ghamrr6().s[20]++;
    if (file.size > maxSize) {
      /* istanbul ignore next */
      cov_129ghamrr6().b[4][0]++;
      cov_129ghamrr6().s[21]++;
      return _apiutils.ApiResponse.badRequest(`File size ${Math.round(file.size / 1024 / 1024)}MB exceeds maximum allowed size of 50MB for text extraction`);
    } else
    /* istanbul ignore next */
    {
      cov_129ghamrr6().b[4][1]++;
    }
    // Convert File to Buffer
    const buffer =
    /* istanbul ignore next */
    (cov_129ghamrr6().s[22]++, Buffer.from(await file.arrayBuffer()));
    // Extract text
    const extractionResult =
    /* istanbul ignore next */
    (cov_129ghamrr6().s[23]++, await (0, _documentextractor.extractTextFromBuffer)(buffer, file.type, file.name));
    // Create chunks if requested
    let chunks =
    /* istanbul ignore next */
    (cov_129ghamrr6().s[24]++, null);
    /* istanbul ignore next */
    cov_129ghamrr6().s[25]++;
    if (options.createChunks !== false) {
      /* istanbul ignore next */
      cov_129ghamrr6().b[5][0]++;
      const maxChunkSize =
      /* istanbul ignore next */
      (cov_129ghamrr6().s[26]++,
      /* istanbul ignore next */
      (cov_129ghamrr6().b[6][0]++, options.maxChunkSize) ||
      /* istanbul ignore next */
      (cov_129ghamrr6().b[6][1]++, 1000));
      /* istanbul ignore next */
      cov_129ghamrr6().s[27]++;
      chunks = (0, _documentextractor.createTextChunks)(extractionResult.text, `temp_${Date.now()}`, file.name, file.type, maxChunkSize);
    } else
    /* istanbul ignore next */
    {
      cov_129ghamrr6().b[5][1]++;
    }
    // Get extraction statistics
    const stats =
    /* istanbul ignore next */
    (cov_129ghamrr6().s[28]++, (0, _documentextractor.getExtractionStats)(extractionResult));
    // Log usage
    /* istanbul ignore next */
    cov_129ghamrr6().s[29]++;
    (0, _logger.logApiUsage)(user.id, '/api/extract', 'text_extraction', {
      file_name: file.name,
      file_size: file.size,
      file_type: file.type,
      text_length: extractionResult.text.length,
      processing_time: extractionResult.metadata.processingTime,
      extractor_used: extractionResult.metadata.extractorUsed,
      chunk_count:
      /* istanbul ignore next */
      (cov_129ghamrr6().b[7][0]++, chunks?.length) ||
      /* istanbul ignore next */
      (cov_129ghamrr6().b[7][1]++, 0)
    });
    /* istanbul ignore next */
    cov_129ghamrr6().s[30]++;
    return _apiutils.ApiResponse.success({
      extraction: {
        text: extractionResult.text,
        metadata: extractionResult.metadata,
        warnings: extractionResult.warnings,
        stats
      },
      ...(
      /* istanbul ignore next */
      (cov_129ghamrr6().b[8][0]++, chunks) &&
      /* istanbul ignore next */
      (cov_129ghamrr6().b[8][1]++, {
        chunks
      })),
      file_info: {
        name: file.name,
        size: file.size,
        type: file.type
      }
    }, 'Text extracted successfully');
  } catch (error) {
    /* istanbul ignore next */
    cov_129ghamrr6().s[31]++;
    console.error('Text extraction handler error:', error);
    // Re-throw known errors
    /* istanbul ignore next */
    cov_129ghamrr6().s[32]++;
    if (
    /* istanbul ignore next */
    (cov_129ghamrr6().b[10][0]++, error instanceof Error) &&
    /* istanbul ignore next */
    (cov_129ghamrr6().b[10][1]++, error.name === 'AppError')) {
      /* istanbul ignore next */
      cov_129ghamrr6().b[9][0]++;
      cov_129ghamrr6().s[33]++;
      throw error;
    } else
    /* istanbul ignore next */
    {
      cov_129ghamrr6().b[9][1]++;
    }
    cov_129ghamrr6().s[34]++;
    return _apiutils.ApiResponse.internalError('Failed to extract text from document');
  }
}
const POST =
/* istanbul ignore next */
(cov_129ghamrr6().s[35]++, (0, _apimiddleware.createProtectedApiHandler)(extractTextHandler, {
  rateLimit: {
    ..._ratelimit.rateLimitConfigs.general,
    maxRequests: 30
  },
  logging: {
    enabled: true,
    includeBody: false
  }
}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTI5Z2hhbXJyNiIsImFjdHVhbENvdmVyYWdlIiwicyIsIlBPU1QiLCJleHRyYWN0VGV4dEhhbmRsZXIiLCJyZXF1ZXN0IiwiY29udGV4dCIsImYiLCJ1c2VyIiwiYiIsIl9hcGl1dGlscyIsIkFwaVJlc3BvbnNlIiwidW5hdXRob3JpemVkIiwiZm9ybURhdGEiLCJmaWxlIiwiZ2V0Iiwib3B0aW9ucyIsIkpTT04iLCJwYXJzZSIsImJhZFJlcXVlc3QiLCJfZG9jdW1lbnRleHRyYWN0b3IiLCJpc1N1cHBvcnRlZE1pbWVUeXBlIiwidHlwZSIsIm1heFNpemUiLCJzaXplIiwiTWF0aCIsInJvdW5kIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImFycmF5QnVmZmVyIiwiZXh0cmFjdGlvblJlc3VsdCIsImV4dHJhY3RUZXh0RnJvbUJ1ZmZlciIsIm5hbWUiLCJjaHVua3MiLCJjcmVhdGVDaHVua3MiLCJtYXhDaHVua1NpemUiLCJjcmVhdGVUZXh0Q2h1bmtzIiwidGV4dCIsIkRhdGUiLCJub3ciLCJzdGF0cyIsImdldEV4dHJhY3Rpb25TdGF0cyIsIl9sb2dnZXIiLCJsb2dBcGlVc2FnZSIsImlkIiwiZmlsZV9uYW1lIiwiZmlsZV9zaXplIiwiZmlsZV90eXBlIiwidGV4dF9sZW5ndGgiLCJsZW5ndGgiLCJwcm9jZXNzaW5nX3RpbWUiLCJtZXRhZGF0YSIsInByb2Nlc3NpbmdUaW1lIiwiZXh0cmFjdG9yX3VzZWQiLCJleHRyYWN0b3JVc2VkIiwiY2h1bmtfY291bnQiLCJzdWNjZXNzIiwiZXh0cmFjdGlvbiIsIndhcm5pbmdzIiwiZmlsZV9pbmZvIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJpbnRlcm5hbEVycm9yIiwiX2FwaW1pZGRsZXdhcmUiLCJjcmVhdGVQcm90ZWN0ZWRBcGlIYW5kbGVyIiwicmF0ZUxpbWl0IiwiX3JhdGVsaW1pdCIsInJhdGVMaW1pdENvbmZpZ3MiLCJnZW5lcmFsIiwibWF4UmVxdWVzdHMiLCJsb2dnaW5nIiwiZW5hYmxlZCIsImluY2x1ZGVCb2R5Il0sInNvdXJjZXMiOlsiUjpcXEFwcHNcXEJyaWVmbHlfQ2xvdWRcXGJyaWVmbHktY2xvdWQtbmV4dGpzXFxzcmNcXGFwcFxcYXBpXFxleHRyYWN0XFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgY3JlYXRlUHJvdGVjdGVkQXBpSGFuZGxlciwgQXBpQ29udGV4dCB9IGZyb20gJ0AvYXBwL2xpYi9hcGktbWlkZGxld2FyZSdcclxuaW1wb3J0IHsgQXBpUmVzcG9uc2UgfSBmcm9tICdAL2FwcC9saWIvYXBpLXV0aWxzJ1xyXG5pbXBvcnQgeyByYXRlTGltaXRDb25maWdzIH0gZnJvbSAnQC9hcHAvbGliL3JhdGUtbGltaXQnXHJcbi8vIGltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcclxuaW1wb3J0IHsgbG9nQXBpVXNhZ2UgfSBmcm9tICdAL2FwcC9saWIvbG9nZ2VyJ1xyXG5pbXBvcnQgeyBcclxuICBleHRyYWN0VGV4dEZyb21CdWZmZXIsIFxyXG4gIGNyZWF0ZVRleHRDaHVua3MsIFxyXG4gIGlzU3VwcG9ydGVkTWltZVR5cGUsXHJcbiAgZ2V0RXh0cmFjdGlvblN0YXRzIFxyXG59IGZyb20gJ0AvYXBwL2xpYi9kb2N1bWVudC1leHRyYWN0b3InXHJcblxyXG4vLyBQT1NUIC9hcGkvZXh0cmFjdCAtIEV4dHJhY3QgdGV4dCBmcm9tIHVwbG9hZGVkIGZpbGVcclxuYXN5bmMgZnVuY3Rpb24gZXh0cmFjdFRleHRIYW5kbGVyKHJlcXVlc3Q6IFJlcXVlc3QsIGNvbnRleHQ6IEFwaUNvbnRleHQpOiBQcm9taXNlPE5leHRSZXNwb25zZT4ge1xyXG4gIGNvbnN0IHsgdXNlciB9ID0gY29udGV4dFxyXG4gIFxyXG4gIGlmICghdXNlcikge1xyXG4gICAgcmV0dXJuIEFwaVJlc3BvbnNlLnVuYXV0aG9yaXplZCgnVXNlciBub3QgYXV0aGVudGljYXRlZCcpXHJcbiAgfVxyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBOb3RlOiBzdXBhYmFzZSBjbGllbnQgYXZhaWxhYmxlIGlmIG5lZWRlZCBmb3IgZnV0dXJlIGVuaGFuY2VtZW50c1xyXG4gICAgLy8gY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXHJcbiAgICAvLyAgIHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTCEsXHJcbiAgICAvLyAgIHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZIVxyXG4gICAgLy8gKVxyXG4gICAgXHJcbiAgICAvLyBQYXJzZSBtdWx0aXBhcnQgZm9ybSBkYXRhXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKVxyXG4gICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpIGFzIEZpbGVcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBmb3JtRGF0YS5nZXQoJ29wdGlvbnMnKSA/IEpTT04ucGFyc2UoZm9ybURhdGEuZ2V0KCdvcHRpb25zJykgYXMgc3RyaW5nKSA6IHt9XHJcbiAgICBcclxuICAgIGlmICghZmlsZSkge1xyXG4gICAgICByZXR1cm4gQXBpUmVzcG9uc2UuYmFkUmVxdWVzdCgnTm8gZmlsZSBwcm92aWRlZCcpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYXRlIGZpbGUgdHlwZVxyXG4gICAgaWYgKCFpc1N1cHBvcnRlZE1pbWVUeXBlKGZpbGUudHlwZSkpIHtcclxuICAgICAgcmV0dXJuIEFwaVJlc3BvbnNlLmJhZFJlcXVlc3QoXHJcbiAgICAgICAgYEZpbGUgdHlwZSAke2ZpbGUudHlwZX0gaXMgbm90IHN1cHBvcnRlZCBmb3IgdGV4dCBleHRyYWN0aW9uYFxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGZpbGUgc2l6ZSAobGltaXQgdG8gNTBNQiBmb3IgZXh0cmFjdGlvbilcclxuICAgIGNvbnN0IG1heFNpemUgPSA1MCAqIDEwMjQgKiAxMDI0IC8vIDUwTUJcclxuICAgIGlmIChmaWxlLnNpemUgPiBtYXhTaXplKSB7XHJcbiAgICAgIHJldHVybiBBcGlSZXNwb25zZS5iYWRSZXF1ZXN0KFxyXG4gICAgICAgIGBGaWxlIHNpemUgJHtNYXRoLnJvdW5kKGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0KX1NQiBleGNlZWRzIG1heGltdW0gYWxsb3dlZCBzaXplIG9mIDUwTUIgZm9yIHRleHQgZXh0cmFjdGlvbmBcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDb252ZXJ0IEZpbGUgdG8gQnVmZmVyXHJcbiAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpXHJcbiAgICBcclxuICAgIC8vIEV4dHJhY3QgdGV4dFxyXG4gICAgY29uc3QgZXh0cmFjdGlvblJlc3VsdCA9IGF3YWl0IGV4dHJhY3RUZXh0RnJvbUJ1ZmZlcihidWZmZXIsIGZpbGUudHlwZSwgZmlsZS5uYW1lKVxyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgY2h1bmtzIGlmIHJlcXVlc3RlZFxyXG4gICAgbGV0IGNodW5rcyA9IG51bGxcclxuICAgIGlmIChvcHRpb25zLmNyZWF0ZUNodW5rcyAhPT0gZmFsc2UpIHtcclxuICAgICAgY29uc3QgbWF4Q2h1bmtTaXplID0gb3B0aW9ucy5tYXhDaHVua1NpemUgfHwgMTAwMFxyXG4gICAgICBjaHVua3MgPSBjcmVhdGVUZXh0Q2h1bmtzKFxyXG4gICAgICAgIGV4dHJhY3Rpb25SZXN1bHQudGV4dCxcclxuICAgICAgICBgdGVtcF8ke0RhdGUubm93KCl9YCxcclxuICAgICAgICBmaWxlLm5hbWUsXHJcbiAgICAgICAgZmlsZS50eXBlLFxyXG4gICAgICAgIG1heENodW5rU2l6ZVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEdldCBleHRyYWN0aW9uIHN0YXRpc3RpY3NcclxuICAgIGNvbnN0IHN0YXRzID0gZ2V0RXh0cmFjdGlvblN0YXRzKGV4dHJhY3Rpb25SZXN1bHQpXHJcbiAgICBcclxuICAgIC8vIExvZyB1c2FnZVxyXG4gICAgbG9nQXBpVXNhZ2UodXNlci5pZCwgJy9hcGkvZXh0cmFjdCcsICd0ZXh0X2V4dHJhY3Rpb24nLCB7XHJcbiAgICAgIGZpbGVfbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICBmaWxlX3NpemU6IGZpbGUuc2l6ZSxcclxuICAgICAgZmlsZV90eXBlOiBmaWxlLnR5cGUsXHJcbiAgICAgIHRleHRfbGVuZ3RoOiBleHRyYWN0aW9uUmVzdWx0LnRleHQubGVuZ3RoLFxyXG4gICAgICBwcm9jZXNzaW5nX3RpbWU6IGV4dHJhY3Rpb25SZXN1bHQubWV0YWRhdGEucHJvY2Vzc2luZ1RpbWUsXHJcbiAgICAgIGV4dHJhY3Rvcl91c2VkOiBleHRyYWN0aW9uUmVzdWx0Lm1ldGFkYXRhLmV4dHJhY3RvclVzZWQsXHJcbiAgICAgIGNodW5rX2NvdW50OiBjaHVua3M/Lmxlbmd0aCB8fCAwLFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgcmV0dXJuIEFwaVJlc3BvbnNlLnN1Y2Nlc3Moe1xyXG4gICAgICBleHRyYWN0aW9uOiB7XHJcbiAgICAgICAgdGV4dDogZXh0cmFjdGlvblJlc3VsdC50ZXh0LFxyXG4gICAgICAgIG1ldGFkYXRhOiBleHRyYWN0aW9uUmVzdWx0Lm1ldGFkYXRhLFxyXG4gICAgICAgIHdhcm5pbmdzOiBleHRyYWN0aW9uUmVzdWx0Lndhcm5pbmdzLFxyXG4gICAgICAgIHN0YXRzLFxyXG4gICAgICB9LFxyXG4gICAgICAuLi4oY2h1bmtzICYmIHsgY2h1bmtzIH0pLFxyXG4gICAgICBmaWxlX2luZm86IHtcclxuICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxyXG4gICAgICAgIHR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgfSxcclxuICAgIH0sICdUZXh0IGV4dHJhY3RlZCBzdWNjZXNzZnVsbHknKVxyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1RleHQgZXh0cmFjdGlvbiBoYW5kbGVyIGVycm9yOicsIGVycm9yKVxyXG4gICAgXHJcbiAgICAvLyBSZS10aHJvdyBrbm93biBlcnJvcnNcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBcHBFcnJvcicpIHtcclxuICAgICAgdGhyb3cgZXJyb3JcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIEFwaVJlc3BvbnNlLmludGVybmFsRXJyb3IoJ0ZhaWxlZCB0byBleHRyYWN0IHRleHQgZnJvbSBkb2N1bWVudCcpXHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgaGFuZGxlciB3aXRoIG1pZGRsZXdhcmVcclxuZXhwb3J0IGNvbnN0IFBPU1QgPSBjcmVhdGVQcm90ZWN0ZWRBcGlIYW5kbGVyKGV4dHJhY3RUZXh0SGFuZGxlciwge1xyXG4gIHJhdGVMaW1pdDoge1xyXG4gICAgLi4ucmF0ZUxpbWl0Q29uZmlncy5nZW5lcmFsLFxyXG4gICAgbWF4UmVxdWVzdHM6IDMwLCAvLyBNb3JlIHJlc3RyaWN0aXZlIGZvciBwcm9jZXNzaW5nLWludGVuc2l2ZSBvcGVyYXRpb25zXHJcbiAgfSxcclxuICBsb2dnaW5nOiB7XHJcbiAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgaW5jbHVkZUJvZHk6IGZhbHNlLCAvLyBEb24ndCBsb2cgZmlsZSBjb250ZW50XHJcbiAgfSxcclxufSkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWFBO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFBQUEsY0FBQSxHQUFBRSxDQUFBOzs7Ozs7K0JBb0dhOzs7Ozs7V0FBQUMsSUFBQTs7Ozs7a0NBaEh5Qzs7O2tDQUMxQjs7O2tDQUNLOzs7a0NBRUw7OztrQ0FNckI7QUFFUDtBQUNBLGVBQWVDLG1CQUFtQkMsT0FBZ0IsRUFBRUMsT0FBbUI7RUFBQTtFQUFBTixjQUFBLEdBQUFPLENBQUE7RUFDckUsTUFBTTtJQUFFQztFQUFJLENBQUU7RUFBQTtFQUFBLENBQUFSLGNBQUEsR0FBQUUsQ0FBQSxPQUFHSSxPQUFBO0VBQUE7RUFBQU4sY0FBQSxHQUFBRSxDQUFBO0VBRWpCLElBQUksQ0FBQ00sSUFBQSxFQUFNO0lBQUE7SUFBQVIsY0FBQSxHQUFBUyxDQUFBO0lBQUFULGNBQUEsR0FBQUUsQ0FBQTtJQUNULE9BQU9RLFNBQUEsQ0FBQUMsV0FBVyxDQUFDQyxZQUFZLENBQUM7RUFDbEM7RUFBQTtFQUFBO0lBQUFaLGNBQUEsR0FBQVMsQ0FBQTtFQUFBO0VBQUFULGNBQUEsR0FBQUUsQ0FBQTtFQUVBLElBQUk7SUFDRjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBRUE7SUFDQSxNQUFNVyxRQUFBO0lBQUE7SUFBQSxDQUFBYixjQUFBLEdBQUFFLENBQUEsUUFBVyxNQUFNRyxPQUFBLENBQVFRLFFBQVE7SUFDdkMsTUFBTUMsSUFBQTtJQUFBO0lBQUEsQ0FBQWQsY0FBQSxHQUFBRSxDQUFBLFFBQU9XLFFBQUEsQ0FBU0UsR0FBRyxDQUFDO0lBQzFCLE1BQU1DLE9BQUE7SUFBQTtJQUFBLENBQUFoQixjQUFBLEdBQUFFLENBQUEsUUFBVVcsUUFBQSxDQUFTRSxHQUFHLENBQUM7SUFBQTtJQUFBLENBQUFmLGNBQUEsR0FBQVMsQ0FBQSxVQUFhUSxJQUFBLENBQUtDLEtBQUssQ0FBQ0wsUUFBQSxDQUFTRSxHQUFHLENBQUM7SUFBQTtJQUFBLENBQUFmLGNBQUEsR0FBQVMsQ0FBQSxVQUF3QixDQUFDO0lBQUE7SUFBQVQsY0FBQSxHQUFBRSxDQUFBO0lBRTNGLElBQUksQ0FBQ1ksSUFBQSxFQUFNO01BQUE7TUFBQWQsY0FBQSxHQUFBUyxDQUFBO01BQUFULGNBQUEsR0FBQUUsQ0FBQTtNQUNULE9BQU9RLFNBQUEsQ0FBQUMsV0FBVyxDQUFDUSxVQUFVLENBQUM7SUFDaEM7SUFBQTtJQUFBO01BQUFuQixjQUFBLEdBQUFTLENBQUE7SUFBQTtJQUVBO0lBQUFULGNBQUEsR0FBQUUsQ0FBQTtJQUNBLElBQUksQ0FBQyxJQUFBa0Isa0JBQUEsQ0FBQUMsbUJBQW1CLEVBQUNQLElBQUEsQ0FBS1EsSUFBSSxHQUFHO01BQUE7TUFBQXRCLGNBQUEsR0FBQVMsQ0FBQTtNQUFBVCxjQUFBLEdBQUFFLENBQUE7TUFDbkMsT0FBT1EsU0FBQSxDQUFBQyxXQUFXLENBQUNRLFVBQVUsQ0FDM0IsYUFBYUwsSUFBQSxDQUFLUSxJQUFJLHVDQUF1QztJQUVqRTtJQUFBO0lBQUE7TUFBQXRCLGNBQUEsR0FBQVMsQ0FBQTtJQUFBO0lBRUE7SUFDQSxNQUFNYyxPQUFBO0lBQUE7SUFBQSxDQUFBdkIsY0FBQSxHQUFBRSxDQUFBLFFBQVUsS0FBSyxPQUFPLE1BQUs7SUFBQTs7O0lBQ2pDLElBQUlZLElBQUEsQ0FBS1UsSUFBSSxHQUFHRCxPQUFBLEVBQVM7TUFBQTtNQUFBdkIsY0FBQSxHQUFBUyxDQUFBO01BQUFULGNBQUEsR0FBQUUsQ0FBQTtNQUN2QixPQUFPUSxTQUFBLENBQUFDLFdBQVcsQ0FBQ1EsVUFBVSxDQUMzQixhQUFhTSxJQUFBLENBQUtDLEtBQUssQ0FBQ1osSUFBQSxDQUFLVSxJQUFJLEdBQUcsT0FBTyxrRUFBa0U7SUFFakg7SUFBQTtJQUFBO01BQUF4QixjQUFBLEdBQUFTLENBQUE7SUFBQTtJQUVBO0lBQ0EsTUFBTWtCLE1BQUE7SUFBQTtJQUFBLENBQUEzQixjQUFBLEdBQUFFLENBQUEsUUFBUzBCLE1BQUEsQ0FBT0MsSUFBSSxDQUFDLE1BQU1mLElBQUEsQ0FBS2dCLFdBQVc7SUFFakQ7SUFDQSxNQUFNQyxnQkFBQTtJQUFBO0lBQUEsQ0FBQS9CLGNBQUEsR0FBQUUsQ0FBQSxRQUFtQixNQUFNLElBQUFrQixrQkFBQSxDQUFBWSxxQkFBcUIsRUFBQ0wsTUFBQSxFQUFRYixJQUFBLENBQUtRLElBQUksRUFBRVIsSUFBQSxDQUFLbUIsSUFBSTtJQUVqRjtJQUNBLElBQUlDLE1BQUE7SUFBQTtJQUFBLENBQUFsQyxjQUFBLEdBQUFFLENBQUEsUUFBUztJQUFBO0lBQUFGLGNBQUEsR0FBQUUsQ0FBQTtJQUNiLElBQUljLE9BQUEsQ0FBUW1CLFlBQVksS0FBSyxPQUFPO01BQUE7TUFBQW5DLGNBQUEsR0FBQVMsQ0FBQTtNQUNsQyxNQUFNMkIsWUFBQTtNQUFBO01BQUEsQ0FBQXBDLGNBQUEsR0FBQUUsQ0FBQTtNQUFlO01BQUEsQ0FBQUYsY0FBQSxHQUFBUyxDQUFBLFVBQUFPLE9BQUEsQ0FBUW9CLFlBQVk7TUFBQTtNQUFBLENBQUFwQyxjQUFBLEdBQUFTLENBQUEsVUFBSTtNQUFBO01BQUFULGNBQUEsR0FBQUUsQ0FBQTtNQUM3Q2dDLE1BQUEsR0FBUyxJQUFBZCxrQkFBQSxDQUFBaUIsZ0JBQWdCLEVBQ3ZCTixnQkFBQSxDQUFpQk8sSUFBSSxFQUNyQixRQUFRQyxJQUFBLENBQUtDLEdBQUcsSUFBSSxFQUNwQjFCLElBQUEsQ0FBS21CLElBQUksRUFDVG5CLElBQUEsQ0FBS1EsSUFBSSxFQUNUYyxZQUFBO0lBRUo7SUFBQTtJQUFBO01BQUFwQyxjQUFBLEdBQUFTLENBQUE7SUFBQTtJQUVBO0lBQ0EsTUFBTWdDLEtBQUE7SUFBQTtJQUFBLENBQUF6QyxjQUFBLEdBQUFFLENBQUEsUUFBUSxJQUFBa0Isa0JBQUEsQ0FBQXNCLGtCQUFrQixFQUFDWCxnQkFBQTtJQUVqQztJQUFBO0lBQUEvQixjQUFBLEdBQUFFLENBQUE7SUFDQSxJQUFBeUMsT0FBQSxDQUFBQyxXQUFXLEVBQUNwQyxJQUFBLENBQUtxQyxFQUFFLEVBQUUsZ0JBQWdCLG1CQUFtQjtNQUN0REMsU0FBQSxFQUFXaEMsSUFBQSxDQUFLbUIsSUFBSTtNQUNwQmMsU0FBQSxFQUFXakMsSUFBQSxDQUFLVSxJQUFJO01BQ3BCd0IsU0FBQSxFQUFXbEMsSUFBQSxDQUFLUSxJQUFJO01BQ3BCMkIsV0FBQSxFQUFhbEIsZ0JBQUEsQ0FBaUJPLElBQUksQ0FBQ1ksTUFBTTtNQUN6Q0MsZUFBQSxFQUFpQnBCLGdCQUFBLENBQWlCcUIsUUFBUSxDQUFDQyxjQUFjO01BQ3pEQyxjQUFBLEVBQWdCdkIsZ0JBQUEsQ0FBaUJxQixRQUFRLENBQUNHLGFBQWE7TUFDdkRDLFdBQUE7TUFBYTtNQUFBLENBQUF4RCxjQUFBLEdBQUFTLENBQUEsVUFBQXlCLE1BQUEsRUFBUWdCLE1BQUE7TUFBQTtNQUFBLENBQUFsRCxjQUFBLEdBQUFTLENBQUEsVUFBVTtJQUNqQztJQUFBO0lBQUFULGNBQUEsR0FBQUUsQ0FBQTtJQUVBLE9BQU9RLFNBQUEsQ0FBQUMsV0FBVyxDQUFDOEMsT0FBTyxDQUFDO01BQ3pCQyxVQUFBLEVBQVk7UUFDVnBCLElBQUEsRUFBTVAsZ0JBQUEsQ0FBaUJPLElBQUk7UUFDM0JjLFFBQUEsRUFBVXJCLGdCQUFBLENBQWlCcUIsUUFBUTtRQUNuQ08sUUFBQSxFQUFVNUIsZ0JBQUEsQ0FBaUI0QixRQUFRO1FBQ25DbEI7TUFDRjtNQUNBO01BQUk7TUFBQSxDQUFBekMsY0FBQSxHQUFBUyxDQUFBLFVBQUF5QixNQUFBO01BQUE7TUFBQSxDQUFBbEMsY0FBQSxHQUFBUyxDQUFBLFVBQVU7UUFBRXlCO01BQU8sQ0FBQztNQUN4QjBCLFNBQUEsRUFBVztRQUNUM0IsSUFBQSxFQUFNbkIsSUFBQSxDQUFLbUIsSUFBSTtRQUNmVCxJQUFBLEVBQU1WLElBQUEsQ0FBS1UsSUFBSTtRQUNmRixJQUFBLEVBQU1SLElBQUEsQ0FBS1E7TUFDYjtJQUNGLEdBQUc7RUFFTCxFQUFFLE9BQU91QyxLQUFBLEVBQU87SUFBQTtJQUFBN0QsY0FBQSxHQUFBRSxDQUFBO0lBQ2Q0RCxPQUFBLENBQVFELEtBQUssQ0FBQyxrQ0FBa0NBLEtBQUE7SUFFaEQ7SUFBQTtJQUFBN0QsY0FBQSxHQUFBRSxDQUFBO0lBQ0E7SUFBSTtJQUFBLENBQUFGLGNBQUEsR0FBQVMsQ0FBQSxXQUFBb0QsS0FBQSxZQUFpQkUsS0FBQTtJQUFBO0lBQUEsQ0FBQS9ELGNBQUEsR0FBQVMsQ0FBQSxXQUFTb0QsS0FBQSxDQUFNNUIsSUFBSSxLQUFLLGFBQVk7TUFBQTtNQUFBakMsY0FBQSxHQUFBUyxDQUFBO01BQUFULGNBQUEsR0FBQUUsQ0FBQTtNQUN2RCxNQUFNMkQsS0FBQTtJQUNSO0lBQUE7SUFBQTtNQUFBN0QsY0FBQSxHQUFBUyxDQUFBO0lBQUE7SUFBQVQsY0FBQSxHQUFBRSxDQUFBO0lBRUEsT0FBT1EsU0FBQSxDQUFBQyxXQUFXLENBQUNxRCxhQUFhLENBQUM7RUFDbkM7QUFDRjtBQUdPLE1BQU03RCxJQUFBO0FBQUE7QUFBQSxDQUFBSCxjQUFBLEdBQUFFLENBQUEsUUFBTyxJQUFBK0QsY0FBQSxDQUFBQyx5QkFBeUIsRUFBQzlELGtCQUFBLEVBQW9CO0VBQ2hFK0QsU0FBQSxFQUFXO0lBQ1QsR0FBR0MsVUFBQSxDQUFBQyxnQkFBZ0IsQ0FBQ0MsT0FBTztJQUMzQkMsV0FBQSxFQUFhO0VBQ2Y7RUFDQUMsT0FBQSxFQUFTO0lBQ1BDLE9BQUEsRUFBUztJQUNUQyxXQUFBLEVBQWE7RUFDZjtBQUNGIiwiaWdub3JlTGlzdCI6W119