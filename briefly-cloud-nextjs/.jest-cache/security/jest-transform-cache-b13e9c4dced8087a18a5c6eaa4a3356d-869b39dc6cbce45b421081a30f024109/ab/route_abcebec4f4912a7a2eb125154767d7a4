d8f281caad95ac9885abd6a8e7bc54d8
"use strict";

/* istanbul ignore next */
function cov_2mcobfwqyt() {
  var path = "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\chunks\\batch\\route.ts";
  var hash = "36fc4d7b8fcfdf4348c01392f3d54856c93de943";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\chunks\\batch\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 20
        }
      },
      "3": {
        start: {
          line: 11,
          column: 23
        },
        end: {
          line: 11,
          column: 61
        }
      },
      "4": {
        start: {
          line: 12,
          column: 18
        },
        end: {
          line: 12,
          column: 51
        }
      },
      "5": {
        start: {
          line: 13,
          column: 19
        },
        end: {
          line: 13,
          column: 53
        }
      },
      "6": {
        start: {
          line: 14,
          column: 18
        },
        end: {
          line: 14,
          column: 50
        }
      },
      "7": {
        start: {
          line: 15,
          column: 16
        },
        end: {
          line: 15,
          column: 46
        }
      },
      "8": {
        start: {
          line: 16,
          column: 25
        },
        end: {
          line: 16,
          column: 65
        }
      },
      "9": {
        start: {
          line: 17,
          column: 27
        },
        end: {
          line: 17,
          column: 69
        }
      },
      "10": {
        start: {
          line: 18,
          column: 13
        },
        end: {
          line: 18,
          column: 27
        }
      },
      "11": {
        start: {
          line: 20,
          column: 28
        },
        end: {
          line: 36,
          column: 2
        }
      },
      "12": {
        start: {
          line: 39,
          column: 21
        },
        end: {
          line: 39,
          column: 28
        }
      },
      "13": {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 42,
          column: 5
        }
      },
      "14": {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 41,
          column: 76
        }
      },
      "15": {
        start: {
          line: 43,
          column: 4
        },
        end: {
          line: 205,
          column: 5
        }
      },
      "16": {
        start: {
          line: 44,
          column: 21
        },
        end: {
          line: 44,
          column: 41
        }
      },
      "17": {
        start: {
          line: 45,
          column: 27
        },
        end: {
          line: 45,
          column: 62
        }
      },
      "18": {
        start: {
          line: 46,
          column: 8
        },
        end: {
          line: 48,
          column: 9
        }
      },
      "19": {
        start: {
          line: 47,
          column: 12
        },
        end: {
          line: 47,
          column: 76
        }
      },
      "20": {
        start: {
          line: 49,
          column: 146
        },
        end: {
          line: 49,
          column: 161
        }
      },
      "21": {
        start: {
          line: 50,
          column: 25
        },
        end: {
          line: 50,
          column: 48
        }
      },
      "22": {
        start: {
          line: 52,
          column: 51
        },
        end: {
          line: 52,
          column: 141
        }
      },
      "23": {
        start: {
          line: 53,
          column: 8
        },
        end: {
          line: 56,
          column: 9
        }
      },
      "24": {
        start: {
          line: 54,
          column: 12
        },
        end: {
          line: 54,
          column: 60
        }
      },
      "25": {
        start: {
          line: 55,
          column: 12
        },
        end: {
          line: 55,
          column: 80
        }
      },
      "26": {
        start: {
          line: 57,
          column: 8
        },
        end: {
          line: 59,
          column: 9
        }
      },
      "27": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 58,
          column: 68
        }
      },
      "28": {
        start: {
          line: 60,
          column: 24
        },
        end: {
          line: 73,
          column: 9
        }
      },
      "29": {
        start: {
          line: 75,
          column: 24
        },
        end: {
          line: 82,
          column: 10
        }
      },
      "30": {
        start: {
          line: 84,
          column: 8
        },
        end: {
          line: 184,
          column: 9
        }
      },
      "31": {
        start: {
          line: 85,
          column: 30
        },
        end: {
          line: 85,
          column: 40
        }
      },
      "32": {
        start: {
          line: 86,
          column: 12
        },
        end: {
          line: 183,
          column: 13
        }
      },
      "33": {
        start: {
          line: 88,
          column: 16
        },
        end: {
          line: 103,
          column: 17
        }
      },
      "34": {
        start: {
          line: 89,
          column: 43
        },
        end: {
          line: 89,
          column: 106
        }
      },
      "35": {
        start: {
          line: 90,
          column: 20
        },
        end: {
          line: 102,
          column: 21
        }
      },
      "36": {
        start: {
          line: 91,
          column: 38
        },
        end: {
          line: 91,
          column: 92
        }
      },
      "37": {
        start: {
          line: 92,
          column: 24
        },
        end: {
          line: 99,
          column: 27
        }
      },
      "38": {
        start: {
          line: 100,
          column: 24
        },
        end: {
          line: 100,
          column: 86
        }
      },
      "39": {
        start: {
          line: 101,
          column: 24
        },
        end: {
          line: 101,
          column: 33
        }
      },
      "40": {
        start: {
          line: 106,
          column: 16
        },
        end: {
          line: 126,
          column: 17
        }
      },
      "41": {
        start: {
          line: 107,
          column: 69
        },
        end: {
          line: 107,
          column: 129
        }
      },
      "42": {
        start: {
          line: 108,
          column: 20
        },
        end: {
          line: 115,
          column: 21
        }
      },
      "43": {
        start: {
          line: 109,
          column: 24
        },
        end: {
          line: 113,
          column: 27
        }
      },
      "44": {
        start: {
          line: 114,
          column: 24
        },
        end: {
          line: 114,
          column: 33
        }
      },
      "45": {
        start: {
          line: 116,
          column: 35
        },
        end: {
          line: 116,
          column: 76
        }
      },
      "46": {
        start: {
          line: 117,
          column: 45
        },
        end: {
          line: 117,
          column: 131
        }
      },
      "47": {
        start: {
          line: 118,
          column: 20
        },
        end: {
          line: 118,
          column: 49
        }
      },
      "48": {
        start: {
          line: 120,
          column: 20
        },
        end: {
          line: 124,
          column: 23
        }
      },
      "49": {
        start: {
          line: 125,
          column: 20
        },
        end: {
          line: 125,
          column: 29
        }
      },
      "50": {
        start: {
          line: 127,
          column: 16
        },
        end: {
          line: 134,
          column: 17
        }
      },
      "51": {
        start: {
          line: 128,
          column: 20
        },
        end: {
          line: 132,
          column: 23
        }
      },
      "52": {
        start: {
          line: 133,
          column: 20
        },
        end: {
          line: 133,
          column: 29
        }
      },
      "53": {
        start: {
          line: 136,
          column: 31
        },
        end: {
          line: 136,
          column: 102
        }
      },
      "54": {
        start: {
          line: 138,
          column: 16
        },
        end: {
          line: 162,
          column: 17
        }
      },
      "55": {
        start: {
          line: 139,
          column: 20
        },
        end: {
          line: 161,
          column: 21
        }
      },
      "56": {
        start: {
          line: 140,
          column: 24
        },
        end: {
          line: 140,
          column: 98
        }
      },
      "57": {
        start: {
          line: 142,
          column: 24
        },
        end: {
          line: 157,
          column: 68
        }
      },
      "58": {
        start: {
          line: 159,
          column: 24
        },
        end: {
          line: 159,
          column: 91
        }
      },
      "59": {
        start: {
          line: 163,
          column: 39
        },
        end: {
          line: 163,
          column: 61
        }
      },
      "60": {
        start: {
          line: 164,
          column: 30
        },
        end: {
          line: 164,
          column: 76
        }
      },
      "61": {
        start: {
          line: 165,
          column: 16
        },
        end: {
          line: 173,
          column: 19
        }
      },
      "62": {
        start: {
          line: 174,
          column: 16
        },
        end: {
          line: 174,
          column: 70
        }
      },
      "63": {
        start: {
          line: 175,
          column: 16
        },
        end: {
          line: 175,
          column: 72
        }
      },
      "64": {
        start: {
          line: 177,
          column: 16
        },
        end: {
          line: 177,
          column: 74
        }
      },
      "65": {
        start: {
          line: 178,
          column: 16
        },
        end: {
          line: 182,
          column: 19
        }
      },
      "66": {
        start: {
          line: 186,
          column: 8
        },
        end: {
          line: 186,
          column: 67
        }
      },
      "67": {
        start: {
          line: 187,
          column: 8
        },
        end: {
          line: 187,
          column: 63
        }
      },
      "68": {
        start: {
          line: 188,
          column: 8
        },
        end: {
          line: 188,
          column: 61
        }
      },
      "69": {
        start: {
          line: 190,
          column: 8
        },
        end: {
          line: 200,
          column: 11
        }
      },
      "70": {
        start: {
          line: 201,
          column: 8
        },
        end: {
          line: 201,
          column: 210
        }
      },
      "71": {
        start: {
          line: 203,
          column: 8
        },
        end: {
          line: 203,
          column: 62
        }
      },
      "72": {
        start: {
          line: 204,
          column: 8
        },
        end: {
          line: 204,
          column: 87
        }
      },
      "73": {
        start: {
          line: 207,
          column: 13
        },
        end: {
          line: 216,
          column: 2
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "batchChunkingHandler",
        decl: {
          start: {
            line: 38,
            column: 15
          },
          end: {
            line: 38,
            column: 35
          }
        },
        loc: {
          start: {
            line: 38,
            column: 54
          },
          end: {
            line: 206,
            column: 1
          }
        },
        line: 38
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 40,
            column: 4
          },
          end: {
            line: 42,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 40,
            column: 4
          },
          end: {
            line: 42,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 40
      },
      "1": {
        loc: {
          start: {
            line: 46,
            column: 8
          },
          end: {
            line: 48,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 46,
            column: 8
          },
          end: {
            line: 48,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 46
      },
      "2": {
        loc: {
          start: {
            line: 53,
            column: 8
          },
          end: {
            line: 56,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 53,
            column: 8
          },
          end: {
            line: 56,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 53
      },
      "3": {
        loc: {
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 59,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 59,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "4": {
        loc: {
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 57,
            column: 40
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 57,
            column: 18
          }
        }, {
          start: {
            line: 57,
            column: 22
          },
          end: {
            line: 57,
            column: 40
          }
        }],
        line: 57
      },
      "5": {
        loc: {
          start: {
            line: 88,
            column: 16
          },
          end: {
            line: 103,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 88,
            column: 16
          },
          end: {
            line: 103,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 88
      },
      "6": {
        loc: {
          start: {
            line: 88,
            column: 20
          },
          end: {
            line: 88,
            column: 53
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 88,
            column: 20
          },
          end: {
            line: 88,
            column: 34
          }
        }, {
          start: {
            line: 88,
            column: 38
          },
          end: {
            line: 88,
            column: 53
          }
        }],
        line: 88
      },
      "7": {
        loc: {
          start: {
            line: 90,
            column: 20
          },
          end: {
            line: 102,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 90,
            column: 20
          },
          end: {
            line: 102,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 90
      },
      "8": {
        loc: {
          start: {
            line: 106,
            column: 16
          },
          end: {
            line: 126,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 106,
            column: 16
          },
          end: {
            line: 126,
            column: 17
          }
        }, {
          start: {
            line: 119,
            column: 23
          },
          end: {
            line: 126,
            column: 17
          }
        }],
        line: 106
      },
      "9": {
        loc: {
          start: {
            line: 106,
            column: 20
          },
          end: {
            line: 106,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 106,
            column: 20
          },
          end: {
            line: 106,
            column: 44
          }
        }, {
          start: {
            line: 106,
            column: 48
          },
          end: {
            line: 106,
            column: 57
          }
        }],
        line: 106
      },
      "10": {
        loc: {
          start: {
            line: 108,
            column: 20
          },
          end: {
            line: 115,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 108,
            column: 20
          },
          end: {
            line: 115,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 108
      },
      "11": {
        loc: {
          start: {
            line: 108,
            column: 24
          },
          end: {
            line: 108,
            column: 50
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 108,
            column: 24
          },
          end: {
            line: 108,
            column: 37
          }
        }, {
          start: {
            line: 108,
            column: 41
          },
          end: {
            line: 108,
            column: 50
          }
        }],
        line: 108
      },
      "12": {
        loc: {
          start: {
            line: 127,
            column: 16
          },
          end: {
            line: 134,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 127,
            column: 16
          },
          end: {
            line: 134,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 127
      },
      "13": {
        loc: {
          start: {
            line: 138,
            column: 16
          },
          end: {
            line: 162,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 138,
            column: 16
          },
          end: {
            line: 162,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 138
      },
      "14": {
        loc: {
          start: {
            line: 181,
            column: 27
          },
          end: {
            line: 181,
            column: 83
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 181,
            column: 52
          },
          end: {
            line: 181,
            column: 65
          }
        }, {
          start: {
            line: 181,
            column: 68
          },
          end: {
            line: 181,
            column: 83
          }
        }],
        line: 181
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\chunks\\batch\\route.ts"],
      sourcesContent: ["import { NextResponse } from 'next/server'\r\nimport { createProtectedApiHandler, ApiContext } from '@/app/lib/api-middleware'\r\nimport { ApiResponse } from '@/app/lib/api-utils'\r\nimport { rateLimitConfigs } from '@/app/lib/rate-limit'\r\nimport { supabaseAdmin } from '@/app/lib/supabase'\r\nimport { logApiUsage } from '@/app/lib/logger'\r\nimport { \r\n  DocumentChunker, \r\n  storeDocumentChunks, \r\n  getDocumentChunks,\r\n  getChunkingStats\r\n} from '@/app/lib/document-chunker'\r\nimport { extractTextFromBuffer } from '@/app/lib/document-extractor'\r\nimport { z } from 'zod'\r\n\r\n// Validation schema\r\nconst batchChunkingSchema = z.object({\r\n  file_ids: z.array(z.string()).min(1).max(10), // Limit to 10 files at once\r\n  strategy: z.enum(['paragraph', 'sentence', 'fixed', 'semantic', 'sliding']).optional().default('paragraph'),\r\n  maxChunkSize: z.number().min(100).max(5000).optional().default(1000),\r\n  minChunkSize: z.number().min(50).max(2000).optional(),\r\n  overlap: z.number().min(0).max(1000).optional(),\r\n  preserveStructure: z.boolean().optional(),\r\n  respectBoundaries: z.boolean().optional(),\r\n  saveToDatabase: z.boolean().optional().default(true),\r\n  forceReprocess: z.boolean().optional().default(false),\r\n})\r\n\r\n// POST /api/chunks/batch - Create chunks for multiple files\r\nasync function batchChunkingHandler(request: Request, context: ApiContext): Promise<NextResponse> {\r\n  const { user } = context\r\n  \r\n  if (!user) {\r\n    return ApiResponse.unauthorized('User not authenticated')\r\n  }\r\n  \r\n  try {\r\n    const body = await request.json()\r\n    const validation = batchChunkingSchema.safeParse(body)\r\n    \r\n    if (!validation.success) {\r\n      return ApiResponse.badRequest('Invalid request data')\r\n    }\r\n    \r\n    const {\r\n      file_ids,\r\n      strategy,\r\n      maxChunkSize,\r\n      minChunkSize,\r\n      overlap,\r\n      preserveStructure,\r\n      respectBoundaries,\r\n      saveToDatabase,\r\n      forceReprocess,\r\n    } = validation.data\r\n    \r\n    const supabase = supabaseAdmin\r\n    \r\n    // Get files metadata\r\n    const { data: files, error: filesError } = await supabase\r\n      .from('file_metadata')\r\n      .select('*')\r\n      .eq('user_id', user.id)\r\n      .in('id', file_ids)\r\n    \r\n    if (filesError) {\r\n      console.error('Files fetch error:', filesError)\r\n      return ApiResponse.internalError('Failed to fetch files')\r\n    }\r\n    \r\n    if (!files || files.length === 0) {\r\n      return ApiResponse.notFound('No files found')\r\n    }\r\n    \r\n    const results = {\r\n      processed: [] as any[],\r\n      skipped: [] as any[],\r\n      failed: [] as any[],\r\n      summary: {\r\n        total_requested: file_ids.length,\r\n        total_found: files.length,\r\n        total_processed: 0,\r\n        total_skipped: 0,\r\n        total_failed: 0,\r\n        total_chunks_created: 0,\r\n        total_processing_time: 0,\r\n      },\r\n    }\r\n    \r\n    // Create chunker with configuration\r\n    const chunker = new DocumentChunker({\r\n      strategy,\r\n      maxChunkSize,\r\n      minChunkSize,\r\n      overlap,\r\n      preserveStructure,\r\n      respectBoundaries,\r\n    })\r\n    \r\n    // Process each file\r\n    for (const file of files) {\r\n      const startTime = Date.now()\r\n      \r\n      try {\r\n        // Check if already processed and not forcing reprocess\r\n        if (file.processed && !forceReprocess) {\r\n          const existingChunks = await getDocumentChunks(file.id, user.id)\r\n          \r\n          if (existingChunks.length > 0) {\r\n            const stats = getChunkingStats(existingChunks)\r\n            \r\n            results.processed.push({\r\n              file_id: file.id,\r\n              file_name: file.name,\r\n              from_cache: true,\r\n              chunk_count: existingChunks.length,\r\n              processing_time: 0,\r\n              stats,\r\n            })\r\n            \r\n            results.summary.total_chunks_created += existingChunks.length\r\n            continue\r\n          }\r\n        }\r\n        \r\n        // Extract text from file\r\n        let text: string\r\n        \r\n        if (file.source === 'upload' && file.path) {\r\n          const { data: fileData, error: downloadError } = await supabase.storage\r\n            .from('documents')\r\n            .download(file.path)\r\n          \r\n          if (downloadError || !fileData) {\r\n            results.failed.push({\r\n              file_id: file.id,\r\n              file_name: file.name,\r\n              error: 'Failed to download file',\r\n            })\r\n            continue\r\n          }\r\n          \r\n          const buffer = Buffer.from(await fileData.arrayBuffer())\r\n          const extractionResult = await extractTextFromBuffer(buffer, file.mime_type, file.name)\r\n          text = extractionResult.text\r\n        } else {\r\n          results.skipped.push({\r\n            file_id: file.id,\r\n            file_name: file.name,\r\n            reason: 'Cloud storage files not yet supported for batch chunking',\r\n          })\r\n          continue\r\n        }\r\n        \r\n        if (!text.trim()) {\r\n          results.skipped.push({\r\n            file_id: file.id,\r\n            file_name: file.name,\r\n            reason: 'No text content found in file',\r\n          })\r\n          continue\r\n        }\r\n        \r\n        // Create chunks\r\n        const chunks = chunker.createChunks(text, file.id, file.name, file.mime_type, user.id)\r\n        \r\n        // Store in database if requested\r\n        if (saveToDatabase) {\r\n          try {\r\n            await storeDocumentChunks(chunks, user.id, file.id)\r\n            \r\n            // Update file metadata\r\n            await supabase\r\n              .from('file_metadata')\r\n              .update({\r\n                processed: true,\r\n                processing_status: 'completed',\r\n                metadata: {\r\n                  ...file.metadata,\r\n                  chunk_count: chunks.length,\r\n                  chunking_strategy: strategy,\r\n                  max_chunk_size: maxChunkSize,\r\n                  min_chunk_size: minChunkSize,\r\n                  overlap,\r\n                  preserve_structure: preserveStructure,\r\n                  respect_boundaries: respectBoundaries,\r\n                  processed_at: new Date().toISOString(),\r\n                },\r\n                updated_at: new Date().toISOString(),\r\n              })\r\n              .eq('id', file.id)\r\n              .eq('user_id', user.id)\r\n            \r\n          } catch (dbError) {\r\n            console.error(`Database save error for file ${file.id}:`, dbError)\r\n            // Continue without failing the chunking\r\n          }\r\n        }\r\n        \r\n        const processingTime = Date.now() - startTime\r\n        const stats = getChunkingStats(chunks)\r\n        \r\n        results.processed.push({\r\n          file_id: file.id,\r\n          file_name: file.name,\r\n          from_cache: false,\r\n          chunk_count: chunks.length,\r\n          processing_time: processingTime,\r\n          text_length: text.length,\r\n          stats,\r\n        })\r\n        \r\n        results.summary.total_chunks_created += chunks.length\r\n        results.summary.total_processing_time += processingTime\r\n        \r\n      } catch (error) {\r\n        console.error(`Error processing file ${file.id}:`, error)\r\n        results.failed.push({\r\n          file_id: file.id,\r\n          file_name: file.name,\r\n          error: error instanceof Error ? error.message : 'Unknown error',\r\n        })\r\n      }\r\n    }\r\n    \r\n    // Update summary\r\n    results.summary.total_processed = results.processed.length\r\n    results.summary.total_skipped = results.skipped.length\r\n    results.summary.total_failed = results.failed.length\r\n    \r\n    // Log usage\r\n    logApiUsage(user.id, '/api/chunks/batch', 'batch_chunking', {\r\n      requested_count: file_ids.length,\r\n      processed_count: results.summary.total_processed,\r\n      skipped_count: results.summary.total_skipped,\r\n      failed_count: results.summary.total_failed,\r\n      total_chunks_created: results.summary.total_chunks_created,\r\n      total_processing_time: results.summary.total_processing_time,\r\n      strategy,\r\n      max_chunk_size: maxChunkSize,\r\n      save_to_database: saveToDatabase,\r\n    })\r\n    \r\n    return ApiResponse.success(results, \r\n      `Batch chunking completed: ${results.summary.total_processed} processed, ${results.summary.total_skipped} skipped, ${results.summary.total_failed} failed`\r\n    )\r\n    \r\n  } catch (error) {\r\n    console.error('Batch chunking handler error:', error)\r\n    return ApiResponse.internalError('Failed to process batch chunking')\r\n  }\r\n}\r\n\r\n// Export handler with middleware\r\nexport const POST = createProtectedApiHandler(batchChunkingHandler, {\r\n  rateLimit: {\r\n    ...rateLimitConfigs.embedding, // Use embedding rate limits (more restrictive)\r\n    maxRequests: 3, // Very restrictive for batch operations\r\n  },\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: true,\r\n  },\r\n})"],
      names: ["POST", "batchChunkingSchema", "z", "object", "file_ids", "array", "string", "min", "max", "strategy", "enum", "optional", "default", "maxChunkSize", "number", "minChunkSize", "overlap", "preserveStructure", "boolean", "respectBoundaries", "saveToDatabase", "forceReprocess", "batchChunkingHandler", "request", "context", "user", "ApiResponse", "unauthorized", "body", "json", "validation", "safeParse", "success", "badRequest", "data", "supabase", "supabaseAdmin", "files", "error", "filesError", "from", "select", "eq", "id", "in", "console", "internalError", "length", "notFound", "results", "processed", "skipped", "failed", "summary", "total_requested", "total_found", "total_processed", "total_skipped", "total_failed", "total_chunks_created", "total_processing_time", "chunker", "DocumentChunker", "file", "startTime", "Date", "now", "existingChunks", "getDocumentChunks", "stats", "getChunkingStats", "push", "file_id", "file_name", "name", "from_cache", "chunk_count", "processing_time", "text", "source", "path", "fileData", "downloadError", "storage", "download", "buffer", "Buffer", "arrayBuffer", "extractionResult", "extractTextFromBuffer", "mime_type", "reason", "trim", "chunks", "createChunks", "storeDocumentChunks", "update", "processing_status", "metadata", "chunking_strategy", "max_chunk_size", "min_chunk_size", "preserve_structure", "respect_boundaries", "processed_at", "toISOString", "updated_at", "dbError", "processingTime", "text_length", "Error", "message", "logApiUsage", "requested_count", "processed_count", "skipped_count", "failed_count", "save_to_database", "createProtectedApiHandler", "rateLimit", "rateLimitConfigs", "embedding", "maxRequests", "logging", "enabled", "includeBody"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "36fc4d7b8fcfdf4348c01392f3d54856c93de943"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2mcobfwqyt = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2mcobfwqyt();
cov_2mcobfwqyt().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_2mcobfwqyt().s[1]++;
Object.defineProperty(exports, "POST", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_2mcobfwqyt().f[0]++;
    cov_2mcobfwqyt().s[2]++;
    return POST;
  }
});
const _apimiddleware =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[3]++, require("../../../lib/api-middleware"));
const _apiutils =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[4]++, require("../../../lib/api-utils"));
const _ratelimit =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[5]++, require("../../../lib/rate-limit"));
const _supabase =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[6]++, require("../../../lib/supabase"));
const _logger =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[7]++, require("../../../lib/logger"));
const _documentchunker =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[8]++, require("../../../lib/document-chunker"));
const _documentextractor =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[9]++, require("../../../lib/document-extractor"));
const _zod =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[10]++, require("zod"));
// Validation schema
const batchChunkingSchema =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[11]++, _zod.z.object({
  file_ids: _zod.z.array(_zod.z.string()).min(1).max(10),
  strategy: _zod.z.enum(['paragraph', 'sentence', 'fixed', 'semantic', 'sliding']).optional().default('paragraph'),
  maxChunkSize: _zod.z.number().min(100).max(5000).optional().default(1000),
  minChunkSize: _zod.z.number().min(50).max(2000).optional(),
  overlap: _zod.z.number().min(0).max(1000).optional(),
  preserveStructure: _zod.z.boolean().optional(),
  respectBoundaries: _zod.z.boolean().optional(),
  saveToDatabase: _zod.z.boolean().optional().default(true),
  forceReprocess: _zod.z.boolean().optional().default(false)
}));
// POST /api/chunks/batch - Create chunks for multiple files
async function batchChunkingHandler(request, context) {
  /* istanbul ignore next */
  cov_2mcobfwqyt().f[1]++;
  const {
    user
  } =
  /* istanbul ignore next */
  (cov_2mcobfwqyt().s[12]++, context);
  /* istanbul ignore next */
  cov_2mcobfwqyt().s[13]++;
  if (!user) {
    /* istanbul ignore next */
    cov_2mcobfwqyt().b[0][0]++;
    cov_2mcobfwqyt().s[14]++;
    return _apiutils.ApiResponse.unauthorized('User not authenticated');
  } else
  /* istanbul ignore next */
  {
    cov_2mcobfwqyt().b[0][1]++;
  }
  cov_2mcobfwqyt().s[15]++;
  try {
    const body =
    /* istanbul ignore next */
    (cov_2mcobfwqyt().s[16]++, await request.json());
    const validation =
    /* istanbul ignore next */
    (cov_2mcobfwqyt().s[17]++, batchChunkingSchema.safeParse(body));
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[18]++;
    if (!validation.success) {
      /* istanbul ignore next */
      cov_2mcobfwqyt().b[1][0]++;
      cov_2mcobfwqyt().s[19]++;
      return _apiutils.ApiResponse.badRequest('Invalid request data');
    } else
    /* istanbul ignore next */
    {
      cov_2mcobfwqyt().b[1][1]++;
    }
    const {
      file_ids,
      strategy,
      maxChunkSize,
      minChunkSize,
      overlap,
      preserveStructure,
      respectBoundaries,
      saveToDatabase,
      forceReprocess
    } =
    /* istanbul ignore next */
    (cov_2mcobfwqyt().s[20]++, validation.data);
    const supabase =
    /* istanbul ignore next */
    (cov_2mcobfwqyt().s[21]++, _supabase.supabaseAdmin);
    // Get files metadata
    const {
      data: files,
      error: filesError
    } =
    /* istanbul ignore next */
    (cov_2mcobfwqyt().s[22]++, await supabase.from('file_metadata').select('*').eq('user_id', user.id).in('id', file_ids));
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[23]++;
    if (filesError) {
      /* istanbul ignore next */
      cov_2mcobfwqyt().b[2][0]++;
      cov_2mcobfwqyt().s[24]++;
      console.error('Files fetch error:', filesError);
      /* istanbul ignore next */
      cov_2mcobfwqyt().s[25]++;
      return _apiutils.ApiResponse.internalError('Failed to fetch files');
    } else
    /* istanbul ignore next */
    {
      cov_2mcobfwqyt().b[2][1]++;
    }
    cov_2mcobfwqyt().s[26]++;
    if (
    /* istanbul ignore next */
    (cov_2mcobfwqyt().b[4][0]++, !files) ||
    /* istanbul ignore next */
    (cov_2mcobfwqyt().b[4][1]++, files.length === 0)) {
      /* istanbul ignore next */
      cov_2mcobfwqyt().b[3][0]++;
      cov_2mcobfwqyt().s[27]++;
      return _apiutils.ApiResponse.notFound('No files found');
    } else
    /* istanbul ignore next */
    {
      cov_2mcobfwqyt().b[3][1]++;
    }
    const results =
    /* istanbul ignore next */
    (cov_2mcobfwqyt().s[28]++, {
      processed: [],
      skipped: [],
      failed: [],
      summary: {
        total_requested: file_ids.length,
        total_found: files.length,
        total_processed: 0,
        total_skipped: 0,
        total_failed: 0,
        total_chunks_created: 0,
        total_processing_time: 0
      }
    });
    // Create chunker with configuration
    const chunker =
    /* istanbul ignore next */
    (cov_2mcobfwqyt().s[29]++, new _documentchunker.DocumentChunker({
      strategy,
      maxChunkSize,
      minChunkSize,
      overlap,
      preserveStructure,
      respectBoundaries
    }));
    // Process each file
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[30]++;
    for (const file of files) {
      const startTime =
      /* istanbul ignore next */
      (cov_2mcobfwqyt().s[31]++, Date.now());
      /* istanbul ignore next */
      cov_2mcobfwqyt().s[32]++;
      try {
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[33]++;
        // Check if already processed and not forcing reprocess
        if (
        /* istanbul ignore next */
        (cov_2mcobfwqyt().b[6][0]++, file.processed) &&
        /* istanbul ignore next */
        (cov_2mcobfwqyt().b[6][1]++, !forceReprocess)) {
          /* istanbul ignore next */
          cov_2mcobfwqyt().b[5][0]++;
          const existingChunks =
          /* istanbul ignore next */
          (cov_2mcobfwqyt().s[34]++, await (0, _documentchunker.getDocumentChunks)(file.id, user.id));
          /* istanbul ignore next */
          cov_2mcobfwqyt().s[35]++;
          if (existingChunks.length > 0) {
            /* istanbul ignore next */
            cov_2mcobfwqyt().b[7][0]++;
            const stats =
            /* istanbul ignore next */
            (cov_2mcobfwqyt().s[36]++, (0, _documentchunker.getChunkingStats)(existingChunks));
            /* istanbul ignore next */
            cov_2mcobfwqyt().s[37]++;
            results.processed.push({
              file_id: file.id,
              file_name: file.name,
              from_cache: true,
              chunk_count: existingChunks.length,
              processing_time: 0,
              stats
            });
            /* istanbul ignore next */
            cov_2mcobfwqyt().s[38]++;
            results.summary.total_chunks_created += existingChunks.length;
            /* istanbul ignore next */
            cov_2mcobfwqyt().s[39]++;
            continue;
          } else
          /* istanbul ignore next */
          {
            cov_2mcobfwqyt().b[7][1]++;
          }
        } else
        /* istanbul ignore next */
        {
          cov_2mcobfwqyt().b[5][1]++;
        }
        // Extract text from file
        let text;
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[40]++;
        if (
        /* istanbul ignore next */
        (cov_2mcobfwqyt().b[9][0]++, file.source === 'upload') &&
        /* istanbul ignore next */
        (cov_2mcobfwqyt().b[9][1]++, file.path)) {
          /* istanbul ignore next */
          cov_2mcobfwqyt().b[8][0]++;
          const {
            data: fileData,
            error: downloadError
          } =
          /* istanbul ignore next */
          (cov_2mcobfwqyt().s[41]++, await supabase.storage.from('documents').download(file.path));
          /* istanbul ignore next */
          cov_2mcobfwqyt().s[42]++;
          if (
          /* istanbul ignore next */
          (cov_2mcobfwqyt().b[11][0]++, downloadError) ||
          /* istanbul ignore next */
          (cov_2mcobfwqyt().b[11][1]++, !fileData)) {
            /* istanbul ignore next */
            cov_2mcobfwqyt().b[10][0]++;
            cov_2mcobfwqyt().s[43]++;
            results.failed.push({
              file_id: file.id,
              file_name: file.name,
              error: 'Failed to download file'
            });
            /* istanbul ignore next */
            cov_2mcobfwqyt().s[44]++;
            continue;
          } else
          /* istanbul ignore next */
          {
            cov_2mcobfwqyt().b[10][1]++;
          }
          const buffer =
          /* istanbul ignore next */
          (cov_2mcobfwqyt().s[45]++, Buffer.from(await fileData.arrayBuffer()));
          const extractionResult =
          /* istanbul ignore next */
          (cov_2mcobfwqyt().s[46]++, await (0, _documentextractor.extractTextFromBuffer)(buffer, file.mime_type, file.name));
          /* istanbul ignore next */
          cov_2mcobfwqyt().s[47]++;
          text = extractionResult.text;
        } else {
          /* istanbul ignore next */
          cov_2mcobfwqyt().b[8][1]++;
          cov_2mcobfwqyt().s[48]++;
          results.skipped.push({
            file_id: file.id,
            file_name: file.name,
            reason: 'Cloud storage files not yet supported for batch chunking'
          });
          /* istanbul ignore next */
          cov_2mcobfwqyt().s[49]++;
          continue;
        }
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[50]++;
        if (!text.trim()) {
          /* istanbul ignore next */
          cov_2mcobfwqyt().b[12][0]++;
          cov_2mcobfwqyt().s[51]++;
          results.skipped.push({
            file_id: file.id,
            file_name: file.name,
            reason: 'No text content found in file'
          });
          /* istanbul ignore next */
          cov_2mcobfwqyt().s[52]++;
          continue;
        } else
        /* istanbul ignore next */
        {
          cov_2mcobfwqyt().b[12][1]++;
        }
        // Create chunks
        const chunks =
        /* istanbul ignore next */
        (cov_2mcobfwqyt().s[53]++, chunker.createChunks(text, file.id, file.name, file.mime_type, user.id));
        // Store in database if requested
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[54]++;
        if (saveToDatabase) {
          /* istanbul ignore next */
          cov_2mcobfwqyt().b[13][0]++;
          cov_2mcobfwqyt().s[55]++;
          try {
            /* istanbul ignore next */
            cov_2mcobfwqyt().s[56]++;
            await (0, _documentchunker.storeDocumentChunks)(chunks, user.id, file.id);
            // Update file metadata
            /* istanbul ignore next */
            cov_2mcobfwqyt().s[57]++;
            await supabase.from('file_metadata').update({
              processed: true,
              processing_status: 'completed',
              metadata: {
                ...file.metadata,
                chunk_count: chunks.length,
                chunking_strategy: strategy,
                max_chunk_size: maxChunkSize,
                min_chunk_size: minChunkSize,
                overlap,
                preserve_structure: preserveStructure,
                respect_boundaries: respectBoundaries,
                processed_at: new Date().toISOString()
              },
              updated_at: new Date().toISOString()
            }).eq('id', file.id).eq('user_id', user.id);
          } catch (dbError) {
            /* istanbul ignore next */
            cov_2mcobfwqyt().s[58]++;
            console.error(`Database save error for file ${file.id}:`, dbError);
            // Continue without failing the chunking
          }
        } else
        /* istanbul ignore next */
        {
          cov_2mcobfwqyt().b[13][1]++;
        }
        const processingTime =
        /* istanbul ignore next */
        (cov_2mcobfwqyt().s[59]++, Date.now() - startTime);
        const stats =
        /* istanbul ignore next */
        (cov_2mcobfwqyt().s[60]++, (0, _documentchunker.getChunkingStats)(chunks));
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[61]++;
        results.processed.push({
          file_id: file.id,
          file_name: file.name,
          from_cache: false,
          chunk_count: chunks.length,
          processing_time: processingTime,
          text_length: text.length,
          stats
        });
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[62]++;
        results.summary.total_chunks_created += chunks.length;
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[63]++;
        results.summary.total_processing_time += processingTime;
      } catch (error) {
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[64]++;
        console.error(`Error processing file ${file.id}:`, error);
        /* istanbul ignore next */
        cov_2mcobfwqyt().s[65]++;
        results.failed.push({
          file_id: file.id,
          file_name: file.name,
          error: error instanceof Error ?
          /* istanbul ignore next */
          (cov_2mcobfwqyt().b[14][0]++, error.message) :
          /* istanbul ignore next */
          (cov_2mcobfwqyt().b[14][1]++, 'Unknown error')
        });
      }
    }
    // Update summary
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[66]++;
    results.summary.total_processed = results.processed.length;
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[67]++;
    results.summary.total_skipped = results.skipped.length;
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[68]++;
    results.summary.total_failed = results.failed.length;
    // Log usage
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[69]++;
    (0, _logger.logApiUsage)(user.id, '/api/chunks/batch', 'batch_chunking', {
      requested_count: file_ids.length,
      processed_count: results.summary.total_processed,
      skipped_count: results.summary.total_skipped,
      failed_count: results.summary.total_failed,
      total_chunks_created: results.summary.total_chunks_created,
      total_processing_time: results.summary.total_processing_time,
      strategy,
      max_chunk_size: maxChunkSize,
      save_to_database: saveToDatabase
    });
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[70]++;
    return _apiutils.ApiResponse.success(results, `Batch chunking completed: ${results.summary.total_processed} processed, ${results.summary.total_skipped} skipped, ${results.summary.total_failed} failed`);
  } catch (error) {
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[71]++;
    console.error('Batch chunking handler error:', error);
    /* istanbul ignore next */
    cov_2mcobfwqyt().s[72]++;
    return _apiutils.ApiResponse.internalError('Failed to process batch chunking');
  }
}
const POST =
/* istanbul ignore next */
(cov_2mcobfwqyt().s[73]++, (0, _apimiddleware.createProtectedApiHandler)(batchChunkingHandler, {
  rateLimit: {
    ..._ratelimit.rateLimitConfigs.embedding,
    maxRequests: 3
  },
  logging: {
    enabled: true,
    includeBody: true
  }
}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQT1NUIiwiYmF0Y2hDaHVua2luZ1NjaGVtYSIsImNvdl8ybWNvYmZ3cXl0IiwicyIsIl96b2QiLCJ6Iiwib2JqZWN0IiwiZmlsZV9pZHMiLCJhcnJheSIsInN0cmluZyIsIm1pbiIsIm1heCIsInN0cmF0ZWd5IiwiZW51bSIsIm9wdGlvbmFsIiwiZGVmYXVsdCIsIm1heENodW5rU2l6ZSIsIm51bWJlciIsIm1pbkNodW5rU2l6ZSIsIm92ZXJsYXAiLCJwcmVzZXJ2ZVN0cnVjdHVyZSIsImJvb2xlYW4iLCJyZXNwZWN0Qm91bmRhcmllcyIsInNhdmVUb0RhdGFiYXNlIiwiZm9yY2VSZXByb2Nlc3MiLCJiYXRjaENodW5raW5nSGFuZGxlciIsInJlcXVlc3QiLCJjb250ZXh0IiwiZiIsInVzZXIiLCJiIiwiX2FwaXV0aWxzIiwiQXBpUmVzcG9uc2UiLCJ1bmF1dGhvcml6ZWQiLCJib2R5IiwianNvbiIsInZhbGlkYXRpb24iLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiYmFkUmVxdWVzdCIsImRhdGEiLCJzdXBhYmFzZSIsIl9zdXBhYmFzZSIsInN1cGFiYXNlQWRtaW4iLCJmaWxlcyIsImVycm9yIiwiZmlsZXNFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsImlkIiwiaW4iLCJjb25zb2xlIiwiaW50ZXJuYWxFcnJvciIsImxlbmd0aCIsIm5vdEZvdW5kIiwicmVzdWx0cyIsInByb2Nlc3NlZCIsInNraXBwZWQiLCJmYWlsZWQiLCJzdW1tYXJ5IiwidG90YWxfcmVxdWVzdGVkIiwidG90YWxfZm91bmQiLCJ0b3RhbF9wcm9jZXNzZWQiLCJ0b3RhbF9za2lwcGVkIiwidG90YWxfZmFpbGVkIiwidG90YWxfY2h1bmtzX2NyZWF0ZWQiLCJ0b3RhbF9wcm9jZXNzaW5nX3RpbWUiLCJjaHVua2VyIiwiX2RvY3VtZW50Y2h1bmtlciIsIkRvY3VtZW50Q2h1bmtlciIsImZpbGUiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiZXhpc3RpbmdDaHVua3MiLCJnZXREb2N1bWVudENodW5rcyIsInN0YXRzIiwiZ2V0Q2h1bmtpbmdTdGF0cyIsInB1c2giLCJmaWxlX2lkIiwiZmlsZV9uYW1lIiwibmFtZSIsImZyb21fY2FjaGUiLCJjaHVua19jb3VudCIsInByb2Nlc3NpbmdfdGltZSIsInRleHQiLCJzb3VyY2UiLCJwYXRoIiwiZmlsZURhdGEiLCJkb3dubG9hZEVycm9yIiwic3RvcmFnZSIsImRvd25sb2FkIiwiYnVmZmVyIiwiQnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJleHRyYWN0aW9uUmVzdWx0IiwiX2RvY3VtZW50ZXh0cmFjdG9yIiwiZXh0cmFjdFRleHRGcm9tQnVmZmVyIiwibWltZV90eXBlIiwicmVhc29uIiwidHJpbSIsImNodW5rcyIsImNyZWF0ZUNodW5rcyIsInN0b3JlRG9jdW1lbnRDaHVua3MiLCJ1cGRhdGUiLCJwcm9jZXNzaW5nX3N0YXR1cyIsIm1ldGFkYXRhIiwiY2h1bmtpbmdfc3RyYXRlZ3kiLCJtYXhfY2h1bmtfc2l6ZSIsIm1pbl9jaHVua19zaXplIiwicHJlc2VydmVfc3RydWN0dXJlIiwicmVzcGVjdF9ib3VuZGFyaWVzIiwicHJvY2Vzc2VkX2F0IiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwiZGJFcnJvciIsInByb2Nlc3NpbmdUaW1lIiwidGV4dF9sZW5ndGgiLCJFcnJvciIsIm1lc3NhZ2UiLCJfbG9nZ2VyIiwibG9nQXBpVXNhZ2UiLCJyZXF1ZXN0ZWRfY291bnQiLCJwcm9jZXNzZWRfY291bnQiLCJza2lwcGVkX2NvdW50IiwiZmFpbGVkX2NvdW50Iiwic2F2ZV90b19kYXRhYmFzZSIsIl9hcGltaWRkbGV3YXJlIiwiY3JlYXRlUHJvdGVjdGVkQXBpSGFuZGxlciIsInJhdGVMaW1pdCIsIl9yYXRlbGltaXQiLCJyYXRlTGltaXRDb25maWdzIiwiZW1iZWRkaW5nIiwibWF4UmVxdWVzdHMiLCJsb2dnaW5nIiwiZW5hYmxlZCIsImluY2x1ZGVCb2R5Il0sInNvdXJjZXMiOlsiUjpcXEFwcHNcXEJyaWVmbHlfQ2xvdWRcXGJyaWVmbHktY2xvdWQtbmV4dGpzXFxzcmNcXGFwcFxcYXBpXFxjaHVua3NcXGJhdGNoXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgY3JlYXRlUHJvdGVjdGVkQXBpSGFuZGxlciwgQXBpQ29udGV4dCB9IGZyb20gJ0AvYXBwL2xpYi9hcGktbWlkZGxld2FyZSdcclxuaW1wb3J0IHsgQXBpUmVzcG9uc2UgfSBmcm9tICdAL2FwcC9saWIvYXBpLXV0aWxzJ1xyXG5pbXBvcnQgeyByYXRlTGltaXRDb25maWdzIH0gZnJvbSAnQC9hcHAvbGliL3JhdGUtbGltaXQnXHJcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2FwcC9saWIvc3VwYWJhc2UnXHJcbmltcG9ydCB7IGxvZ0FwaVVzYWdlIH0gZnJvbSAnQC9hcHAvbGliL2xvZ2dlcidcclxuaW1wb3J0IHsgXHJcbiAgRG9jdW1lbnRDaHVua2VyLCBcclxuICBzdG9yZURvY3VtZW50Q2h1bmtzLCBcclxuICBnZXREb2N1bWVudENodW5rcyxcclxuICBnZXRDaHVua2luZ1N0YXRzXHJcbn0gZnJvbSAnQC9hcHAvbGliL2RvY3VtZW50LWNodW5rZXInXHJcbmltcG9ydCB7IGV4dHJhY3RUZXh0RnJvbUJ1ZmZlciB9IGZyb20gJ0AvYXBwL2xpYi9kb2N1bWVudC1leHRyYWN0b3InXHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnXHJcblxyXG4vLyBWYWxpZGF0aW9uIHNjaGVtYVxyXG5jb25zdCBiYXRjaENodW5raW5nU2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIGZpbGVfaWRzOiB6LmFycmF5KHouc3RyaW5nKCkpLm1pbigxKS5tYXgoMTApLCAvLyBMaW1pdCB0byAxMCBmaWxlcyBhdCBvbmNlXHJcbiAgc3RyYXRlZ3k6IHouZW51bShbJ3BhcmFncmFwaCcsICdzZW50ZW5jZScsICdmaXhlZCcsICdzZW1hbnRpYycsICdzbGlkaW5nJ10pLm9wdGlvbmFsKCkuZGVmYXVsdCgncGFyYWdyYXBoJyksXHJcbiAgbWF4Q2h1bmtTaXplOiB6Lm51bWJlcigpLm1pbigxMDApLm1heCg1MDAwKS5vcHRpb25hbCgpLmRlZmF1bHQoMTAwMCksXHJcbiAgbWluQ2h1bmtTaXplOiB6Lm51bWJlcigpLm1pbig1MCkubWF4KDIwMDApLm9wdGlvbmFsKCksXHJcbiAgb3ZlcmxhcDogei5udW1iZXIoKS5taW4oMCkubWF4KDEwMDApLm9wdGlvbmFsKCksXHJcbiAgcHJlc2VydmVTdHJ1Y3R1cmU6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXHJcbiAgcmVzcGVjdEJvdW5kYXJpZXM6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXHJcbiAgc2F2ZVRvRGF0YWJhc2U6IHouYm9vbGVhbigpLm9wdGlvbmFsKCkuZGVmYXVsdCh0cnVlKSxcclxuICBmb3JjZVJlcHJvY2Vzczogei5ib29sZWFuKCkub3B0aW9uYWwoKS5kZWZhdWx0KGZhbHNlKSxcclxufSlcclxuXHJcbi8vIFBPU1QgL2FwaS9jaHVua3MvYmF0Y2ggLSBDcmVhdGUgY2h1bmtzIGZvciBtdWx0aXBsZSBmaWxlc1xyXG5hc3luYyBmdW5jdGlvbiBiYXRjaENodW5raW5nSGFuZGxlcihyZXF1ZXN0OiBSZXF1ZXN0LCBjb250ZXh0OiBBcGlDb250ZXh0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U+IHtcclxuICBjb25zdCB7IHVzZXIgfSA9IGNvbnRleHRcclxuICBcclxuICBpZiAoIXVzZXIpIHtcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS51bmF1dGhvcml6ZWQoJ1VzZXIgbm90IGF1dGhlbnRpY2F0ZWQnKVxyXG4gIH1cclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gYmF0Y2hDaHVua2luZ1NjaGVtYS5zYWZlUGFyc2UoYm9keSlcclxuICAgIFxyXG4gICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIEFwaVJlc3BvbnNlLmJhZFJlcXVlc3QoJ0ludmFsaWQgcmVxdWVzdCBkYXRhJylcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qge1xyXG4gICAgICBmaWxlX2lkcyxcclxuICAgICAgc3RyYXRlZ3ksXHJcbiAgICAgIG1heENodW5rU2l6ZSxcclxuICAgICAgbWluQ2h1bmtTaXplLFxyXG4gICAgICBvdmVybGFwLFxyXG4gICAgICBwcmVzZXJ2ZVN0cnVjdHVyZSxcclxuICAgICAgcmVzcGVjdEJvdW5kYXJpZXMsXHJcbiAgICAgIHNhdmVUb0RhdGFiYXNlLFxyXG4gICAgICBmb3JjZVJlcHJvY2VzcyxcclxuICAgIH0gPSB2YWxpZGF0aW9uLmRhdGFcclxuICAgIFxyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBzdXBhYmFzZUFkbWluXHJcbiAgICBcclxuICAgIC8vIEdldCBmaWxlcyBtZXRhZGF0YVxyXG4gICAgY29uc3QgeyBkYXRhOiBmaWxlcywgZXJyb3I6IGZpbGVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdmaWxlX21ldGFkYXRhJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXIuaWQpXHJcbiAgICAgIC5pbignaWQnLCBmaWxlX2lkcylcclxuICAgIFxyXG4gICAgaWYgKGZpbGVzRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmlsZXMgZmV0Y2ggZXJyb3I6JywgZmlsZXNFcnJvcilcclxuICAgICAgcmV0dXJuIEFwaVJlc3BvbnNlLmludGVybmFsRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBmaWxlcycpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBBcGlSZXNwb25zZS5ub3RGb3VuZCgnTm8gZmlsZXMgZm91bmQnKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCByZXN1bHRzID0ge1xyXG4gICAgICBwcm9jZXNzZWQ6IFtdIGFzIGFueVtdLFxyXG4gICAgICBza2lwcGVkOiBbXSBhcyBhbnlbXSxcclxuICAgICAgZmFpbGVkOiBbXSBhcyBhbnlbXSxcclxuICAgICAgc3VtbWFyeToge1xyXG4gICAgICAgIHRvdGFsX3JlcXVlc3RlZDogZmlsZV9pZHMubGVuZ3RoLFxyXG4gICAgICAgIHRvdGFsX2ZvdW5kOiBmaWxlcy5sZW5ndGgsXHJcbiAgICAgICAgdG90YWxfcHJvY2Vzc2VkOiAwLFxyXG4gICAgICAgIHRvdGFsX3NraXBwZWQ6IDAsXHJcbiAgICAgICAgdG90YWxfZmFpbGVkOiAwLFxyXG4gICAgICAgIHRvdGFsX2NodW5rc19jcmVhdGVkOiAwLFxyXG4gICAgICAgIHRvdGFsX3Byb2Nlc3NpbmdfdGltZTogMCxcclxuICAgICAgfSxcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIGNodW5rZXIgd2l0aCBjb25maWd1cmF0aW9uXHJcbiAgICBjb25zdCBjaHVua2VyID0gbmV3IERvY3VtZW50Q2h1bmtlcih7XHJcbiAgICAgIHN0cmF0ZWd5LFxyXG4gICAgICBtYXhDaHVua1NpemUsXHJcbiAgICAgIG1pbkNodW5rU2l6ZSxcclxuICAgICAgb3ZlcmxhcCxcclxuICAgICAgcHJlc2VydmVTdHJ1Y3R1cmUsXHJcbiAgICAgIHJlc3BlY3RCb3VuZGFyaWVzLFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgLy8gUHJvY2VzcyBlYWNoIGZpbGVcclxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgcHJvY2Vzc2VkIGFuZCBub3QgZm9yY2luZyByZXByb2Nlc3NcclxuICAgICAgICBpZiAoZmlsZS5wcm9jZXNzZWQgJiYgIWZvcmNlUmVwcm9jZXNzKSB7XHJcbiAgICAgICAgICBjb25zdCBleGlzdGluZ0NodW5rcyA9IGF3YWl0IGdldERvY3VtZW50Q2h1bmtzKGZpbGUuaWQsIHVzZXIuaWQpXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChleGlzdGluZ0NodW5rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gZ2V0Q2h1bmtpbmdTdGF0cyhleGlzdGluZ0NodW5rcylcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJlc3VsdHMucHJvY2Vzc2VkLnB1c2goe1xyXG4gICAgICAgICAgICAgIGZpbGVfaWQ6IGZpbGUuaWQsXHJcbiAgICAgICAgICAgICAgZmlsZV9uYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgICAgICAgZnJvbV9jYWNoZTogdHJ1ZSxcclxuICAgICAgICAgICAgICBjaHVua19jb3VudDogZXhpc3RpbmdDaHVua3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgIHByb2Nlc3NpbmdfdGltZTogMCxcclxuICAgICAgICAgICAgICBzdGF0cyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJlc3VsdHMuc3VtbWFyeS50b3RhbF9jaHVua3NfY3JlYXRlZCArPSBleGlzdGluZ0NodW5rcy5sZW5ndGhcclxuICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRXh0cmFjdCB0ZXh0IGZyb20gZmlsZVxyXG4gICAgICAgIGxldCB0ZXh0OiBzdHJpbmdcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZmlsZS5zb3VyY2UgPT09ICd1cGxvYWQnICYmIGZpbGUucGF0aCkge1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBmaWxlRGF0YSwgZXJyb3I6IGRvd25sb2FkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgICAgICAgLmZyb20oJ2RvY3VtZW50cycpXHJcbiAgICAgICAgICAgIC5kb3dubG9hZChmaWxlLnBhdGgpXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChkb3dubG9hZEVycm9yIHx8ICFmaWxlRGF0YSkge1xyXG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHtcclxuICAgICAgICAgICAgICBmaWxlX2lkOiBmaWxlLmlkLFxyXG4gICAgICAgICAgICAgIGZpbGVfbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGRvd25sb2FkIGZpbGUnLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhd2FpdCBmaWxlRGF0YS5hcnJheUJ1ZmZlcigpKVxyXG4gICAgICAgICAgY29uc3QgZXh0cmFjdGlvblJlc3VsdCA9IGF3YWl0IGV4dHJhY3RUZXh0RnJvbUJ1ZmZlcihidWZmZXIsIGZpbGUubWltZV90eXBlLCBmaWxlLm5hbWUpXHJcbiAgICAgICAgICB0ZXh0ID0gZXh0cmFjdGlvblJlc3VsdC50ZXh0XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc3VsdHMuc2tpcHBlZC5wdXNoKHtcclxuICAgICAgICAgICAgZmlsZV9pZDogZmlsZS5pZCxcclxuICAgICAgICAgICAgZmlsZV9uYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgICAgIHJlYXNvbjogJ0Nsb3VkIHN0b3JhZ2UgZmlsZXMgbm90IHlldCBzdXBwb3J0ZWQgZm9yIGJhdGNoIGNodW5raW5nJyxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRleHQudHJpbSgpKSB7XHJcbiAgICAgICAgICByZXN1bHRzLnNraXBwZWQucHVzaCh7XHJcbiAgICAgICAgICAgIGZpbGVfaWQ6IGZpbGUuaWQsXHJcbiAgICAgICAgICAgIGZpbGVfbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgICAgICByZWFzb246ICdObyB0ZXh0IGNvbnRlbnQgZm91bmQgaW4gZmlsZScsXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgY29udGludWVcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIGNodW5rc1xyXG4gICAgICAgIGNvbnN0IGNodW5rcyA9IGNodW5rZXIuY3JlYXRlQ2h1bmtzKHRleHQsIGZpbGUuaWQsIGZpbGUubmFtZSwgZmlsZS5taW1lX3R5cGUsIHVzZXIuaWQpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3RvcmUgaW4gZGF0YWJhc2UgaWYgcmVxdWVzdGVkXHJcbiAgICAgICAgaWYgKHNhdmVUb0RhdGFiYXNlKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBzdG9yZURvY3VtZW50Q2h1bmtzKGNodW5rcywgdXNlci5pZCwgZmlsZS5pZClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBmaWxlIG1ldGFkYXRhXHJcbiAgICAgICAgICAgIGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgICAgLmZyb20oJ2ZpbGVfbWV0YWRhdGEnKVxyXG4gICAgICAgICAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2luZ19zdGF0dXM6ICdjb21wbGV0ZWQnLFxyXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgLi4uZmlsZS5tZXRhZGF0YSxcclxuICAgICAgICAgICAgICAgICAgY2h1bmtfY291bnQ6IGNodW5rcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgIGNodW5raW5nX3N0cmF0ZWd5OiBzdHJhdGVneSxcclxuICAgICAgICAgICAgICAgICAgbWF4X2NodW5rX3NpemU6IG1heENodW5rU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgbWluX2NodW5rX3NpemU6IG1pbkNodW5rU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgb3ZlcmxhcCxcclxuICAgICAgICAgICAgICAgICAgcHJlc2VydmVfc3RydWN0dXJlOiBwcmVzZXJ2ZVN0cnVjdHVyZSxcclxuICAgICAgICAgICAgICAgICAgcmVzcGVjdF9ib3VuZGFyaWVzOiByZXNwZWN0Qm91bmRhcmllcyxcclxuICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmVxKCdpZCcsIGZpbGUuaWQpXHJcbiAgICAgICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlci5pZClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICB9IGNhdGNoIChkYkVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYERhdGFiYXNlIHNhdmUgZXJyb3IgZm9yIGZpbGUgJHtmaWxlLmlkfTpgLCBkYkVycm9yKVxyXG4gICAgICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGZhaWxpbmcgdGhlIGNodW5raW5nXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NpbmdUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIGNvbnN0IHN0YXRzID0gZ2V0Q2h1bmtpbmdTdGF0cyhjaHVua3MpXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVzdWx0cy5wcm9jZXNzZWQucHVzaCh7XHJcbiAgICAgICAgICBmaWxlX2lkOiBmaWxlLmlkLFxyXG4gICAgICAgICAgZmlsZV9uYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgICBmcm9tX2NhY2hlOiBmYWxzZSxcclxuICAgICAgICAgIGNodW5rX2NvdW50OiBjaHVua3MubGVuZ3RoLFxyXG4gICAgICAgICAgcHJvY2Vzc2luZ190aW1lOiBwcm9jZXNzaW5nVGltZSxcclxuICAgICAgICAgIHRleHRfbGVuZ3RoOiB0ZXh0Lmxlbmd0aCxcclxuICAgICAgICAgIHN0YXRzLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVzdWx0cy5zdW1tYXJ5LnRvdGFsX2NodW5rc19jcmVhdGVkICs9IGNodW5rcy5sZW5ndGhcclxuICAgICAgICByZXN1bHRzLnN1bW1hcnkudG90YWxfcHJvY2Vzc2luZ190aW1lICs9IHByb2Nlc3NpbmdUaW1lXHJcbiAgICAgICAgXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBmaWxlICR7ZmlsZS5pZH06YCwgZXJyb3IpXHJcbiAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh7XHJcbiAgICAgICAgICBmaWxlX2lkOiBmaWxlLmlkLFxyXG4gICAgICAgICAgZmlsZV9uYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgc3VtbWFyeVxyXG4gICAgcmVzdWx0cy5zdW1tYXJ5LnRvdGFsX3Byb2Nlc3NlZCA9IHJlc3VsdHMucHJvY2Vzc2VkLmxlbmd0aFxyXG4gICAgcmVzdWx0cy5zdW1tYXJ5LnRvdGFsX3NraXBwZWQgPSByZXN1bHRzLnNraXBwZWQubGVuZ3RoXHJcbiAgICByZXN1bHRzLnN1bW1hcnkudG90YWxfZmFpbGVkID0gcmVzdWx0cy5mYWlsZWQubGVuZ3RoXHJcbiAgICBcclxuICAgIC8vIExvZyB1c2FnZVxyXG4gICAgbG9nQXBpVXNhZ2UodXNlci5pZCwgJy9hcGkvY2h1bmtzL2JhdGNoJywgJ2JhdGNoX2NodW5raW5nJywge1xyXG4gICAgICByZXF1ZXN0ZWRfY291bnQ6IGZpbGVfaWRzLmxlbmd0aCxcclxuICAgICAgcHJvY2Vzc2VkX2NvdW50OiByZXN1bHRzLnN1bW1hcnkudG90YWxfcHJvY2Vzc2VkLFxyXG4gICAgICBza2lwcGVkX2NvdW50OiByZXN1bHRzLnN1bW1hcnkudG90YWxfc2tpcHBlZCxcclxuICAgICAgZmFpbGVkX2NvdW50OiByZXN1bHRzLnN1bW1hcnkudG90YWxfZmFpbGVkLFxyXG4gICAgICB0b3RhbF9jaHVua3NfY3JlYXRlZDogcmVzdWx0cy5zdW1tYXJ5LnRvdGFsX2NodW5rc19jcmVhdGVkLFxyXG4gICAgICB0b3RhbF9wcm9jZXNzaW5nX3RpbWU6IHJlc3VsdHMuc3VtbWFyeS50b3RhbF9wcm9jZXNzaW5nX3RpbWUsXHJcbiAgICAgIHN0cmF0ZWd5LFxyXG4gICAgICBtYXhfY2h1bmtfc2l6ZTogbWF4Q2h1bmtTaXplLFxyXG4gICAgICBzYXZlX3RvX2RhdGFiYXNlOiBzYXZlVG9EYXRhYmFzZSxcclxuICAgIH0pXHJcbiAgICBcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS5zdWNjZXNzKHJlc3VsdHMsIFxyXG4gICAgICBgQmF0Y2ggY2h1bmtpbmcgY29tcGxldGVkOiAke3Jlc3VsdHMuc3VtbWFyeS50b3RhbF9wcm9jZXNzZWR9IHByb2Nlc3NlZCwgJHtyZXN1bHRzLnN1bW1hcnkudG90YWxfc2tpcHBlZH0gc2tpcHBlZCwgJHtyZXN1bHRzLnN1bW1hcnkudG90YWxfZmFpbGVkfSBmYWlsZWRgXHJcbiAgICApXHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQmF0Y2ggY2h1bmtpbmcgaGFuZGxlciBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiBBcGlSZXNwb25zZS5pbnRlcm5hbEVycm9yKCdGYWlsZWQgdG8gcHJvY2VzcyBiYXRjaCBjaHVua2luZycpXHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgaGFuZGxlciB3aXRoIG1pZGRsZXdhcmVcclxuZXhwb3J0IGNvbnN0IFBPU1QgPSBjcmVhdGVQcm90ZWN0ZWRBcGlIYW5kbGVyKGJhdGNoQ2h1bmtpbmdIYW5kbGVyLCB7XHJcbiAgcmF0ZUxpbWl0OiB7XHJcbiAgICAuLi5yYXRlTGltaXRDb25maWdzLmVtYmVkZGluZywgLy8gVXNlIGVtYmVkZGluZyByYXRlIGxpbWl0cyAobW9yZSByZXN0cmljdGl2ZSlcclxuICAgIG1heFJlcXVlc3RzOiAzLCAvLyBWZXJ5IHJlc3RyaWN0aXZlIGZvciBiYXRjaCBvcGVyYXRpb25zXHJcbiAgfSxcclxuICBsb2dnaW5nOiB7XHJcbiAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgaW5jbHVkZUJvZHk6IHRydWUsXHJcbiAgfSxcclxufSkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0JBOFBhOzs7Ozs7V0FBQUEsSUFBQTs7Ozs7a0NBN1B5Qzs7O2tDQUMxQjs7O2tDQUNLOzs7a0NBQ0g7OztrQ0FDRjs7O2tDQU1yQjs7O2tDQUMrQjs7O21DQUNwQjtBQUVsQjtBQUNBLE1BQU1DLG1CQUFBO0FBQUE7QUFBQSxDQUFBQyxjQUFBLEdBQUFDLENBQUEsUUFBc0JDLElBQUEsQ0FBQUMsQ0FBQyxDQUFDQyxNQUFNLENBQUM7RUFDbkNDLFFBQUEsRUFBVUgsSUFBQSxDQUFBQyxDQUFDLENBQUNHLEtBQUssQ0FBQ0osSUFBQSxDQUFBQyxDQUFDLENBQUNJLE1BQU0sSUFBSUMsR0FBRyxDQUFDLEdBQUdDLEdBQUcsQ0FBQztFQUN6Q0MsUUFBQSxFQUFVUixJQUFBLENBQUFDLENBQUMsQ0FBQ1EsSUFBSSxDQUFDLENBQUMsYUFBYSxZQUFZLFNBQVMsWUFBWSxVQUFVLEVBQUVDLFFBQVEsR0FBR0MsT0FBTyxDQUFDO0VBQy9GQyxZQUFBLEVBQWNaLElBQUEsQ0FBQUMsQ0FBQyxDQUFDWSxNQUFNLEdBQUdQLEdBQUcsQ0FBQyxLQUFLQyxHQUFHLENBQUMsTUFBTUcsUUFBUSxHQUFHQyxPQUFPLENBQUM7RUFDL0RHLFlBQUEsRUFBY2QsSUFBQSxDQUFBQyxDQUFDLENBQUNZLE1BQU0sR0FBR1AsR0FBRyxDQUFDLElBQUlDLEdBQUcsQ0FBQyxNQUFNRyxRQUFRO0VBQ25ESyxPQUFBLEVBQVNmLElBQUEsQ0FBQUMsQ0FBQyxDQUFDWSxNQUFNLEdBQUdQLEdBQUcsQ0FBQyxHQUFHQyxHQUFHLENBQUMsTUFBTUcsUUFBUTtFQUM3Q00saUJBQUEsRUFBbUJoQixJQUFBLENBQUFDLENBQUMsQ0FBQ2dCLE9BQU8sR0FBR1AsUUFBUTtFQUN2Q1EsaUJBQUEsRUFBbUJsQixJQUFBLENBQUFDLENBQUMsQ0FBQ2dCLE9BQU8sR0FBR1AsUUFBUTtFQUN2Q1MsY0FBQSxFQUFnQm5CLElBQUEsQ0FBQUMsQ0FBQyxDQUFDZ0IsT0FBTyxHQUFHUCxRQUFRLEdBQUdDLE9BQU8sQ0FBQztFQUMvQ1MsY0FBQSxFQUFnQnBCLElBQUEsQ0FBQUMsQ0FBQyxDQUFDZ0IsT0FBTyxHQUFHUCxRQUFRLEdBQUdDLE9BQU8sQ0FBQztBQUNqRDtBQUVBO0FBQ0EsZUFBZVUscUJBQXFCQyxPQUFnQixFQUFFQyxPQUFtQjtFQUFBO0VBQUF6QixjQUFBLEdBQUEwQixDQUFBO0VBQ3ZFLE1BQU07SUFBRUM7RUFBSSxDQUFFO0VBQUE7RUFBQSxDQUFBM0IsY0FBQSxHQUFBQyxDQUFBLFFBQUd3QixPQUFBO0VBQUE7RUFBQXpCLGNBQUEsR0FBQUMsQ0FBQTtFQUVqQixJQUFJLENBQUMwQixJQUFBLEVBQU07SUFBQTtJQUFBM0IsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBNUIsY0FBQSxHQUFBQyxDQUFBO0lBQ1QsT0FBTzRCLFNBQUEsQ0FBQUMsV0FBVyxDQUFDQyxZQUFZLENBQUM7RUFDbEM7RUFBQTtFQUFBO0lBQUEvQixjQUFBLEdBQUE0QixDQUFBO0VBQUE7RUFBQTVCLGNBQUEsR0FBQUMsQ0FBQTtFQUVBLElBQUk7SUFDRixNQUFNK0IsSUFBQTtJQUFBO0lBQUEsQ0FBQWhDLGNBQUEsR0FBQUMsQ0FBQSxRQUFPLE1BQU11QixPQUFBLENBQVFTLElBQUk7SUFDL0IsTUFBTUMsVUFBQTtJQUFBO0lBQUEsQ0FBQWxDLGNBQUEsR0FBQUMsQ0FBQSxRQUFhRixtQkFBQSxDQUFvQm9DLFNBQVMsQ0FBQ0gsSUFBQTtJQUFBO0lBQUFoQyxjQUFBLEdBQUFDLENBQUE7SUFFakQsSUFBSSxDQUFDaUMsVUFBQSxDQUFXRSxPQUFPLEVBQUU7TUFBQTtNQUFBcEMsY0FBQSxHQUFBNEIsQ0FBQTtNQUFBNUIsY0FBQSxHQUFBQyxDQUFBO01BQ3ZCLE9BQU80QixTQUFBLENBQUFDLFdBQVcsQ0FBQ08sVUFBVSxDQUFDO0lBQ2hDO0lBQUE7SUFBQTtNQUFBckMsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBO0lBRUEsTUFBTTtNQUNKdkIsUUFBUTtNQUNSSyxRQUFRO01BQ1JJLFlBQVk7TUFDWkUsWUFBWTtNQUNaQyxPQUFPO01BQ1BDLGlCQUFpQjtNQUNqQkUsaUJBQWlCO01BQ2pCQyxjQUFjO01BQ2RDO0lBQWMsQ0FDZjtJQUFBO0lBQUEsQ0FBQXRCLGNBQUEsR0FBQUMsQ0FBQSxRQUFHaUMsVUFBQSxDQUFXSSxJQUFJO0lBRW5CLE1BQU1DLFFBQUE7SUFBQTtJQUFBLENBQUF2QyxjQUFBLEdBQUFDLENBQUEsUUFBV3VDLFNBQUEsQ0FBQUMsYUFBYTtJQUU5QjtJQUNBLE1BQU07TUFBRUgsSUFBQSxFQUFNSSxLQUFLO01BQUVDLEtBQUEsRUFBT0M7SUFBVSxDQUFFO0lBQUE7SUFBQSxDQUFBNUMsY0FBQSxHQUFBQyxDQUFBLFFBQUcsTUFBTXNDLFFBQUEsQ0FDOUNNLElBQUksQ0FBQyxpQkFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxXQUFXcEIsSUFBQSxDQUFLcUIsRUFBRSxFQUNyQkMsRUFBRSxDQUFDLE1BQU01QyxRQUFBO0lBQUE7SUFBQUwsY0FBQSxHQUFBQyxDQUFBO0lBRVosSUFBSTJDLFVBQUEsRUFBWTtNQUFBO01BQUE1QyxjQUFBLEdBQUE0QixDQUFBO01BQUE1QixjQUFBLEdBQUFDLENBQUE7TUFDZGlELE9BQUEsQ0FBUVAsS0FBSyxDQUFDLHNCQUFzQkMsVUFBQTtNQUFBO01BQUE1QyxjQUFBLEdBQUFDLENBQUE7TUFDcEMsT0FBTzRCLFNBQUEsQ0FBQUMsV0FBVyxDQUFDcUIsYUFBYSxDQUFDO0lBQ25DO0lBQUE7SUFBQTtNQUFBbkQsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBO0lBQUE1QixjQUFBLEdBQUFDLENBQUE7SUFFQTtJQUFJO0lBQUEsQ0FBQUQsY0FBQSxHQUFBNEIsQ0FBQSxXQUFDYyxLQUFBO0lBQUE7SUFBQSxDQUFBMUMsY0FBQSxHQUFBNEIsQ0FBQSxVQUFTYyxLQUFBLENBQU1VLE1BQU0sS0FBSyxJQUFHO01BQUE7TUFBQXBELGNBQUEsR0FBQTRCLENBQUE7TUFBQTVCLGNBQUEsR0FBQUMsQ0FBQTtNQUNoQyxPQUFPNEIsU0FBQSxDQUFBQyxXQUFXLENBQUN1QixRQUFRLENBQUM7SUFDOUI7SUFBQTtJQUFBO01BQUFyRCxjQUFBLEdBQUE0QixDQUFBO0lBQUE7SUFFQSxNQUFNMEIsT0FBQTtJQUFBO0lBQUEsQ0FBQXRELGNBQUEsR0FBQUMsQ0FBQSxRQUFVO01BQ2RzRCxTQUFBLEVBQVcsRUFBRTtNQUNiQyxPQUFBLEVBQVMsRUFBRTtNQUNYQyxNQUFBLEVBQVEsRUFBRTtNQUNWQyxPQUFBLEVBQVM7UUFDUEMsZUFBQSxFQUFpQnRELFFBQUEsQ0FBUytDLE1BQU07UUFDaENRLFdBQUEsRUFBYWxCLEtBQUEsQ0FBTVUsTUFBTTtRQUN6QlMsZUFBQSxFQUFpQjtRQUNqQkMsYUFBQSxFQUFlO1FBQ2ZDLFlBQUEsRUFBYztRQUNkQyxvQkFBQSxFQUFzQjtRQUN0QkMscUJBQUEsRUFBdUI7TUFDekI7SUFDRjtJQUVBO0lBQ0EsTUFBTUMsT0FBQTtJQUFBO0lBQUEsQ0FBQWxFLGNBQUEsR0FBQUMsQ0FBQSxRQUFVLElBQUlrRSxnQkFBQSxDQUFBQyxlQUFlLENBQUM7TUFDbEMxRCxRQUFBO01BQ0FJLFlBQUE7TUFDQUUsWUFBQTtNQUNBQyxPQUFBO01BQ0FDLGlCQUFBO01BQ0FFO0lBQ0Y7SUFFQTtJQUFBO0lBQUFwQixjQUFBLEdBQUFDLENBQUE7SUFDQSxLQUFLLE1BQU1vRSxJQUFBLElBQVEzQixLQUFBLEVBQU87TUFDeEIsTUFBTTRCLFNBQUE7TUFBQTtNQUFBLENBQUF0RSxjQUFBLEdBQUFDLENBQUEsUUFBWXNFLElBQUEsQ0FBS0MsR0FBRztNQUFBO01BQUF4RSxjQUFBLEdBQUFDLENBQUE7TUFFMUIsSUFBSTtRQUFBO1FBQUFELGNBQUEsR0FBQUMsQ0FBQTtRQUNGO1FBQ0E7UUFBSTtRQUFBLENBQUFELGNBQUEsR0FBQTRCLENBQUEsVUFBQXlDLElBQUEsQ0FBS2QsU0FBUztRQUFBO1FBQUEsQ0FBQXZELGNBQUEsR0FBQTRCLENBQUEsVUFBSSxDQUFDTixjQUFBLEdBQWdCO1VBQUE7VUFBQXRCLGNBQUEsR0FBQTRCLENBQUE7VUFDckMsTUFBTTZDLGNBQUE7VUFBQTtVQUFBLENBQUF6RSxjQUFBLEdBQUFDLENBQUEsUUFBaUIsTUFBTSxJQUFBa0UsZ0JBQUEsQ0FBQU8saUJBQWlCLEVBQUNMLElBQUEsQ0FBS3JCLEVBQUUsRUFBRXJCLElBQUEsQ0FBS3FCLEVBQUU7VUFBQTtVQUFBaEQsY0FBQSxHQUFBQyxDQUFBO1VBRS9ELElBQUl3RSxjQUFBLENBQWVyQixNQUFNLEdBQUcsR0FBRztZQUFBO1lBQUFwRCxjQUFBLEdBQUE0QixDQUFBO1lBQzdCLE1BQU0rQyxLQUFBO1lBQUE7WUFBQSxDQUFBM0UsY0FBQSxHQUFBQyxDQUFBLFFBQVEsSUFBQWtFLGdCQUFBLENBQUFTLGdCQUFnQixFQUFDSCxjQUFBO1lBQUE7WUFBQXpFLGNBQUEsR0FBQUMsQ0FBQTtZQUUvQnFELE9BQUEsQ0FBUUMsU0FBUyxDQUFDc0IsSUFBSSxDQUFDO2NBQ3JCQyxPQUFBLEVBQVNULElBQUEsQ0FBS3JCLEVBQUU7Y0FDaEIrQixTQUFBLEVBQVdWLElBQUEsQ0FBS1csSUFBSTtjQUNwQkMsVUFBQSxFQUFZO2NBQ1pDLFdBQUEsRUFBYVQsY0FBQSxDQUFlckIsTUFBTTtjQUNsQytCLGVBQUEsRUFBaUI7Y0FDakJSO1lBQ0Y7WUFBQTtZQUFBM0UsY0FBQSxHQUFBQyxDQUFBO1lBRUFxRCxPQUFBLENBQVFJLE9BQU8sQ0FBQ00sb0JBQW9CLElBQUlTLGNBQUEsQ0FBZXJCLE1BQU07WUFBQTtZQUFBcEQsY0FBQSxHQUFBQyxDQUFBO1lBQzdEO1VBQ0Y7VUFBQTtVQUFBO1lBQUFELGNBQUEsR0FBQTRCLENBQUE7VUFBQTtRQUNGO1FBQUE7UUFBQTtVQUFBNUIsY0FBQSxHQUFBNEIsQ0FBQTtRQUFBO1FBRUE7UUFDQSxJQUFJd0QsSUFBQTtRQUFBO1FBQUFwRixjQUFBLEdBQUFDLENBQUE7UUFFSjtRQUFJO1FBQUEsQ0FBQUQsY0FBQSxHQUFBNEIsQ0FBQSxVQUFBeUMsSUFBQSxDQUFLZ0IsTUFBTSxLQUFLO1FBQUE7UUFBQSxDQUFBckYsY0FBQSxHQUFBNEIsQ0FBQSxVQUFZeUMsSUFBQSxDQUFLaUIsSUFBSSxHQUFFO1VBQUE7VUFBQXRGLGNBQUEsR0FBQTRCLENBQUE7VUFDekMsTUFBTTtZQUFFVSxJQUFBLEVBQU1pRCxRQUFRO1lBQUU1QyxLQUFBLEVBQU82QztVQUFhLENBQUU7VUFBQTtVQUFBLENBQUF4RixjQUFBLEdBQUFDLENBQUEsUUFBRyxNQUFNc0MsUUFBQSxDQUFTa0QsT0FBTyxDQUNwRTVDLElBQUksQ0FBQyxhQUNMNkMsUUFBUSxDQUFDckIsSUFBQSxDQUFLaUIsSUFBSTtVQUFBO1VBQUF0RixjQUFBLEdBQUFDLENBQUE7VUFFckI7VUFBSTtVQUFBLENBQUFELGNBQUEsR0FBQTRCLENBQUEsV0FBQTRELGFBQUE7VUFBQTtVQUFBLENBQUF4RixjQUFBLEdBQUE0QixDQUFBLFdBQWlCLENBQUMyRCxRQUFBLEdBQVU7WUFBQTtZQUFBdkYsY0FBQSxHQUFBNEIsQ0FBQTtZQUFBNUIsY0FBQSxHQUFBQyxDQUFBO1lBQzlCcUQsT0FBQSxDQUFRRyxNQUFNLENBQUNvQixJQUFJLENBQUM7Y0FDbEJDLE9BQUEsRUFBU1QsSUFBQSxDQUFLckIsRUFBRTtjQUNoQitCLFNBQUEsRUFBV1YsSUFBQSxDQUFLVyxJQUFJO2NBQ3BCckMsS0FBQSxFQUFPO1lBQ1Q7WUFBQTtZQUFBM0MsY0FBQSxHQUFBQyxDQUFBO1lBQ0E7VUFDRjtVQUFBO1VBQUE7WUFBQUQsY0FBQSxHQUFBNEIsQ0FBQTtVQUFBO1VBRUEsTUFBTStELE1BQUE7VUFBQTtVQUFBLENBQUEzRixjQUFBLEdBQUFDLENBQUEsUUFBUzJGLE1BQUEsQ0FBTy9DLElBQUksQ0FBQyxNQUFNMEMsUUFBQSxDQUFTTSxXQUFXO1VBQ3JELE1BQU1DLGdCQUFBO1VBQUE7VUFBQSxDQUFBOUYsY0FBQSxHQUFBQyxDQUFBLFFBQW1CLE1BQU0sSUFBQThGLGtCQUFBLENBQUFDLHFCQUFxQixFQUFDTCxNQUFBLEVBQVF0QixJQUFBLENBQUs0QixTQUFTLEVBQUU1QixJQUFBLENBQUtXLElBQUk7VUFBQTtVQUFBaEYsY0FBQSxHQUFBQyxDQUFBO1VBQ3RGbUYsSUFBQSxHQUFPVSxnQkFBQSxDQUFpQlYsSUFBSTtRQUM5QixPQUFPO1VBQUE7VUFBQXBGLGNBQUEsR0FBQTRCLENBQUE7VUFBQTVCLGNBQUEsR0FBQUMsQ0FBQTtVQUNMcUQsT0FBQSxDQUFRRSxPQUFPLENBQUNxQixJQUFJLENBQUM7WUFDbkJDLE9BQUEsRUFBU1QsSUFBQSxDQUFLckIsRUFBRTtZQUNoQitCLFNBQUEsRUFBV1YsSUFBQSxDQUFLVyxJQUFJO1lBQ3BCa0IsTUFBQSxFQUFRO1VBQ1Y7VUFBQTtVQUFBbEcsY0FBQSxHQUFBQyxDQUFBO1VBQ0E7UUFDRjtRQUFBO1FBQUFELGNBQUEsR0FBQUMsQ0FBQTtRQUVBLElBQUksQ0FBQ21GLElBQUEsQ0FBS2UsSUFBSSxJQUFJO1VBQUE7VUFBQW5HLGNBQUEsR0FBQTRCLENBQUE7VUFBQTVCLGNBQUEsR0FBQUMsQ0FBQTtVQUNoQnFELE9BQUEsQ0FBUUUsT0FBTyxDQUFDcUIsSUFBSSxDQUFDO1lBQ25CQyxPQUFBLEVBQVNULElBQUEsQ0FBS3JCLEVBQUU7WUFDaEIrQixTQUFBLEVBQVdWLElBQUEsQ0FBS1csSUFBSTtZQUNwQmtCLE1BQUEsRUFBUTtVQUNWO1VBQUE7VUFBQWxHLGNBQUEsR0FBQUMsQ0FBQTtVQUNBO1FBQ0Y7UUFBQTtRQUFBO1VBQUFELGNBQUEsR0FBQTRCLENBQUE7UUFBQTtRQUVBO1FBQ0EsTUFBTXdFLE1BQUE7UUFBQTtRQUFBLENBQUFwRyxjQUFBLEdBQUFDLENBQUEsUUFBU2lFLE9BQUEsQ0FBUW1DLFlBQVksQ0FBQ2pCLElBQUEsRUFBTWYsSUFBQSxDQUFLckIsRUFBRSxFQUFFcUIsSUFBQSxDQUFLVyxJQUFJLEVBQUVYLElBQUEsQ0FBSzRCLFNBQVMsRUFBRXRFLElBQUEsQ0FBS3FCLEVBQUU7UUFFckY7UUFBQTtRQUFBaEQsY0FBQSxHQUFBQyxDQUFBO1FBQ0EsSUFBSW9CLGNBQUEsRUFBZ0I7VUFBQTtVQUFBckIsY0FBQSxHQUFBNEIsQ0FBQTtVQUFBNUIsY0FBQSxHQUFBQyxDQUFBO1VBQ2xCLElBQUk7WUFBQTtZQUFBRCxjQUFBLEdBQUFDLENBQUE7WUFDRixNQUFNLElBQUFrRSxnQkFBQSxDQUFBbUMsbUJBQW1CLEVBQUNGLE1BQUEsRUFBUXpFLElBQUEsQ0FBS3FCLEVBQUUsRUFBRXFCLElBQUEsQ0FBS3JCLEVBQUU7WUFFbEQ7WUFBQTtZQUFBaEQsY0FBQSxHQUFBQyxDQUFBO1lBQ0EsTUFBTXNDLFFBQUEsQ0FDSE0sSUFBSSxDQUFDLGlCQUNMMEQsTUFBTSxDQUFDO2NBQ05oRCxTQUFBLEVBQVc7Y0FDWGlELGlCQUFBLEVBQW1CO2NBQ25CQyxRQUFBLEVBQVU7Z0JBQ1IsR0FBR3BDLElBQUEsQ0FBS29DLFFBQVE7Z0JBQ2hCdkIsV0FBQSxFQUFha0IsTUFBQSxDQUFPaEQsTUFBTTtnQkFDMUJzRCxpQkFBQSxFQUFtQmhHLFFBQUE7Z0JBQ25CaUcsY0FBQSxFQUFnQjdGLFlBQUE7Z0JBQ2hCOEYsY0FBQSxFQUFnQjVGLFlBQUE7Z0JBQ2hCQyxPQUFBO2dCQUNBNEYsa0JBQUEsRUFBb0IzRixpQkFBQTtnQkFDcEI0RixrQkFBQSxFQUFvQjFGLGlCQUFBO2dCQUNwQjJGLFlBQUEsRUFBYyxJQUFJeEMsSUFBQSxHQUFPeUMsV0FBVztjQUN0QztjQUNBQyxVQUFBLEVBQVksSUFBSTFDLElBQUEsR0FBT3lDLFdBQVc7WUFDcEMsR0FDQ2pFLEVBQUUsQ0FBQyxNQUFNc0IsSUFBQSxDQUFLckIsRUFBRSxFQUNoQkQsRUFBRSxDQUFDLFdBQVdwQixJQUFBLENBQUtxQixFQUFFO1VBRTFCLEVBQUUsT0FBT2tFLE9BQUEsRUFBUztZQUFBO1lBQUFsSCxjQUFBLEdBQUFDLENBQUE7WUFDaEJpRCxPQUFBLENBQVFQLEtBQUssQ0FBQyxnQ0FBZ0MwQixJQUFBLENBQUtyQixFQUFFLEdBQUcsRUFBRWtFLE9BQUE7WUFDMUQ7VUFDRjtRQUNGO1FBQUE7UUFBQTtVQUFBbEgsY0FBQSxHQUFBNEIsQ0FBQTtRQUFBO1FBRUEsTUFBTXVGLGNBQUE7UUFBQTtRQUFBLENBQUFuSCxjQUFBLEdBQUFDLENBQUEsUUFBaUJzRSxJQUFBLENBQUtDLEdBQUcsS0FBS0YsU0FBQTtRQUNwQyxNQUFNSyxLQUFBO1FBQUE7UUFBQSxDQUFBM0UsY0FBQSxHQUFBQyxDQUFBLFFBQVEsSUFBQWtFLGdCQUFBLENBQUFTLGdCQUFnQixFQUFDd0IsTUFBQTtRQUFBO1FBQUFwRyxjQUFBLEdBQUFDLENBQUE7UUFFL0JxRCxPQUFBLENBQVFDLFNBQVMsQ0FBQ3NCLElBQUksQ0FBQztVQUNyQkMsT0FBQSxFQUFTVCxJQUFBLENBQUtyQixFQUFFO1VBQ2hCK0IsU0FBQSxFQUFXVixJQUFBLENBQUtXLElBQUk7VUFDcEJDLFVBQUEsRUFBWTtVQUNaQyxXQUFBLEVBQWFrQixNQUFBLENBQU9oRCxNQUFNO1VBQzFCK0IsZUFBQSxFQUFpQmdDLGNBQUE7VUFDakJDLFdBQUEsRUFBYWhDLElBQUEsQ0FBS2hDLE1BQU07VUFDeEJ1QjtRQUNGO1FBQUE7UUFBQTNFLGNBQUEsR0FBQUMsQ0FBQTtRQUVBcUQsT0FBQSxDQUFRSSxPQUFPLENBQUNNLG9CQUFvQixJQUFJb0MsTUFBQSxDQUFPaEQsTUFBTTtRQUFBO1FBQUFwRCxjQUFBLEdBQUFDLENBQUE7UUFDckRxRCxPQUFBLENBQVFJLE9BQU8sQ0FBQ08scUJBQXFCLElBQUlrRCxjQUFBO01BRTNDLEVBQUUsT0FBT3hFLEtBQUEsRUFBTztRQUFBO1FBQUEzQyxjQUFBLEdBQUFDLENBQUE7UUFDZGlELE9BQUEsQ0FBUVAsS0FBSyxDQUFDLHlCQUF5QjBCLElBQUEsQ0FBS3JCLEVBQUUsR0FBRyxFQUFFTCxLQUFBO1FBQUE7UUFBQTNDLGNBQUEsR0FBQUMsQ0FBQTtRQUNuRHFELE9BQUEsQ0FBUUcsTUFBTSxDQUFDb0IsSUFBSSxDQUFDO1VBQ2xCQyxPQUFBLEVBQVNULElBQUEsQ0FBS3JCLEVBQUU7VUFDaEIrQixTQUFBLEVBQVdWLElBQUEsQ0FBS1csSUFBSTtVQUNwQnJDLEtBQUEsRUFBT0EsS0FBQSxZQUFpQjBFLEtBQUE7VUFBQTtVQUFBLENBQUFySCxjQUFBLEdBQUE0QixDQUFBLFdBQVFlLEtBQUEsQ0FBTTJFLE9BQU87VUFBQTtVQUFBLENBQUF0SCxjQUFBLEdBQUE0QixDQUFBLFdBQUc7UUFDbEQ7TUFDRjtJQUNGO0lBRUE7SUFBQTtJQUFBNUIsY0FBQSxHQUFBQyxDQUFBO0lBQ0FxRCxPQUFBLENBQVFJLE9BQU8sQ0FBQ0csZUFBZSxHQUFHUCxPQUFBLENBQVFDLFNBQVMsQ0FBQ0gsTUFBTTtJQUFBO0lBQUFwRCxjQUFBLEdBQUFDLENBQUE7SUFDMURxRCxPQUFBLENBQVFJLE9BQU8sQ0FBQ0ksYUFBYSxHQUFHUixPQUFBLENBQVFFLE9BQU8sQ0FBQ0osTUFBTTtJQUFBO0lBQUFwRCxjQUFBLEdBQUFDLENBQUE7SUFDdERxRCxPQUFBLENBQVFJLE9BQU8sQ0FBQ0ssWUFBWSxHQUFHVCxPQUFBLENBQVFHLE1BQU0sQ0FBQ0wsTUFBTTtJQUVwRDtJQUFBO0lBQUFwRCxjQUFBLEdBQUFDLENBQUE7SUFDQSxJQUFBc0gsT0FBQSxDQUFBQyxXQUFXLEVBQUM3RixJQUFBLENBQUtxQixFQUFFLEVBQUUscUJBQXFCLGtCQUFrQjtNQUMxRHlFLGVBQUEsRUFBaUJwSCxRQUFBLENBQVMrQyxNQUFNO01BQ2hDc0UsZUFBQSxFQUFpQnBFLE9BQUEsQ0FBUUksT0FBTyxDQUFDRyxlQUFlO01BQ2hEOEQsYUFBQSxFQUFlckUsT0FBQSxDQUFRSSxPQUFPLENBQUNJLGFBQWE7TUFDNUM4RCxZQUFBLEVBQWN0RSxPQUFBLENBQVFJLE9BQU8sQ0FBQ0ssWUFBWTtNQUMxQ0Msb0JBQUEsRUFBc0JWLE9BQUEsQ0FBUUksT0FBTyxDQUFDTSxvQkFBb0I7TUFDMURDLHFCQUFBLEVBQXVCWCxPQUFBLENBQVFJLE9BQU8sQ0FBQ08scUJBQXFCO01BQzVEdkQsUUFBQTtNQUNBaUcsY0FBQSxFQUFnQjdGLFlBQUE7TUFDaEIrRyxnQkFBQSxFQUFrQnhHO0lBQ3BCO0lBQUE7SUFBQXJCLGNBQUEsR0FBQUMsQ0FBQTtJQUVBLE9BQU80QixTQUFBLENBQUFDLFdBQVcsQ0FBQ00sT0FBTyxDQUFDa0IsT0FBQSxFQUN6Qiw2QkFBNkJBLE9BQUEsQ0FBUUksT0FBTyxDQUFDRyxlQUFlLGVBQWVQLE9BQUEsQ0FBUUksT0FBTyxDQUFDSSxhQUFhLGFBQWFSLE9BQUEsQ0FBUUksT0FBTyxDQUFDSyxZQUFZLFNBQVM7RUFHOUosRUFBRSxPQUFPcEIsS0FBQSxFQUFPO0lBQUE7SUFBQTNDLGNBQUEsR0FBQUMsQ0FBQTtJQUNkaUQsT0FBQSxDQUFRUCxLQUFLLENBQUMsaUNBQWlDQSxLQUFBO0lBQUE7SUFBQTNDLGNBQUEsR0FBQUMsQ0FBQTtJQUMvQyxPQUFPNEIsU0FBQSxDQUFBQyxXQUFXLENBQUNxQixhQUFhLENBQUM7RUFDbkM7QUFDRjtBQUdPLE1BQU1yRCxJQUFBO0FBQUE7QUFBQSxDQUFBRSxjQUFBLEdBQUFDLENBQUEsUUFBTyxJQUFBNkgsY0FBQSxDQUFBQyx5QkFBeUIsRUFBQ3hHLG9CQUFBLEVBQXNCO0VBQ2xFeUcsU0FBQSxFQUFXO0lBQ1QsR0FBR0MsVUFBQSxDQUFBQyxnQkFBZ0IsQ0FBQ0MsU0FBUztJQUM3QkMsV0FBQSxFQUFhO0VBQ2Y7RUFDQUMsT0FBQSxFQUFTO0lBQ1BDLE9BQUEsRUFBUztJQUNUQyxXQUFBLEVBQWE7RUFDZjtBQUNGIiwiaWdub3JlTGlzdCI6W119