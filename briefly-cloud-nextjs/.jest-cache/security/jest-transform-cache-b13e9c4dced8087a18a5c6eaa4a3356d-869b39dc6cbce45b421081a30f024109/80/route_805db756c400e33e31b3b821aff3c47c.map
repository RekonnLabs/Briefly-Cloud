{"version":3,"names":["cov_22dgr0as7a","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","GET","POST","CreateFeatureFlagSchema","_zod","z","object","string","min","max","description","enabled","boolean","default","rollout_percentage","number","user_tiers","array","enum","beta_users","ab_test_config","test_name","variants","config","record","any","traffic_split","metrics","start_date","datetime","end_date","optional","CheckFeatureSchema","feature_name","request","session","_nextauth","getServerSession","_auth","authOptions","user","email","_apiutils","createErrorResponse","isAdmin","endsWith","flags","_featureflags","featureFlagService","getAllFeatureFlags","createApiResponse","total","length","error","console","body","json","validatedData","parse","flag","createFeatureFlag","ZodError","validation_errors","errors"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\feature-flags\\route.ts"],"sourcesContent":["/**\r\n * Feature Flags API Routes\r\n * \r\n * Provides endpoints for managing feature flags, A/B tests, and beta users\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { getServerSession } from 'next-auth';\r\nimport { authOptions } from '@/app/lib/auth';\r\nimport { featureFlagService, isFeatureEnabled, UserContext } from '@/app/lib/feature-flags';\r\nimport { createApiResponse, createErrorResponse } from '@/app/lib/api-utils';\r\nimport { z } from 'zod';\r\n\r\n// Validation schemas\r\nconst CreateFeatureFlagSchema = z.object({\r\n  name: z.string().min(1).max(100),\r\n  description: z.string().max(500),\r\n  enabled: z.boolean().default(false),\r\n  rollout_percentage: z.number().min(0).max(100).default(0),\r\n  user_tiers: z.array(z.enum(['free', 'pro', 'pro_byok'])).default([]),\r\n  beta_users: z.array(z.string()).default([]),\r\n  ab_test_config: z.object({\r\n    test_name: z.string(),\r\n    variants: z.array(z.object({\r\n      name: z.string(),\r\n      description: z.string(),\r\n      config: z.record(z.any())\r\n    })),\r\n    traffic_split: z.record(z.number()),\r\n    metrics: z.array(z.string()),\r\n    start_date: z.string().datetime(),\r\n    end_date: z.string().datetime().optional()\r\n  }).optional()\r\n});\r\n\r\nconst CheckFeatureSchema = z.object({\r\n  feature_name: z.string().min(1)\r\n});\r\n\r\n/**\r\n * GET /api/feature-flags\r\n * Get all feature flags (admin only)\r\n */\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    \r\n    if (!session?.user?.email) {\r\n      return createErrorResponse('Unauthorized', 401);\r\n    }\r\n\r\n    // Check if user is admin (you might want to implement proper admin role checking)\r\n    const isAdmin = session.user.email.endsWith('@rekonnlabs.com'); // Adjust as needed\r\n    \r\n    if (!isAdmin) {\r\n      return createErrorResponse('Admin access required', 403);\r\n    }\r\n\r\n    const flags = await featureFlagService.getAllFeatureFlags();\r\n    \r\n    return createApiResponse({\r\n      flags,\r\n      total: flags.length\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error fetching feature flags:', error);\r\n    return createErrorResponse('Failed to fetch feature flags', 500);\r\n  }\r\n}\r\n\r\n/**\r\n * POST /api/feature-flags\r\n * Create a new feature flag (admin only)\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    \r\n    if (!session?.user?.email) {\r\n      return createErrorResponse('Unauthorized', 401);\r\n    }\r\n\r\n    // Check if user is admin\r\n    const isAdmin = session.user.email.endsWith('@rekonnlabs.com');\r\n    \r\n    if (!isAdmin) {\r\n      return createErrorResponse('Admin access required', 403);\r\n    }\r\n\r\n    const body = await request.json();\r\n    const validatedData = CreateFeatureFlagSchema.parse(body);\r\n\r\n    const flag = await featureFlagService.createFeatureFlag(validatedData);\r\n    \r\n    return createApiResponse(flag, 201);\r\n\r\n  } catch (error) {\r\n    if (error instanceof z.ZodError) {\r\n      return createErrorResponse('Invalid request data', 400, {\r\n        validation_errors: error.errors\r\n      });\r\n    }\r\n\r\n    console.error('Error creating feature flag:', error);\r\n    return createErrorResponse('Failed to create feature flag', 500);\r\n  }\r\n}"],"mappings":"AAAA;;;;GAIC;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;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","ignoreList":[]}