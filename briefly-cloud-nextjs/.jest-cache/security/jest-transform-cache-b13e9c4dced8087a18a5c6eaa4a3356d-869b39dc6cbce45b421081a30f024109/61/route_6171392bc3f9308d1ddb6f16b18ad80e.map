{"version":3,"names":["cov_26vf1c17bc","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","DELETE","GET","PUT","getProfileHandler","request","context","user","_server","NextResponse","json","success","id","email","full_name","avatar_url","subscription_tier","subscription_status","usage_count","usage_limit","features_enabled","permissions","last_login_at","created_at","error","console","message","status","updateProfileHandler","body","allowedFields","updateData","field","Object","keys","length","data","updatedUser","_supabase","supabaseAdmin","from","update","updated_at","Date","toISOString","eq","select","single","insert","user_id","action","resource_type","resource_id","old_values","preferences","new_values","severity","chat_messages_count","chat_messages_limit","marketing_consent","analytics_consent","deleteProfileHandler","deletionError","deletion_type","reason","_authmiddleware","withAuth"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\auth\\profile\\route.ts"],"sourcesContent":["/**\r\n * User Profile API Route for Supabase Auth\r\n * \r\n * This route provides user profile information for authenticated users\r\n * and handles profile updates.\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport { withAuth, type AuthContext } from '@/app/lib/auth/auth-middleware'\r\nimport { supabaseAdmin } from '@/app/lib/supabase'\r\n\r\n// GET /api/auth/profile - Get current user profile\r\nasync function getProfileHandler(request: NextRequest, context: AuthContext): Promise<NextResponse> {\r\n  try {\r\n    const { user } = context\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      user: {\r\n        id: user.id,\r\n        email: user.email,\r\n        full_name: user.full_name,\r\n        avatar_url: user.avatar_url,\r\n        subscription_tier: user.subscription_tier,\r\n        subscription_status: user.subscription_status,\r\n        usage_count: user.usage_count,\r\n        usage_limit: user.usage_limit,\r\n        features_enabled: user.features_enabled,\r\n        permissions: user.permissions,\r\n        last_login_at: user.last_login_at,\r\n        created_at: user.created_at\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error('Error fetching user profile:', error)\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: 'PROFILE_FETCH_ERROR',\r\n        message: 'Failed to fetch user profile'\r\n      },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n// PUT /api/auth/profile - Update user profile\r\nasync function updateProfileHandler(request: NextRequest, context: AuthContext): Promise<NextResponse> {\r\n  try {\r\n    const { user } = context\r\n    const body = await request.json()\r\n\r\n    // Validate allowed fields for update\r\n    const allowedFields = ['full_name', 'preferences', 'marketing_consent', 'analytics_consent']\r\n    const updateData: any = {}\r\n\r\n    for (const field of allowedFields) {\r\n      if (body[field] !== undefined) {\r\n        updateData[field] = body[field]\r\n      }\r\n    }\r\n\r\n    if (Object.keys(updateData).length === 0) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: 'NO_VALID_FIELDS',\r\n          message: 'No valid fields provided for update'\r\n        },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    // Update user profile\r\n    const { data: updatedUser, error } = await supabaseAdmin\r\n      .from('app.users')\r\n      .update({\r\n        ...updateData,\r\n        updated_at: new Date().toISOString()\r\n      })\r\n      .eq('id', user.id)\r\n      .select(`\r\n        id,\r\n        email,\r\n        full_name,\r\n        avatar_url,\r\n        subscription_tier,\r\n        subscription_status,\r\n        chat_messages_count,\r\n        chat_messages_limit,\r\n        features_enabled,\r\n        permissions,\r\n        preferences,\r\n        marketing_consent,\r\n        analytics_consent,\r\n        last_login_at,\r\n        created_at,\r\n        updated_at\r\n      `)\r\n      .single()\r\n\r\n    if (error) {\r\n      throw error\r\n    }\r\n\r\n    // Log profile update\r\n    await supabaseAdmin\r\n      .from('private.audit_logs')\r\n      .insert({\r\n        user_id: user.id,\r\n        action: 'USER_PROFILE_UPDATE',\r\n        resource_type: 'user_profile',\r\n        resource_id: user.id,\r\n        old_values: { \r\n          full_name: user.full_name,\r\n          preferences: user.preferences || {}\r\n        },\r\n        new_values: updateData,\r\n        severity: 'info'\r\n      })\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      user: {\r\n        id: updatedUser.id,\r\n        email: updatedUser.email,\r\n        full_name: updatedUser.full_name,\r\n        avatar_url: updatedUser.avatar_url,\r\n        subscription_tier: updatedUser.subscription_tier,\r\n        subscription_status: updatedUser.subscription_status,\r\n        usage_count: updatedUser.chat_messages_count || 0,\r\n        usage_limit: updatedUser.chat_messages_limit || 100,\r\n        features_enabled: updatedUser.features_enabled || {},\r\n        permissions: updatedUser.permissions || {},\r\n        preferences: updatedUser.preferences || {},\r\n        marketing_consent: updatedUser.marketing_consent,\r\n        analytics_consent: updatedUser.analytics_consent,\r\n        last_login_at: updatedUser.last_login_at,\r\n        created_at: updatedUser.created_at\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error('Error updating user profile:', error)\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: 'PROFILE_UPDATE_ERROR',\r\n        message: 'Failed to update user profile'\r\n      },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n// DELETE /api/auth/profile - Delete user account (GDPR compliance)\r\nasync function deleteProfileHandler(request: NextRequest, context: AuthContext): Promise<NextResponse> {\r\n  try {\r\n    const { user } = context\r\n\r\n    // Create data deletion request\r\n    const { error: deletionError } = await supabaseAdmin\r\n      .from('app.data_deletion_requests')\r\n      .insert({\r\n        user_id: user.id,\r\n        status: 'pending',\r\n        deletion_type: 'account',\r\n        reason: 'User requested account deletion'\r\n      })\r\n\r\n    if (deletionError) {\r\n      throw deletionError\r\n    }\r\n\r\n    // Log account deletion request\r\n    await supabaseAdmin\r\n      .from('private.audit_logs')\r\n      .insert({\r\n        user_id: user.id,\r\n        action: 'ACCOUNT_DELETION_REQUESTED',\r\n        resource_type: 'user_account',\r\n        resource_id: user.id,\r\n        severity: 'warning'\r\n      })\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Account deletion request submitted. Your account will be deleted within 30 days.'\r\n    })\r\n  } catch (error) {\r\n    console.error('Error processing account deletion:', error)\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: 'DELETION_REQUEST_ERROR',\r\n        message: 'Failed to process account deletion request'\r\n      },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n// Export handlers with authentication middleware\r\nexport const GET = withAuth(getProfileHandler)\r\nexport const PUT = withAuth(updateProfileHandler)\r\nexport const DELETE = withAuth(deleteProfileHandler)"],"mappings":"AAAA;;;;;GAKC;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;IAAA;IAAAE,KAAA;MAAA;QAAAC,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;IAAA;IAAAO,SAAA;MAAA;QAAAD,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;IAAA;IAAAW,CAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,cAAA;MAAAC,OAAA;MAAAC,OAAA;MAAAC,cAAA;MAAAC,KAAA;MAAAC,QAAA;IAAA;IAAAC,eAAA;IAAA3B,IAAA;EAAA;EAAA,IAAA4B,QAAA,GAAA3B,MAAA,CAAAE,GAAA,MAAAF,MAAA,CAAAE,GAAA;EAAA,KAAAyB,QAAA,CAAA7B,IAAA,KAAA6B,QAAA,CAAA7B,IAAA,EAAAC,IAAA,KAAAA,IAAA;IAAA4B,QAAA,CAAA7B,IAAA,IAAAK,YAAA;EAAA;EAAA,IAAAyB,cAAA,GAAAD,QAAA,CAAA7B,IAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAuMY+B,OAAA;IAAA;IAAAhC,cAAA,GAAAqB,CAAA;IAAArB,cAAA,GAAAoB,CAAA;WAAAY,MAAA;;MAFAC,IAAA;IAAA;IAAAjC,cAAA,GAAAqB,CAAA;IAAArB,cAAA,GAAAoB,CAAA;WAAAa,GAAA;;MACAC,IAAA;IAAA;IAAAlC,cAAA,GAAAqB,CAAA;IAAArB,cAAA,GAAAoB,CAAA;WAAAc,GAAA;;;;;kCApM6B;;;kCACC;;;kCACb;AAE9B;AACA,eAAeC,kBAAkBC,OAAoB,EAAEC,OAAoB;EAAA;EAAArC,cAAA,GAAAqB,CAAA;EAAArB,cAAA,GAAAoB,CAAA;EACzE,IAAI;IACF,MAAM;MAAEkB;IAAI,CAAE;IAAA;IAAA,CAAAtC,cAAA,GAAAoB,CAAA,QAAGiB,OAAA;IAAA;IAAArC,cAAA,GAAAoB,CAAA;IAEjB,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CAAC;MACvBC,OAAA,EAAS;MACTJ,IAAA,EAAM;QACJK,EAAA,EAAIL,IAAA,CAAKK,EAAE;QACXC,KAAA,EAAON,IAAA,CAAKM,KAAK;QACjBC,SAAA,EAAWP,IAAA,CAAKO,SAAS;QACzBC,UAAA,EAAYR,IAAA,CAAKQ,UAAU;QAC3BC,iBAAA,EAAmBT,IAAA,CAAKS,iBAAiB;QACzCC,mBAAA,EAAqBV,IAAA,CAAKU,mBAAmB;QAC7CC,WAAA,EAAaX,IAAA,CAAKW,WAAW;QAC7BC,WAAA,EAAaZ,IAAA,CAAKY,WAAW;QAC7BC,gBAAA,EAAkBb,IAAA,CAAKa,gBAAgB;QACvCC,WAAA,EAAad,IAAA,CAAKc,WAAW;QAC7BC,aAAA,EAAef,IAAA,CAAKe,aAAa;QACjCC,UAAA,EAAYhB,IAAA,CAAKgB;MACnB;IACF;EACF,EAAE,OAAOC,KAAA,EAAO;IAAA;IAAAvD,cAAA,GAAAoB,CAAA;IACdoC,OAAA,CAAQD,KAAK,CAAC,gCAAgCA,KAAA;IAAA;IAAAvD,cAAA,GAAAoB,CAAA;IAC9C,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;MACEC,OAAA,EAAS;MACTa,KAAA,EAAO;MACPE,OAAA,EAAS;IACX,GACA;MAAEC,MAAA,EAAQ;IAAI;EAElB;AACF;AAEA;AACA,eAAeC,qBAAqBvB,OAAoB,EAAEC,OAAoB;EAAA;EAAArC,cAAA,GAAAqB,CAAA;EAAArB,cAAA,GAAAoB,CAAA;EAC5E,IAAI;IACF,MAAM;MAAEkB;IAAI,CAAE;IAAA;IAAA,CAAAtC,cAAA,GAAAoB,CAAA,QAAGiB,OAAA;IACjB,MAAMuB,IAAA;IAAA;IAAA,CAAA5D,cAAA,GAAAoB,CAAA,QAAO,MAAMgB,OAAA,CAAQK,IAAI;IAE/B;IACA,MAAMoB,aAAA;IAAA;IAAA,CAAA7D,cAAA,GAAAoB,CAAA,QAAgB,CAAC,aAAa,eAAe,qBAAqB,oBAAoB;IAC5F,MAAM0C,UAAA;IAAA;IAAA,CAAA9D,cAAA,GAAAoB,CAAA,QAAkB,CAAC;IAAA;IAAApB,cAAA,GAAAoB,CAAA;IAEzB,KAAK,MAAM2C,KAAA,IAASF,aAAA,EAAe;MAAA;MAAA7D,cAAA,GAAAoB,CAAA;MACjC,IAAIwC,IAAI,CAACG,KAAA,CAAM,KAAK5C,SAAA,EAAW;QAAA;QAAAnB,cAAA,GAAAsB,CAAA;QAAAtB,cAAA,GAAAoB,CAAA;QAC7B0C,UAAU,CAACC,KAAA,CAAM,GAAGH,IAAI,CAACG,KAAA,CAAM;MACjC;MAAA;MAAA;QAAA/D,cAAA,GAAAsB,CAAA;MAAA;IACF;IAAA;IAAAtB,cAAA,GAAAoB,CAAA;IAEA,IAAI4C,MAAA,CAAOC,IAAI,CAACH,UAAA,EAAYI,MAAM,KAAK,GAAG;MAAA;MAAAlE,cAAA,GAAAsB,CAAA;MAAAtB,cAAA,GAAAoB,CAAA;MACxC,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;QACEC,OAAA,EAAS;QACTa,KAAA,EAAO;QACPE,OAAA,EAAS;MACX,GACA;QAAEC,MAAA,EAAQ;MAAI;IAElB;IAAA;IAAA;MAAA1D,cAAA,GAAAsB,CAAA;IAAA;IAEA;IACA,MAAM;MAAE6C,IAAA,EAAMC,WAAW;MAAEb;IAAK,CAAE;IAAA;IAAA,CAAAvD,cAAA,GAAAoB,CAAA,QAAG,MAAMiD,SAAA,CAAAC,aAAa,CACrDC,IAAI,CAAC,aACLC,MAAM,CAAC;MACN,GAAGV,UAAU;MACbW,UAAA,EAAY,IAAIC,IAAA,GAAOC,WAAW;IACpC,GACCC,EAAE,CAAC,MAAMtC,IAAA,CAAKK,EAAE,EAChBkC,MAAM,CAAC;;;;;;;;;;;;;;;;;OAiBP,EACAC,MAAM;IAAA;IAAA9E,cAAA,GAAAoB,CAAA;IAET,IAAImC,KAAA,EAAO;MAAA;MAAAvD,cAAA,GAAAsB,CAAA;MAAAtB,cAAA,GAAAoB,CAAA;MACT,MAAMmC,KAAA;IACR;IAAA;IAAA;MAAAvD,cAAA,GAAAsB,CAAA;IAAA;IAEA;IAAAtB,cAAA,GAAAoB,CAAA;IACA,MAAMiD,SAAA,CAAAC,aAAa,CAChBC,IAAI,CAAC,sBACLQ,MAAM,CAAC;MACNC,OAAA,EAAS1C,IAAA,CAAKK,EAAE;MAChBsC,MAAA,EAAQ;MACRC,aAAA,EAAe;MACfC,WAAA,EAAa7C,IAAA,CAAKK,EAAE;MACpByC,UAAA,EAAY;QACVvC,SAAA,EAAWP,IAAA,CAAKO,SAAS;QACzBwC,WAAA;QAAa;QAAA,CAAArF,cAAA,GAAAsB,CAAA,UAAAgB,IAAA,CAAK+C,WAAW;QAAA;QAAA,CAAArF,cAAA,GAAAsB,CAAA,UAAI,CAAC;MACpC;MACAgE,UAAA,EAAYxB,UAAA;MACZyB,QAAA,EAAU;IACZ;IAAA;IAAAvF,cAAA,GAAAoB,CAAA;IAEF,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CAAC;MACvBC,OAAA,EAAS;MACTJ,IAAA,EAAM;QACJK,EAAA,EAAIyB,WAAA,CAAYzB,EAAE;QAClBC,KAAA,EAAOwB,WAAA,CAAYxB,KAAK;QACxBC,SAAA,EAAWuB,WAAA,CAAYvB,SAAS;QAChCC,UAAA,EAAYsB,WAAA,CAAYtB,UAAU;QAClCC,iBAAA,EAAmBqB,WAAA,CAAYrB,iBAAiB;QAChDC,mBAAA,EAAqBoB,WAAA,CAAYpB,mBAAmB;QACpDC,WAAA;QAAa;QAAA,CAAAjD,cAAA,GAAAsB,CAAA,UAAA8C,WAAA,CAAYoB,mBAAmB;QAAA;QAAA,CAAAxF,cAAA,GAAAsB,CAAA,UAAI;QAChD4B,WAAA;QAAa;QAAA,CAAAlD,cAAA,GAAAsB,CAAA,UAAA8C,WAAA,CAAYqB,mBAAmB;QAAA;QAAA,CAAAzF,cAAA,GAAAsB,CAAA,UAAI;QAChD6B,gBAAA;QAAkB;QAAA,CAAAnD,cAAA,GAAAsB,CAAA,UAAA8C,WAAA,CAAYjB,gBAAgB;QAAA;QAAA,CAAAnD,cAAA,GAAAsB,CAAA,UAAI,CAAC;QACnD8B,WAAA;QAAa;QAAA,CAAApD,cAAA,GAAAsB,CAAA,UAAA8C,WAAA,CAAYhB,WAAW;QAAA;QAAA,CAAApD,cAAA,GAAAsB,CAAA,UAAI,CAAC;QACzC+D,WAAA;QAAa;QAAA,CAAArF,cAAA,GAAAsB,CAAA,UAAA8C,WAAA,CAAYiB,WAAW;QAAA;QAAA,CAAArF,cAAA,GAAAsB,CAAA,UAAI,CAAC;QACzCoE,iBAAA,EAAmBtB,WAAA,CAAYsB,iBAAiB;QAChDC,iBAAA,EAAmBvB,WAAA,CAAYuB,iBAAiB;QAChDtC,aAAA,EAAee,WAAA,CAAYf,aAAa;QACxCC,UAAA,EAAYc,WAAA,CAAYd;MAC1B;IACF;EACF,EAAE,OAAOC,KAAA,EAAO;IAAA;IAAAvD,cAAA,GAAAoB,CAAA;IACdoC,OAAA,CAAQD,KAAK,CAAC,gCAAgCA,KAAA;IAAA;IAAAvD,cAAA,GAAAoB,CAAA;IAC9C,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;MACEC,OAAA,EAAS;MACTa,KAAA,EAAO;MACPE,OAAA,EAAS;IACX,GACA;MAAEC,MAAA,EAAQ;IAAI;EAElB;AACF;AAEA;AACA,eAAekC,qBAAqBxD,OAAoB,EAAEC,OAAoB;EAAA;EAAArC,cAAA,GAAAqB,CAAA;EAAArB,cAAA,GAAAoB,CAAA;EAC5E,IAAI;IACF,MAAM;MAAEkB;IAAI,CAAE;IAAA;IAAA,CAAAtC,cAAA,GAAAoB,CAAA,QAAGiB,OAAA;IAEjB;IACA,MAAM;MAAEkB,KAAA,EAAOsC;IAAa,CAAE;IAAA;IAAA,CAAA7F,cAAA,GAAAoB,CAAA,QAAG,MAAMiD,SAAA,CAAAC,aAAa,CACjDC,IAAI,CAAC,8BACLQ,MAAM,CAAC;MACNC,OAAA,EAAS1C,IAAA,CAAKK,EAAE;MAChBe,MAAA,EAAQ;MACRoC,aAAA,EAAe;MACfC,MAAA,EAAQ;IACV;IAAA;IAAA/F,cAAA,GAAAoB,CAAA;IAEF,IAAIyE,aAAA,EAAe;MAAA;MAAA7F,cAAA,GAAAsB,CAAA;MAAAtB,cAAA,GAAAoB,CAAA;MACjB,MAAMyE,aAAA;IACR;IAAA;IAAA;MAAA7F,cAAA,GAAAsB,CAAA;IAAA;IAEA;IAAAtB,cAAA,GAAAoB,CAAA;IACA,MAAMiD,SAAA,CAAAC,aAAa,CAChBC,IAAI,CAAC,sBACLQ,MAAM,CAAC;MACNC,OAAA,EAAS1C,IAAA,CAAKK,EAAE;MAChBsC,MAAA,EAAQ;MACRC,aAAA,EAAe;MACfC,WAAA,EAAa7C,IAAA,CAAKK,EAAE;MACpB4C,QAAA,EAAU;IACZ;IAAA;IAAAvF,cAAA,GAAAoB,CAAA;IAEF,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CAAC;MACvBC,OAAA,EAAS;MACTe,OAAA,EAAS;IACX;EACF,EAAE,OAAOF,KAAA,EAAO;IAAA;IAAAvD,cAAA,GAAAoB,CAAA;IACdoC,OAAA,CAAQD,KAAK,CAAC,sCAAsCA,KAAA;IAAA;IAAAvD,cAAA,GAAAoB,CAAA;IACpD,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;MACEC,OAAA,EAAS;MACTa,KAAA,EAAO;MACPE,OAAA,EAAS;IACX,GACA;MAAEC,MAAA,EAAQ;IAAI;EAElB;AACF;AAGO,MAAMzB,GAAA;AAAA;AAAA,CAAAjC,cAAA,GAAAoB,CAAA,QAAM,IAAA4E,eAAA,CAAAC,QAAQ,EAAC9D,iBAAA;AACrB,MAAMD,GAAA;AAAA;AAAA,CAAAlC,cAAA,GAAAoB,CAAA,QAAM,IAAA4E,eAAA,CAAAC,QAAQ,EAACtC,oBAAA;AACrB,MAAM3B,MAAA;AAAA;AAAA,CAAAhC,cAAA,GAAAoB,CAAA,QAAS,IAAA4E,eAAA,CAAAC,QAAQ,EAACL,oBAAA","ignoreList":[]}