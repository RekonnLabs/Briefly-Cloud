{"version":3,"names":["GET","cov_6kit5y66","f","s","POST","UserAnalyticsSchema","_zod","z","object","userId","string","sessionId","pageViews","number","optional","timeOnSite","featuresUsed","array","conversionFunnel","deviceInfo","userAgent","screenResolution","language","timezone","location","country","region","city","timestamp","datetime","request","_ratelimit","withRateLimit","body","json","analytics","parse","supabase","_supabase","supabaseAdmin","error","from","insert","id","crypto","randomUUID","user_id","session_id","page_views","b","time_on_site","features_used","conversion_funnel","device_info","created_at","Date","toISOString","_logger","logger","_apierrors","formatErrorResponse","info","_server","NextResponse","success","message","session","_nextauth","getServerSession","_auth","authOptions","user","searchParams","URL","url","days","parseInt","get","cutoffDate","setDate","getDate","data","select","eq","gte","order","ascending","totalPageViews","reduce","sum","a","totalTimeOnSite","uniqueFeatures","Set","flatMap","conversionSteps","summary","averageTimeOnSite","length","uniqueFeaturesUsed","size","featuresList","Array","sessionsCount"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\analytics\\user\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { z } from 'zod'\r\nimport { getServerSession } from 'next-auth'\r\nimport { authOptions } from '@/app/lib/auth'\r\nimport { logger } from '@/app/lib/logger'\r\nimport { formatErrorResponse } from '@/app/lib/api-errors'\r\nimport { withRateLimit } from '@/app/lib/rate-limit'\r\nimport { createClient } from '@supabase/supabase-js'\r\nimport { supabaseAdmin } from '@/app/lib/supabase'\n\r\n// User analytics schema\r\nconst UserAnalyticsSchema = z.object({\r\n  userId: z.string(),\r\n  sessionId: z.string(),\r\n  pageViews: z.number().optional(),\r\n  timeOnSite: z.number().optional(),\r\n  featuresUsed: z.array(z.string()).optional(),\r\n  conversionFunnel: z.array(z.string()).optional(),\r\n  deviceInfo: z.object({\r\n    userAgent: z.string(),\r\n    screenResolution: z.string(),\r\n    language: z.string(),\r\n    timezone: z.string(),\r\n  }).optional(),\r\n  location: z.object({\r\n    country: z.string(),\r\n    region: z.string(),\r\n    city: z.string(),\r\n  }).optional(),\r\n  timestamp: z.string().datetime(),\r\n})\r\n\r\nexport async function POST(request: NextRequest) {\r\n  return withRateLimit(request, async () => {\r\n    try {\r\n      const body = await request.json()\r\n      const analytics = UserAnalyticsSchema.parse(body)\r\n\r\n      // Store user analytics in database\r\n      const supabase = supabaseAdmin\r\n\r\n      const { error } = await supabase\r\n        .from('user_analytics')\r\n        .insert({\r\n          id: crypto.randomUUID(),\r\n          user_id: analytics.userId,\r\n          session_id: analytics.sessionId,\r\n          page_views: analytics.pageViews || 0,\r\n          time_on_site: analytics.timeOnSite || 0,\r\n          features_used: analytics.featuresUsed || [],\r\n          conversion_funnel: analytics.conversionFunnel || [],\r\n          device_info: analytics.deviceInfo || {},\r\n          location: analytics.location || {},\r\n          timestamp: analytics.timestamp,\r\n          created_at: new Date().toISOString(),\r\n        })\r\n\r\n      if (error) {\r\n        logger.error('Failed to store user analytics', { error, userId: analytics.userId })\r\n        return formatErrorResponse('Failed to track user analytics', 500)\r\n      }\r\n\r\n      logger.info('User analytics tracked', { userId: analytics.userId, sessionId: analytics.sessionId })\r\n\r\n      return NextResponse.json({\r\n        success: true,\r\n        message: 'User analytics tracked successfully'\r\n      })\r\n\r\n    } catch (error) {\r\n      logger.error('User analytics tracking error', { error })\r\n      return formatErrorResponse('Invalid request', 400)\r\n    }\r\n  })\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  return withRateLimit(request, async () => {\r\n    try {\r\n      // Check authentication\r\n      const session = await getServerSession(authOptions)\r\n      if (!session?.user) {\r\n        return formatErrorResponse('Unauthorized', 401)\r\n      }\r\n\r\n      const { searchParams } = new URL(request.url)\r\n      const days = parseInt(searchParams.get('days') || '30')\r\n\r\n      // Get user analytics\r\n      const supabase = supabaseAdmin\r\n\r\n      const cutoffDate = new Date()\r\n      cutoffDate.setDate(cutoffDate.getDate() - days)\r\n\r\n      const { data: analytics, error } = await supabase\r\n        .from('user_analytics')\r\n        .select('*')\r\n        .eq('user_id', session.user.id)\r\n        .gte('created_at', cutoffDate.toISOString())\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) {\r\n        logger.error('Failed to get user analytics', { error })\r\n        return formatErrorResponse('Failed to retrieve analytics', 500)\r\n      }\r\n\r\n      // Calculate aggregated metrics\r\n      const totalPageViews = analytics?.reduce((sum, a) => sum + (a.page_views || 0), 0) || 0\r\n      const totalTimeOnSite = analytics?.reduce((sum, a) => sum + (a.time_on_site || 0), 0) || 0\r\n      const uniqueFeatures = new Set(analytics?.flatMap(a => a.features_used || []) || [])\r\n      const conversionSteps = analytics?.flatMap(a => a.conversion_funnel || []) || []\r\n\r\n      return NextResponse.json({\r\n        success: true,\r\n        data: {\r\n          analytics: analytics || [],\r\n          summary: {\r\n            totalPageViews,\r\n            totalTimeOnSite,\r\n            averageTimeOnSite: analytics?.length ? totalTimeOnSite / analytics.length : 0,\r\n            uniqueFeaturesUsed: uniqueFeatures.size,\r\n            featuresList: Array.from(uniqueFeatures),\r\n            conversionSteps,\r\n            sessionsCount: analytics?.length || 0,\r\n          }\r\n        }\r\n      })\r\n\r\n    } catch (error) {\r\n      logger.error('User analytics retrieval error', { error })\r\n      return formatErrorResponse('Internal server error', 500)\r\n    }\r\n  })\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MA4EsBA,IAAA;IAAA;IAAAC,YAAA,GAAAC,CAAA;IAAAD,YAAA,GAAAE,CAAA;WAAAH,GAAA;;MA5CAI,KAAA;IAAA;IAAAH,YAAA,GAAAC,CAAA;IAAAD,YAAA,GAAAE,CAAA;WAAAC,IAAA;;;;;gCAhCoB;;;gCACxB;;;gCACe;;;gCACL;;;iCACL;;;iCACa;;;iCACN;;;iCAEA;AAE9B;AACA,MAAMC,mBAAA;AAAA;AAAA,CAAAJ,YAAA,GAAAE,CAAA,QAAsBG,IAAA,CAAAC,CAAC,CAACC,MAAM,CAAC;EACnCC,MAAA,EAAQH,IAAA,CAAAC,CAAC,CAACG,MAAM;EAChBC,SAAA,EAAWL,IAAA,CAAAC,CAAC,CAACG,MAAM;EACnBE,SAAA,EAAWN,IAAA,CAAAC,CAAC,CAACM,MAAM,GAAGC,QAAQ;EAC9BC,UAAA,EAAYT,IAAA,CAAAC,CAAC,CAACM,MAAM,GAAGC,QAAQ;EAC/BE,YAAA,EAAcV,IAAA,CAAAC,CAAC,CAACU,KAAK,CAACX,IAAA,CAAAC,CAAC,CAACG,MAAM,IAAII,QAAQ;EAC1CI,gBAAA,EAAkBZ,IAAA,CAAAC,CAAC,CAACU,KAAK,CAACX,IAAA,CAAAC,CAAC,CAACG,MAAM,IAAII,QAAQ;EAC9CK,UAAA,EAAYb,IAAA,CAAAC,CAAC,CAACC,MAAM,CAAC;IACnBY,SAAA,EAAWd,IAAA,CAAAC,CAAC,CAACG,MAAM;IACnBW,gBAAA,EAAkBf,IAAA,CAAAC,CAAC,CAACG,MAAM;IAC1BY,QAAA,EAAUhB,IAAA,CAAAC,CAAC,CAACG,MAAM;IAClBa,QAAA,EAAUjB,IAAA,CAAAC,CAAC,CAACG,MAAM;EACpB,GAAGI,QAAQ;EACXU,QAAA,EAAUlB,IAAA,CAAAC,CAAC,CAACC,MAAM,CAAC;IACjBiB,OAAA,EAASnB,IAAA,CAAAC,CAAC,CAACG,MAAM;IACjBgB,MAAA,EAAQpB,IAAA,CAAAC,CAAC,CAACG,MAAM;IAChBiB,IAAA,EAAMrB,IAAA,CAAAC,CAAC,CAACG,MAAM;EAChB,GAAGI,QAAQ;EACXc,SAAA,EAAWtB,IAAA,CAAAC,CAAC,CAACG,MAAM,GAAGmB,QAAQ;AAChC;AAEO,eAAezB,KAAK0B,OAAoB;EAAA;EAAA7B,YAAA,GAAAC,CAAA;EAAAD,YAAA,GAAAE,CAAA;EAC7C,OAAO,IAAA4B,UAAA,CAAAC,aAAa,EAACF,OAAA,EAAS;IAAA;IAAA7B,YAAA,GAAAC,CAAA;IAAAD,YAAA,GAAAE,CAAA;IAC5B,IAAI;MACF,MAAM8B,IAAA;MAAA;MAAA,CAAAhC,YAAA,GAAAE,CAAA,QAAO,MAAM2B,OAAA,CAAQI,IAAI;MAC/B,MAAMC,SAAA;MAAA;MAAA,CAAAlC,YAAA,GAAAE,CAAA,QAAYE,mBAAA,CAAoB+B,KAAK,CAACH,IAAA;MAE5C;MACA,MAAMI,QAAA;MAAA;MAAA,CAAApC,YAAA,GAAAE,CAAA,QAAWmC,SAAA,CAAAC,aAAa;MAE9B,MAAM;QAAEC;MAAK,CAAE;MAAA;MAAA,CAAAvC,YAAA,GAAAE,CAAA,QAAG,MAAMkC,QAAA,CACrBI,IAAI,CAAC,kBACLC,MAAM,CAAC;QACNC,EAAA,EAAIC,MAAA,CAAOC,UAAU;QACrBC,OAAA,EAASX,SAAA,CAAU1B,MAAM;QACzBsC,UAAA,EAAYZ,SAAA,CAAUxB,SAAS;QAC/BqC,UAAA;QAAY;QAAA,CAAA/C,YAAA,GAAAgD,CAAA,UAAAd,SAAA,CAAUvB,SAAS;QAAA;QAAA,CAAAX,YAAA,GAAAgD,CAAA,UAAI;QACnCC,YAAA;QAAc;QAAA,CAAAjD,YAAA,GAAAgD,CAAA,UAAAd,SAAA,CAAUpB,UAAU;QAAA;QAAA,CAAAd,YAAA,GAAAgD,CAAA,UAAI;QACtCE,aAAA;QAAe;QAAA,CAAAlD,YAAA,GAAAgD,CAAA,UAAAd,SAAA,CAAUnB,YAAY;QAAA;QAAA,CAAAf,YAAA,GAAAgD,CAAA,UAAI,EAAE;QAC3CG,iBAAA;QAAmB;QAAA,CAAAnD,YAAA,GAAAgD,CAAA,UAAAd,SAAA,CAAUjB,gBAAgB;QAAA;QAAA,CAAAjB,YAAA,GAAAgD,CAAA,UAAI,EAAE;QACnDI,WAAA;QAAa;QAAA,CAAApD,YAAA,GAAAgD,CAAA,UAAAd,SAAA,CAAUhB,UAAU;QAAA;QAAA,CAAAlB,YAAA,GAAAgD,CAAA,UAAI,CAAC;QACtCzB,QAAA;QAAU;QAAA,CAAAvB,YAAA,GAAAgD,CAAA,UAAAd,SAAA,CAAUX,QAAQ;QAAA;QAAA,CAAAvB,YAAA,GAAAgD,CAAA,UAAI,CAAC;QACjCrB,SAAA,EAAWO,SAAA,CAAUP,SAAS;QAC9B0B,UAAA,EAAY,IAAIC,IAAA,GAAOC,WAAW;MACpC;MAAA;MAAAvD,YAAA,GAAAE,CAAA;MAEF,IAAIqC,KAAA,EAAO;QAAA;QAAAvC,YAAA,GAAAgD,CAAA;QAAAhD,YAAA,GAAAE,CAAA;QACTsD,OAAA,CAAAC,MAAM,CAAClB,KAAK,CAAC,kCAAkC;UAAEA,KAAA;UAAO/B,MAAA,EAAQ0B,SAAA,CAAU1B;QAAO;QAAA;QAAAR,YAAA,GAAAE,CAAA;QACjF,OAAO,IAAAwD,UAAA,CAAAC,mBAAmB,EAAC,kCAAkC;MAC/D;MAAA;MAAA;QAAA3D,YAAA,GAAAgD,CAAA;MAAA;MAAAhD,YAAA,GAAAE,CAAA;MAEAsD,OAAA,CAAAC,MAAM,CAACG,IAAI,CAAC,0BAA0B;QAAEpD,MAAA,EAAQ0B,SAAA,CAAU1B,MAAM;QAAEE,SAAA,EAAWwB,SAAA,CAAUxB;MAAU;MAAA;MAAAV,YAAA,GAAAE,CAAA;MAEjG,OAAO2D,OAAA,CAAAC,YAAY,CAAC7B,IAAI,CAAC;QACvB8B,OAAA,EAAS;QACTC,OAAA,EAAS;MACX;IAEF,EAAE,OAAOzB,KAAA,EAAO;MAAA;MAAAvC,YAAA,GAAAE,CAAA;MACdsD,OAAA,CAAAC,MAAM,CAAClB,KAAK,CAAC,iCAAiC;QAAEA;MAAM;MAAA;MAAAvC,YAAA,GAAAE,CAAA;MACtD,OAAO,IAAAwD,UAAA,CAAAC,mBAAmB,EAAC,mBAAmB;IAChD;EACF;AACF;AAEO,eAAe5D,IAAI8B,OAAoB;EAAA;EAAA7B,YAAA,GAAAC,CAAA;EAAAD,YAAA,GAAAE,CAAA;EAC5C,OAAO,IAAA4B,UAAA,CAAAC,aAAa,EAACF,OAAA,EAAS;IAAA;IAAA7B,YAAA,GAAAC,CAAA;IAAAD,YAAA,GAAAE,CAAA;IAC5B,IAAI;MACF;MACA,MAAM+D,OAAA;MAAA;MAAA,CAAAjE,YAAA,GAAAE,CAAA,QAAU,MAAM,IAAAgE,SAAA,CAAAC,gBAAgB,EAACC,KAAA,CAAAC,WAAW;MAAA;MAAArE,YAAA,GAAAE,CAAA;MAClD,IAAI,CAAC+D,OAAA,EAASK,IAAA,EAAM;QAAA;QAAAtE,YAAA,GAAAgD,CAAA;QAAAhD,YAAA,GAAAE,CAAA;QAClB,OAAO,IAAAwD,UAAA,CAAAC,mBAAmB,EAAC,gBAAgB;MAC7C;MAAA;MAAA;QAAA3D,YAAA,GAAAgD,CAAA;MAAA;MAEA,MAAM;QAAEuB;MAAY,CAAE;MAAA;MAAA,CAAAvE,YAAA,GAAAE,CAAA,QAAG,IAAIsE,GAAA,CAAI3C,OAAA,CAAQ4C,GAAG;MAC5C,MAAMC,IAAA;MAAA;MAAA,CAAA1E,YAAA,GAAAE,CAAA,QAAOyE,QAAA;MAAS;MAAA,CAAA3E,YAAA,GAAAgD,CAAA,UAAAuB,YAAA,CAAaK,GAAG,CAAC;MAAA;MAAA,CAAA5E,YAAA,GAAAgD,CAAA,UAAW;MAElD;MACA,MAAMZ,QAAA;MAAA;MAAA,CAAApC,YAAA,GAAAE,CAAA,QAAWmC,SAAA,CAAAC,aAAa;MAE9B,MAAMuC,UAAA;MAAA;MAAA,CAAA7E,YAAA,GAAAE,CAAA,QAAa,IAAIoD,IAAA;MAAA;MAAAtD,YAAA,GAAAE,CAAA;MACvB2E,UAAA,CAAWC,OAAO,CAACD,UAAA,CAAWE,OAAO,KAAKL,IAAA;MAE1C,MAAM;QAAEM,IAAA,EAAM9C,SAAS;QAAEK;MAAK,CAAE;MAAA;MAAA,CAAAvC,YAAA,GAAAE,CAAA,QAAG,MAAMkC,QAAA,CACtCI,IAAI,CAAC,kBACLyC,MAAM,CAAC,KACPC,EAAE,CAAC,WAAWjB,OAAA,CAAQK,IAAI,CAAC5B,EAAE,EAC7ByC,GAAG,CAAC,cAAcN,UAAA,CAAWtB,WAAW,IACxC6B,KAAK,CAAC,cAAc;QAAEC,SAAA,EAAW;MAAM;MAAA;MAAArF,YAAA,GAAAE,CAAA;MAE1C,IAAIqC,KAAA,EAAO;QAAA;QAAAvC,YAAA,GAAAgD,CAAA;QAAAhD,YAAA,GAAAE,CAAA;QACTsD,OAAA,CAAAC,MAAM,CAAClB,KAAK,CAAC,gCAAgC;UAAEA;QAAM;QAAA;QAAAvC,YAAA,GAAAE,CAAA;QACrD,OAAO,IAAAwD,UAAA,CAAAC,mBAAmB,EAAC,gCAAgC;MAC7D;MAAA;MAAA;QAAA3D,YAAA,GAAAgD,CAAA;MAAA;MAEA;MACA,MAAMsC,cAAA;MAAA;MAAA,CAAAtF,YAAA,GAAAE,CAAA;MAAiB;MAAA,CAAAF,YAAA,GAAAgD,CAAA,WAAAd,SAAA,EAAWqD,MAAA,CAAO,CAACC,GAAA,EAAKC,CAAA,KAAM;QAAA;QAAAzF,YAAA,GAAAC,CAAA;QAAAD,YAAA,GAAAE,CAAA;QAAA,OAAAsF,GAAA;QAAO;QAAA,CAAAxF,YAAA,GAAAgD,CAAA,WAAAyC,CAAA,CAAE1C,UAAU;QAAA;QAAA,CAAA/C,YAAA,GAAAgD,CAAA,WAAI;MAAA,GAAI;MAAA;MAAA,CAAAhD,YAAA,GAAAgD,CAAA,WAAM;MACtF,MAAM0C,eAAA;MAAA;MAAA,CAAA1F,YAAA,GAAAE,CAAA;MAAkB;MAAA,CAAAF,YAAA,GAAAgD,CAAA,WAAAd,SAAA,EAAWqD,MAAA,CAAO,CAACC,GAAA,EAAKC,CAAA,KAAM;QAAA;QAAAzF,YAAA,GAAAC,CAAA;QAAAD,YAAA,GAAAE,CAAA;QAAA,OAAAsF,GAAA;QAAO;QAAA,CAAAxF,YAAA,GAAAgD,CAAA,WAAAyC,CAAA,CAAExC,YAAY;QAAA;QAAA,CAAAjD,YAAA,GAAAgD,CAAA,WAAI;MAAA,GAAI;MAAA;MAAA,CAAAhD,YAAA,GAAAgD,CAAA,WAAM;MACzF,MAAM2C,cAAA;MAAA;MAAA,CAAA3F,YAAA,GAAAE,CAAA,QAAiB,IAAI0F,GAAA;MAAI;MAAA,CAAA5F,YAAA,GAAAgD,CAAA,WAAAd,SAAA,EAAW2D,OAAA,CAAQJ,CAAA,IAAK;QAAA;QAAAzF,YAAA,GAAAC,CAAA;QAAAD,YAAA,GAAAE,CAAA;QAAA,kCAAAF,YAAA,GAAAgD,CAAA,WAAAyC,CAAA,CAAEvC,aAAa;QAAA;QAAA,CAAAlD,YAAA,GAAAgD,CAAA,WAAI,EAAE;MAAF,CAAE;MAAA;MAAA,CAAAhD,YAAA,GAAAgD,CAAA,WAAK,EAAE;MACnF,MAAM8C,eAAA;MAAA;MAAA,CAAA9F,YAAA,GAAAE,CAAA;MAAkB;MAAA,CAAAF,YAAA,GAAAgD,CAAA,WAAAd,SAAA,EAAW2D,OAAA,CAAQJ,CAAA,IAAK;QAAA;QAAAzF,YAAA,GAAAC,CAAA;QAAAD,YAAA,GAAAE,CAAA;QAAA,kCAAAF,YAAA,GAAAgD,CAAA,WAAAyC,CAAA,CAAEtC,iBAAiB;QAAA;QAAA,CAAAnD,YAAA,GAAAgD,CAAA,WAAI,EAAE;MAAF,CAAE;MAAA;MAAA,CAAAhD,YAAA,GAAAgD,CAAA,WAAK,EAAE;MAAA;MAAAhD,YAAA,GAAAE,CAAA;MAEhF,OAAO2D,OAAA,CAAAC,YAAY,CAAC7B,IAAI,CAAC;QACvB8B,OAAA,EAAS;QACTiB,IAAA,EAAM;UACJ9C,SAAA;UAAW;UAAA,CAAAlC,YAAA,GAAAgD,CAAA,WAAAd,SAAA;UAAA;UAAA,CAAAlC,YAAA,GAAAgD,CAAA,WAAa,EAAE;UAC1B+C,OAAA,EAAS;YACPT,cAAA;YACAI,eAAA;YACAM,iBAAA,EAAmB9D,SAAA,EAAW+D,MAAA;YAAA;YAAA,CAAAjG,YAAA,GAAAgD,CAAA,WAAS0C,eAAA,GAAkBxD,SAAA,CAAU+D,MAAM;YAAA;YAAA,CAAAjG,YAAA,GAAAgD,CAAA,WAAG;YAC5EkD,kBAAA,EAAoBP,cAAA,CAAeQ,IAAI;YACvCC,YAAA,EAAcC,KAAA,CAAM7D,IAAI,CAACmD,cAAA;YACzBG,eAAA;YACAQ,aAAA;YAAe;YAAA,CAAAtG,YAAA,GAAAgD,CAAA,WAAAd,SAAA,EAAW+D,MAAA;YAAA;YAAA,CAAAjG,YAAA,GAAAgD,CAAA,WAAU;UACtC;QACF;MACF;IAEF,EAAE,OAAOT,KAAA,EAAO;MAAA;MAAAvC,YAAA,GAAAE,CAAA;MACdsD,OAAA,CAAAC,MAAM,CAAClB,KAAK,CAAC,kCAAkC;QAAEA;MAAM;MAAA;MAAAvC,YAAA,GAAAE,CAAA;MACvD,OAAO,IAAAwD,UAAA,CAAAC,mBAAmB,EAAC,yBAAyB;IACtD;EACF;AACF","ignoreList":[]}