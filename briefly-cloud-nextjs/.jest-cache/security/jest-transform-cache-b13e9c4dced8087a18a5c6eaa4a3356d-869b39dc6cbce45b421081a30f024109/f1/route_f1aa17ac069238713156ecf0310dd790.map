{"version":3,"names":["cov_2lg9yv4emy","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","GET","POST","DeletionRequestSchema","_zod","z","object","deletion_type","enum","default","reason","string","optional","request","session","_nextauth","getServerSession","_auth","authOptions","user","email","_apiutils","createErrorResponse","body","json","parse","supabase","_supabase","supabaseAdmin","data","userData","error","from","select","eq","single","existingRequest","id","existing_request","deletionRequest","_gdprcompliance","gdprService","requestDataDeletion","createApiResponse","message","warning","estimated_completion","ZodError","validation_errors","errors","console","requests","requestsError","order","ascending","Error"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\gdpr\\data-deletion\\route.ts"],"sourcesContent":["/**\r\n * GDPR Data Deletion API\r\n * \r\n * Handles user data deletion requests (Right to be Forgotten - Article 17)\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { getServerSession } from 'next-auth';\r\nimport { authOptions } from '@/app/lib/auth';\r\nimport { gdprService } from '@/app/lib/gdpr-compliance';\r\nimport { createApiResponse, createErrorResponse } from '@/app/lib/api-utils';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { z } from 'zod';\r\nimport { supabaseAdmin } from '@/app/lib/supabase'\n\r\nconst DeletionRequestSchema = z.object({\r\n  deletion_type: z.enum(['account', 'data_only']).default('account'),\r\n  reason: z.string().optional()\r\n});\r\n\r\n/**\r\n * POST /api/gdpr/data-deletion\r\n * Request data deletion for the authenticated user\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    \r\n    if (!session?.user?.email) {\r\n      return createErrorResponse('Unauthorized', 401);\r\n    }\r\n\r\n    const body = await request.json();\r\n    const { deletion_type, reason } = DeletionRequestSchema.parse(body);\r\n\r\n    // Get user ID from database\r\n    const supabase = supabaseAdmin;\r\n\r\n    const { data: userData, error } = await supabase\r\n      .from('users')\r\n      .select('id')\r\n      .eq('email', session.user.email)\r\n      .single();\r\n\r\n    if (error || !userData) {\r\n      return createErrorResponse('User not found', 404);\r\n    }\r\n\r\n    // Check if there's already a pending request\r\n    const { data: existingRequest } = await supabase\r\n      .from('data_deletion_requests')\r\n      .select('*')\r\n      .eq('user_id', userData.id)\r\n      .eq('status', 'pending')\r\n      .single();\r\n\r\n    if (existingRequest) {\r\n      return createErrorResponse('Data deletion request already pending', 409, {\r\n        existing_request: existingRequest\r\n      });\r\n    }\r\n\r\n    const deletionRequest = await gdprService.requestDataDeletion(userData.id, deletion_type, reason);\r\n    \r\n    return createApiResponse({\r\n      message: 'Data deletion request submitted successfully',\r\n      request: deletionRequest,\r\n      warning: deletion_type === 'account' \r\n        ? 'This will permanently delete your account and all associated data. This action cannot be undone.'\r\n        : 'This will delete your data but keep your account active.',\r\n      estimated_completion: '7-30 days'\r\n    });\r\n\r\n  } catch (error) {\r\n    if (error instanceof z.ZodError) {\r\n      return createErrorResponse('Invalid request data', 400, {\r\n        validation_errors: error.errors\r\n      });\r\n    }\r\n\r\n    console.error('Error requesting data deletion:', error);\r\n    return createErrorResponse('Failed to request data deletion', 500);\r\n  }\r\n}\r\n\r\n/**\r\n * GET /api/gdpr/data-deletion\r\n * Get status of data deletion requests for the authenticated user\r\n */\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    \r\n    if (!session?.user?.email) {\r\n      return createErrorResponse('Unauthorized', 401);\r\n    }\r\n\r\n    // Get user ID from database\r\n    const supabase = supabaseAdmin;\r\n\r\n    const { data: userData, error } = await supabase\r\n      .from('users')\r\n      .select('id')\r\n      .eq('email', session.user.email)\r\n      .single();\r\n\r\n    if (error || !userData) {\r\n      return createErrorResponse('User not found', 404);\r\n    }\r\n\r\n    // Get all deletion requests for this user\r\n    const { data: requests, error: requestsError } = await supabase\r\n      .from('data_deletion_requests')\r\n      .select('*')\r\n      .eq('user_id', userData.id)\r\n      .order('requested_at', { ascending: false });\r\n\r\n    if (requestsError) {\r\n      throw new Error(`Failed to get deletion requests: ${requestsError.message}`);\r\n    }\r\n\r\n    return createApiResponse({\r\n      requests: requests || []\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error getting deletion requests:', error);\r\n    return createErrorResponse('Failed to get deletion requests', 500);\r\n  }\r\n}"],"mappings":"AAAA;;;;GAIC;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,K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","ignoreList":[]}