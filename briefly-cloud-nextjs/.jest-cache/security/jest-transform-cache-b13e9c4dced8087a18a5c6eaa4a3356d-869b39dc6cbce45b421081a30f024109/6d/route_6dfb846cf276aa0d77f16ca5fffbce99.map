{"version":3,"names":["cov_c9h4xyncv","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","GET","POST","ConsentSchema","_zod","z","object","consent","essential","boolean","analytics","marketing","functional","metadata","string","ip_address","optional","user_agent","request","session","_nextauth","getServerSession","_auth","authOptions","user","email","_apiutils","createErrorResponse","supabase","_supabase","supabaseAdmin","data","userData","error","from","select","eq","single","_gdprcompliance","gdprService","getUserConsent","id","createApiResponse","console","body","json","parse","consentRecords","Promise","all","recordConsent","message","records","ZodError","validation_errors","errors"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\gdpr\\consent\\route.ts"],"sourcesContent":["/**\r\n * GDPR Consent Management API\r\n * \r\n * Handles user consent recording and retrieval\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { getServerSession } from 'next-auth';\r\nimport { authOptions } from '@/app/lib/auth';\r\nimport { gdprService } from '@/app/lib/gdpr-compliance';\r\nimport { createApiResponse, createErrorResponse } from '@/app/lib/api-utils';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { z } from 'zod';\r\nimport { supabaseAdmin } from '@/app/lib/supabase'\n\r\nconst ConsentSchema = z.object({\r\n  consent: z.object({\r\n    essential: z.boolean(),\r\n    analytics: z.boolean(),\r\n    marketing: z.boolean(),\r\n    functional: z.boolean()\r\n  }),\r\n  metadata: z.object({\r\n    version: z.string(),\r\n    ip_address: z.string().optional(),\r\n    user_agent: z.string().optional()\r\n  })\r\n});\r\n\r\n/**\r\n * GET /api/gdpr/consent\r\n * Get current consent status for the authenticated user\r\n */\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    \r\n    if (!session?.user?.email) {\r\n      return createErrorResponse('Unauthorized', 401);\r\n    }\r\n\r\n    // Get user ID from database\r\n    const supabase = supabaseAdmin;\r\n\r\n    const { data: userData, error } = await supabase\r\n      .from('users')\r\n      .select('id')\r\n      .eq('email', session.user.email)\r\n      .single();\r\n\r\n    if (error || !userData) {\r\n      return createErrorResponse('User not found', 404);\r\n    }\r\n\r\n    const consent = await gdprService.getUserConsent(userData.id);\r\n    \r\n    return createApiResponse(consent);\r\n\r\n  } catch (error) {\r\n    console.error('Error getting consent:', error);\r\n    return createErrorResponse('Failed to get consent status', 500);\r\n  }\r\n}\r\n\r\n/**\r\n * POST /api/gdpr/consent\r\n * Record user consent preferences\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    \r\n    if (!session?.user?.email) {\r\n      return createErrorResponse('Unauthorized', 401);\r\n    }\r\n\r\n    const body = await request.json();\r\n    const { consent, metadata } = ConsentSchema.parse(body);\r\n\r\n    // Get user ID from database\r\n    const supabase = supabaseAdmin;\r\n\r\n    const { data: userData, error } = await supabase\r\n      .from('users')\r\n      .select('id')\r\n      .eq('email', session.user.email)\r\n      .single();\r\n\r\n    if (error || !userData) {\r\n      return createErrorResponse('User not found', 404);\r\n    }\r\n\r\n    // Record consent for each type\r\n    const consentRecords = await Promise.all([\r\n      gdprService.recordConsent(userData.id, 'essential', consent.essential, metadata),\r\n      gdprService.recordConsent(userData.id, 'analytics', consent.analytics, metadata),\r\n      gdprService.recordConsent(userData.id, 'marketing', consent.marketing, metadata),\r\n      gdprService.recordConsent(userData.id, 'functional', consent.functional, metadata)\r\n    ]);\r\n\r\n    return createApiResponse({\r\n      message: 'Consent preferences saved successfully',\r\n      records: consentRecords\r\n    });\r\n\r\n  } catch (error) {\r\n    if (error instanceof z.ZodError) {\r\n      return createErrorResponse('Invalid request data', 400, {\r\n        validation_errors: error.errors\r\n      });\r\n    }\r\n\r\n    console.error('Error saving consent:', error);\r\n    return createErrorResponse('Failed to save consent preferences', 500);\r\n  }\r\n}"],"mappings":"AAAA;;;;GAIC;;AAAA;AAAA,SAAAA,cAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,K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","ignoreList":[]}