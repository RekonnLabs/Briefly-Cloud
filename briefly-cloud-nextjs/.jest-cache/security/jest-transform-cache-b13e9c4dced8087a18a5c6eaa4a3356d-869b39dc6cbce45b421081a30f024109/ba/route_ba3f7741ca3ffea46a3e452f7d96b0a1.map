{"version":3,"names":["cov_2inwv2rpf9","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","GET","POST","request","contentType","headers","get","includes","_server","NextResponse","json","error","status","body","report","violationInfo","documentUri","violatedDirective","blockedUri","sourceFile","lineNumber","columnNumber","scriptSample","userAgent","timestamp","Date","toISOString","ip","_logger","logger","warn","_cspnonce","handleCSPViolation","auditLogger","_auditlogger","getAuditLogger","logSecurityEvent","action","resourceType","severity","metadata","ipAddress","suspiciousPatterns","isSuspicious","some","pattern","test","reason","process","env","NODE_ENV","endpoint","method","description"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\security\\csp-report\\route.ts"],"sourcesContent":["/**\r\n * CSP Violation Report Endpoint\r\n * \r\n * This endpoint receives and processes Content Security Policy violation reports\r\n * to help monitor and improve security policies.\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport { logger } from '@/app/lib/logger'\r\nimport { getAuditLogger } from '@/app/lib/audit/audit-logger'\r\nimport { handleCSPViolation, type CSPViolationReport } from '@/app/lib/security/csp-nonce'\r\n\r\n/**\r\n * POST /api/security/csp-report\r\n * \r\n * Handle CSP violation reports\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const contentType = request.headers.get('content-type')\r\n    \r\n    // CSP reports are sent as application/csp-report or application/json\r\n    if (!contentType?.includes('application/csp-report') && !contentType?.includes('application/json')) {\r\n      return NextResponse.json(\r\n        { error: 'Invalid content type' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n    \r\n    const body = await request.json()\r\n    const report = body['csp-report'] || body as CSPViolationReport\r\n    \r\n    // Validate report structure\r\n    if (!report || typeof report !== 'object') {\r\n      return NextResponse.json(\r\n        { error: 'Invalid report format' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n    \r\n    // Extract relevant information\r\n    const violationInfo = {\r\n      documentUri: report['document-uri'],\r\n      violatedDirective: report['violated-directive'],\r\n      blockedUri: report['blocked-uri'],\r\n      sourceFile: report['source-file'],\r\n      lineNumber: report['line-number'],\r\n      columnNumber: report['column-number'],\r\n      scriptSample: report['script-sample'],\r\n      userAgent: request.headers.get('user-agent'),\r\n      timestamp: new Date().toISOString(),\r\n      ip: request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip')\r\n    }\r\n    \r\n    // Log the violation\r\n    logger.warn('CSP Violation Reported', violationInfo)\r\n    \r\n    // Handle the violation (logging, monitoring, etc.)\r\n    handleCSPViolation(report)\r\n    \r\n    // Log to audit trail for security monitoring\r\n    const auditLogger = getAuditLogger()\r\n    await auditLogger.logSecurityEvent({\r\n      action: 'CSP_VIOLATION',\r\n      resourceType: 'security',\r\n      severity: 'warning',\r\n      metadata: violationInfo,\r\n      ipAddress: violationInfo.ip,\r\n      userAgent: violationInfo.userAgent\r\n    })\r\n    \r\n    // Check for suspicious patterns\r\n    const suspiciousPatterns = [\r\n      /eval\\(/i,\r\n      /javascript:/i,\r\n      /data:text\\/html/i,\r\n      /vbscript:/i,\r\n      /<script/i\r\n    ]\r\n    \r\n    const isSuspicious = suspiciousPatterns.some(pattern => \r\n      pattern.test(report['blocked-uri'] || '') ||\r\n      pattern.test(report['script-sample'] || '')\r\n    )\r\n    \r\n    if (isSuspicious) {\r\n      logger.error('Suspicious CSP Violation Detected', {\r\n        ...violationInfo,\r\n        severity: 'high',\r\n        reason: 'Potential XSS attempt'\r\n      })\r\n      \r\n      await auditLogger.logSecurityEvent({\r\n        action: 'SUSPICIOUS_ACTIVITY',\r\n        resourceType: 'security',\r\n        severity: 'error',\r\n        metadata: {\r\n          ...violationInfo,\r\n          reason: 'Potential XSS attempt via CSP violation'\r\n        },\r\n        ipAddress: violationInfo.ip,\r\n        userAgent: violationInfo.userAgent\r\n      })\r\n    }\r\n    \r\n    // In production, you might want to:\r\n    // 1. Send alerts for critical violations\r\n    // 2. Update CSP policies based on legitimate violations\r\n    // 3. Block IPs with repeated suspicious violations\r\n    \r\n    return NextResponse.json({ status: 'received' }, { status: 204 })\r\n    \r\n  } catch (error) {\r\n    logger.error('Error processing CSP report', error as Error)\r\n    \r\n    return NextResponse.json(\r\n      { error: 'Internal server error' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n/**\r\n * GET /api/security/csp-report\r\n * \r\n * Return CSP report configuration (for debugging)\r\n */\r\nexport async function GET(request: NextRequest) {\r\n  // Only allow in development\r\n  if (process.env.NODE_ENV === 'production') {\r\n    return NextResponse.json(\r\n      { error: 'Not available in production' },\r\n      { status: 404 }\r\n    )\r\n  }\r\n  \r\n  return NextResponse.json({\r\n    endpoint: '/api/security/csp-report',\r\n    method: 'POST',\r\n    contentType: 'application/csp-report',\r\n    description: 'CSP violation report endpoint'\r\n  })\r\n}"],"mappings":"AAAA;;;;;GAKC;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;IAAA;IAAAE,KAAA;MAAA;QAAAC,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;IAAA;IAAAO,SAAA;MAAA;QAAAD,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;IAAA;IAAAW,CAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,cAAA;MAAAC,OAAA;MAAAC,OAAA;MAAAC,cAAA;MAAAC,KAAA;MAAAC,QAAA;IAAA;IAAAC,eAAA;IAAA3B,IAAA;EAAA;EAAA,IAAA4B,QAAA,GAAA3B,MAAA,CAAAE,GAAA,MAAAF,MAAA,CAAAE,GAAA;EAAA,KAAAyB,QAAA,CAAA7B,IAAA,KAAA6B,QAAA,CAAA7B,IAAA,EAAAC,IAAA,KAAAA,IAAA;IAAA4B,QAAA,CAAA7B,IAAA,IAAAK,YAAA;EAAA;EAAA,IAAAyB,cAAA,GAAAD,QAAA,CAAA7B,IAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MA0HqB+B,IAAA;IAAA;IAAAhC,cAAA,GAAAqB,CAAA;IAAArB,cAAA,GAAAoB,CAAA;WAAAY,GAAA;;MA9GAC,KAAA;IAAA;IAAAjC,cAAA,GAAAqB,CAAA;IAAArB,cAAA,GAAAoB,CAAA;WAAAa,IAAA;;;;;kCAVoB;;;kCACnB;;;kCACQ;;;kCAC6B;AAOrD,eAAeA,KAAKC,OAAoB;EAAA;EAAAlC,cAAA,GAAAqB,CAAA;EAAArB,cAAA,GAAAoB,CAAA;EAC7C,IAAI;IACF,MAAMe,WAAA;IAAA;IAAA,CAAAnC,cAAA,GAAAoB,CAAA,QAAcc,OAAA,CAAQE,OAAO,CAACC,GAAG,CAAC;IAExC;IAAA;IAAArC,cAAA,GAAAoB,CAAA;IACA;IAAI;IAAA,CAAApB,cAAA,GAAAsB,CAAA,WAACa,WAAA,EAAaG,QAAA,CAAS;IAAA;IAAA,CAAAtC,cAAA,GAAAsB,CAAA,UAA6B,CAACa,WAAA,EAAaG,QAAA,CAAS,sBAAqB;MAAA;MAAAtC,cAAA,GAAAsB,CAAA;MAAAtB,cAAA,GAAAoB,CAAA;MAClG,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;QAAEC,KAAA,EAAO;MAAuB,GAChC;QAAEC,MAAA,EAAQ;MAAI;IAElB;IAAA;IAAA;MAAA3C,cAAA,GAAAsB,CAAA;IAAA;IAEA,MAAMsB,IAAA;IAAA;IAAA,CAAA5C,cAAA,GAAAoB,CAAA,QAAO,MAAMc,OAAA,CAAQO,IAAI;IAC/B,MAAMI,MAAA;IAAA;IAAA,CAAA7C,cAAA,GAAAoB,CAAA;IAAS;IAAA,CAAApB,cAAA,GAAAsB,CAAA,UAAAsB,IAAI,CAAC,aAAa;IAAA;IAAA,CAAA5C,cAAA,GAAAsB,CAAA,UAAIsB,IAAA;IAErC;IAAA;IAAA5C,cAAA,GAAAoB,CAAA;IACA;IAAI;IAAA,CAAApB,cAAA,GAAAsB,CAAA,WAACuB,MAAA;IAAA;IAAA,CAAA7C,cAAA,GAAAsB,CAAA,UAAU,OAAOuB,MAAA,KAAW,WAAU;MAAA;MAAA7C,cAAA,GAAAsB,CAAA;MAAAtB,cAAA,GAAAoB,CAAA;MACzC,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;QAAEC,KAAA,EAAO;MAAwB,GACjC;QAAEC,MAAA,EAAQ;MAAI;IAElB;IAAA;IAAA;MAAA3C,cAAA,GAAAsB,CAAA;IAAA;IAEA;IACA,MAAMwB,aAAA;IAAA;IAAA,CAAA9C,cAAA,GAAAoB,CAAA,QAAgB;MACpB2B,WAAA,EAAaF,MAAM,CAAC,eAAe;MACnCG,iBAAA,EAAmBH,MAAM,CAAC,qBAAqB;MAC/CI,UAAA,EAAYJ,MAAM,CAAC,cAAc;MACjCK,UAAA,EAAYL,MAAM,CAAC,cAAc;MACjCM,UAAA,EAAYN,MAAM,CAAC,cAAc;MACjCO,YAAA,EAAcP,MAAM,CAAC,gBAAgB;MACrCQ,YAAA,EAAcR,MAAM,CAAC,gBAAgB;MACrCS,SAAA,EAAWpB,OAAA,CAAQE,OAAO,CAACC,GAAG,CAAC;MAC/BkB,SAAA,EAAW,IAAIC,IAAA,GAAOC,WAAW;MACjCC,EAAA;MAAI;MAAA,CAAA1D,cAAA,GAAAsB,CAAA,UAAAY,OAAA,CAAQE,OAAO,CAACC,GAAG,CAAC;MAAA;MAAA,CAAArC,cAAA,GAAAsB,CAAA,UAAsBY,OAAA,CAAQE,OAAO,CAACC,GAAG,CAAC;IACpE;IAEA;IAAA;IAAArC,cAAA,GAAAoB,CAAA;IACAuC,OAAA,CAAAC,MAAM,CAACC,IAAI,CAAC,0BAA0Bf,aAAA;IAEtC;IAAA;IAAA9C,cAAA,GAAAoB,CAAA;IACA,IAAA0C,SAAA,CAAAC,kBAAkB,EAAClB,MAAA;IAEnB;IACA,MAAMmB,WAAA;IAAA;IAAA,CAAAhE,cAAA,GAAAoB,CAAA,QAAc,IAAA6C,YAAA,CAAAC,cAAc;IAAA;IAAAlE,cAAA,GAAAoB,CAAA;IAClC,MAAM4C,WAAA,CAAYG,gBAAgB,CAAC;MACjCC,MAAA,EAAQ;MACRC,YAAA,EAAc;MACdC,QAAA,EAAU;MACVC,QAAA,EAAUzB,aAAA;MACV0B,SAAA,EAAW1B,aAAA,CAAcY,EAAE;MAC3BJ,SAAA,EAAWR,aAAA,CAAcQ;IAC3B;IAEA;IACA,MAAMmB,kBAAA;IAAA;IAAA,CAAAzE,cAAA,GAAAoB,CAAA,QAAqB,CACzB,WACA,gBACA,oBACA,cACA,WACD;IAED,MAAMsD,YAAA;IAAA;IAAA,CAAA1E,cAAA,GAAAoB,CAAA,QAAeqD,kBAAA,CAAmBE,IAAI,CAACC,OAAA,IAC3C;MAAA;MAAA5E,cAAA,GAAAqB,CAAA;MAAArB,cAAA,GAAAoB,CAAA;MAAA,kCAAApB,cAAA,GAAAsB,CAAA,UAAAsD,OAAA,CAAQC,IAAI;MAAC;MAAA,CAAA7E,cAAA,GAAAsB,CAAA,UAAAuB,MAAM,CAAC,cAAc;MAAA;MAAA,CAAA7C,cAAA,GAAAsB,CAAA,UAAI;MAAA;MAAA,CAAAtB,cAAA,GAAAsB,CAAA,UACtCsD,OAAA,CAAQC,IAAI;MAAC;MAAA,CAAA7E,cAAA,GAAAsB,CAAA,UAAAuB,MAAM,CAAC,gBAAgB;MAAA;MAAA,CAAA7C,cAAA,GAAAsB,CAAA,UAAI;IAAA;IAAA;IAAAtB,cAAA,GAAAoB,CAAA;IAG1C,IAAIsD,YAAA,EAAc;MAAA;MAAA1E,cAAA,GAAAsB,CAAA;MAAAtB,cAAA,GAAAoB,CAAA;MAChBuC,OAAA,CAAAC,MAAM,CAAClB,KAAK,CAAC,qCAAqC;QAChD,GAAGI,aAAa;QAChBwB,QAAA,EAAU;QACVQ,MAAA,EAAQ;MACV;MAAA;MAAA9E,cAAA,GAAAoB,CAAA;MAEA,MAAM4C,WAAA,CAAYG,gBAAgB,CAAC;QACjCC,MAAA,EAAQ;QACRC,YAAA,EAAc;QACdC,QAAA,EAAU;QACVC,QAAA,EAAU;UACR,GAAGzB,aAAa;UAChBgC,MAAA,EAAQ;QACV;QACAN,SAAA,EAAW1B,aAAA,CAAcY,EAAE;QAC3BJ,SAAA,EAAWR,aAAA,CAAcQ;MAC3B;IACF;IAAA;IAAA;MAAAtD,cAAA,GAAAsB,CAAA;IAAA;IAEA;IACA;IACA;IACA;IAAAtB,cAAA,GAAAoB,CAAA;IAEA,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CAAC;MAAEE,MAAA,EAAQ;IAAW,GAAG;MAAEA,MAAA,EAAQ;IAAI;EAEjE,EAAE,OAAOD,KAAA,EAAO;IAAA;IAAA1C,cAAA,GAAAoB,CAAA;IACduC,OAAA,CAAAC,MAAM,CAAClB,KAAK,CAAC,+BAA+BA,KAAA;IAAA;IAAA1C,cAAA,GAAAoB,CAAA;IAE5C,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;MAAEC,KAAA,EAAO;IAAwB,GACjC;MAAEC,MAAA,EAAQ;IAAI;EAElB;AACF;AAOO,eAAeX,IAAIE,OAAoB;EAAA;EAAAlC,cAAA,GAAAqB,CAAA;EAAArB,cAAA,GAAAoB,CAAA;EAC5C;EACA,IAAI2D,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,cAAc;IAAA;IAAAjF,cAAA,GAAAsB,CAAA;IAAAtB,cAAA,GAAAoB,CAAA;IACzC,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;MAAEC,KAAA,EAAO;IAA8B,GACvC;MAAEC,MAAA,EAAQ;IAAI;EAElB;EAAA;EAAA;IAAA3C,cAAA,GAAAsB,CAAA;EAAA;EAAAtB,cAAA,GAAAoB,CAAA;EAEA,OAAOmB,OAAA,CAAAC,YAAY,CAACC,IAAI,CAAC;IACvByC,QAAA,EAAU;IACVC,MAAA,EAAQ;IACRhD,WAAA,EAAa;IACbiD,WAAA,EAAa;EACf;AACF","ignoreList":[]}