58765372ff91da74410c8f94c32c62fe
/**
 * Usage Middleware
 * 
 * This middleware integrates usage tracking, rate limiting, and tier enforcement
 * for all API routes in the multi-tenant architecture.
 */"use strict";

/* istanbul ignore next */
function cov_1n4duqffpm() {
  var path = "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\lib\\usage\\usage-middleware.ts";
  var hash = "8073e3b2e329092c31202bb28044f9488736c5ca";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\lib\\usage\\usage-middleware.ts",
    statementMap: {
      "0": {
        start: {
          line: 7,
          column: 0
        },
        end: {
          line: 9,
          column: 3
        }
      },
      "1": {
        start: {
          line: 11,
          column: 4
        },
        end: {
          line: 14,
          column: 7
        }
      },
      "2": {
        start: {
          line: 11,
          column: 24
        },
        end: {
          line: 14,
          column: 7
        }
      },
      "3": {
        start: {
          line: 16,
          column: 0
        },
        end: {
          line: 35,
          column: 3
        }
      },
      "4": {
        start: {
          line: 18,
          column: 8
        },
        end: {
          line: 18,
          column: 35
        }
      },
      "5": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 21,
          column: 31
        }
      },
      "6": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 24,
          column: 32
        }
      },
      "7": {
        start: {
          line: 27,
          column: 8
        },
        end: {
          line: 27,
          column: 34
        }
      },
      "8": {
        start: {
          line: 30,
          column: 8
        },
        end: {
          line: 30,
          column: 34
        }
      },
      "9": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 33,
          column: 33
        }
      },
      "10": {
        start: {
          line: 36,
          column: 16
        },
        end: {
          line: 36,
          column: 38
        }
      },
      "11": {
        start: {
          line: 37,
          column: 22
        },
        end: {
          line: 37,
          column: 48
        }
      },
      "12": {
        start: {
          line: 38,
          column: 21
        },
        end: {
          line: 38,
          column: 46
        }
      },
      "13": {
        start: {
          line: 39,
          column: 21
        },
        end: {
          line: 39,
          column: 46
        }
      },
      "14": {
        start: {
          line: 40,
          column: 16
        },
        end: {
          line: 40,
          column: 36
        }
      },
      "15": {
        start: {
          line: 41,
          column: 19
        },
        end: {
          line: 41,
          column: 43
        }
      },
      "16": {
        start: {
          line: 43,
          column: 4
        },
        end: {
          line: 140,
          column: 6
        }
      },
      "17": {
        start: {
          line: 44,
          column: 25
        },
        end: {
          line: 44,
          column: 32
        }
      },
      "18": {
        start: {
          line: 45,
          column: 26
        },
        end: {
          line: 45,
          column: 36
        }
      },
      "19": {
        start: {
          line: 46,
          column: 8
        },
        end: {
          line: 139,
          column: 9
        }
      },
      "20": {
        start: {
          line: 48,
          column: 29
        },
        end: {
          line: 54,
          column: 18
        }
      },
      "21": {
        start: {
          line: 56,
          column: 12
        },
        end: {
          line: 69,
          column: 13
        }
      },
      "22": {
        start: {
          line: 57,
          column: 36
        },
        end: {
          line: 57,
          column: 70
        }
      },
      "23": {
        start: {
          line: 58,
          column: 34
        },
        end: {
          line: 58,
          column: 100
        }
      },
      "24": {
        start: {
          line: 59,
          column: 16
        },
        end: {
          line: 68,
          column: 17
        }
      },
      "25": {
        start: {
          line: 60,
          column: 20
        },
        end: {
          line: 67,
          column: 23
        }
      },
      "26": {
        start: {
          line: 71,
          column: 12
        },
        end: {
          line: 74,
          column: 13
        }
      },
      "27": {
        start: {
          line: 72,
          column: 36
        },
        end: {
          line: 72,
          column: 70
        }
      },
      "28": {
        start: {
          line: 73,
          column: 16
        },
        end: {
          line: 73,
          column: 131
        }
      },
      "29": {
        start: {
          line: 76,
          column: 12
        },
        end: {
          line: 100,
          column: 13
        }
      },
      "30": {
        start: {
          line: 77,
          column: 36
        },
        end: {
          line: 77,
          column: 70
        }
      },
      "31": {
        start: {
          line: 78,
          column: 40
        },
        end: {
          line: 78,
          column: 147
        }
      },
      "32": {
        start: {
          line: 80,
          column: 33
        },
        end: {
          line: 80,
          column: 64
        }
      },
      "33": {
        start: {
          line: 81,
          column: 16
        },
        end: {
          line: 81,
          column: 92
        }
      },
      "34": {
        start: {
          line: 82,
          column: 16
        },
        end: {
          line: 82,
          column: 100
        }
      },
      "35": {
        start: {
          line: 83,
          column: 16
        },
        end: {
          line: 83,
          column: 99
        }
      },
      "36": {
        start: {
          line: 85,
          column: 16
        },
        end: {
          line: 98,
          column: 17
        }
      },
      "37": {
        start: {
          line: 86,
          column: 41
        },
        end: {
          line: 86,
          column: 77
        }
      },
      "38": {
        start: {
          line: 87,
          column: 20
        },
        end: {
          line: 97,
          column: 23
        }
      },
      "39": {
        start: {
          line: 99,
          column: 16
        },
        end: {
          line: 99,
          column: 32
        }
      },
      "40": {
        start: {
          line: 102,
          column: 29
        },
        end: {
          line: 102,
          column: 60
        }
      },
      "41": {
        start: {
          line: 104,
          column: 12
        },
        end: {
          line: 116,
          column: 13
        }
      },
      "42": {
        start: {
          line: 105,
          column: 37
        },
        end: {
          line: 105,
          column: 73
        }
      },
      "43": {
        start: {
          line: 106,
          column: 16
        },
        end: {
          line: 115,
          column: 19
        }
      },
      "44": {
        start: {
          line: 117,
          column: 12
        },
        end: {
          line: 117,
          column: 28
        }
      },
      "45": {
        start: {
          line: 119,
          column: 35
        },
        end: {
          line: 119,
          column: 57
        }
      },
      "46": {
        start: {
          line: 121,
          column: 12
        },
        end: {
          line: 136,
          column: 13
        }
      },
      "47": {
        start: {
          line: 122,
          column: 16
        },
        end: {
          line: 135,
          column: 17
        }
      },
      "48": {
        start: {
          line: 123,
          column: 41
        },
        end: {
          line: 123,
          column: 77
        }
      },
      "49": {
        start: {
          line: 124,
          column: 20
        },
        end: {
          line: 132,
          column: 23
        }
      },
      "50": {
        start: {
          line: 134,
          column: 20
        },
        end: {
          line: 134,
          column: 89
        }
      },
      "51": {
        start: {
          line: 138,
          column: 12
        },
        end: {
          line: 138,
          column: 24
        }
      },
      "52": {
        start: {
          line: 143,
          column: 4
        },
        end: {
          line: 159,
          column: 16
        }
      },
      "53": {
        start: {
          line: 162,
          column: 4
        },
        end: {
          line: 178,
          column: 16
        }
      },
      "54": {
        start: {
          line: 181,
          column: 4
        },
        end: {
          line: 196,
          column: 16
        }
      },
      "55": {
        start: {
          line: 199,
          column: 4
        },
        end: {
          line: 210,
          column: 16
        }
      },
      "56": {
        start: {
          line: 213,
          column: 4
        },
        end: {
          line: 234,
          column: 5
        }
      },
      "57": {
        start: {
          line: 214,
          column: 28
        },
        end: {
          line: 214,
          column: 62
        }
      },
      "58": {
        start: {
          line: 215,
          column: 28
        },
        end: {
          line: 215,
          column: 62
        }
      },
      "59": {
        start: {
          line: 216,
          column: 29
        },
        end: {
          line: 216,
          column: 65
        }
      },
      "60": {
        start: {
          line: 217,
          column: 55
        },
        end: {
          line: 221,
          column: 10
        }
      },
      "61": {
        start: {
          line: 222,
          column: 32
        },
        end: {
          line: 222,
          column: 83
        }
      },
      "62": {
        start: {
          line: 223,
          column: 8
        },
        end: {
          line: 228,
          column: 10
        }
      },
      "63": {
        start: {
          line: 230,
          column: 8
        },
        end: {
          line: 232,
          column: 18
        }
      },
      "64": {
        start: {
          line: 233,
          column: 8
        },
        end: {
          line: 233,
          column: 89
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 10,
            column: 9
          },
          end: {
            line: 10,
            column: 16
          }
        },
        loc: {
          start: {
            line: 10,
            column: 30
          },
          end: {
            line: 15,
            column: 1
          }
        },
        line: 10
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 17,
            column: 4
          },
          end: {
            line: 17,
            column: 5
          }
        },
        loc: {
          start: {
            line: 17,
            column: 31
          },
          end: {
            line: 19,
            column: 5
          }
        },
        line: 17
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 20,
            column: 4
          },
          end: {
            line: 20,
            column: 5
          }
        },
        loc: {
          start: {
            line: 20,
            column: 27
          },
          end: {
            line: 22,
            column: 5
          }
        },
        line: 20
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 23,
            column: 5
          }
        },
        loc: {
          start: {
            line: 23,
            column: 28
          },
          end: {
            line: 25,
            column: 5
          }
        },
        line: 23
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 26,
            column: 4
          },
          end: {
            line: 26,
            column: 5
          }
        },
        loc: {
          start: {
            line: 26,
            column: 30
          },
          end: {
            line: 28,
            column: 5
          }
        },
        line: 26
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 29,
            column: 4
          },
          end: {
            line: 29,
            column: 5
          }
        },
        loc: {
          start: {
            line: 29,
            column: 30
          },
          end: {
            line: 31,
            column: 5
          }
        },
        line: 29
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 32,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        },
        loc: {
          start: {
            line: 32,
            column: 29
          },
          end: {
            line: 34,
            column: 5
          }
        },
        line: 32
      },
      "7": {
        name: "withUsageControls",
        decl: {
          start: {
            line: 42,
            column: 9
          },
          end: {
            line: 42,
            column: 26
          }
        },
        loc: {
          start: {
            line: 42,
            column: 44
          },
          end: {
            line: 141,
            column: 1
          }
        },
        line: 42
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 43,
            column: 11
          },
          end: {
            line: 43,
            column: 12
          }
        },
        loc: {
          start: {
            line: 43,
            column: 37
          },
          end: {
            line: 140,
            column: 5
          }
        },
        line: 43
      },
      "9": {
        name: "withChatControls",
        decl: {
          start: {
            line: 142,
            column: 9
          },
          end: {
            line: 142,
            column: 25
          }
        },
        loc: {
          start: {
            line: 142,
            column: 35
          },
          end: {
            line: 160,
            column: 1
          }
        },
        line: 142
      },
      "10": {
        name: "withUploadControls",
        decl: {
          start: {
            line: 161,
            column: 9
          },
          end: {
            line: 161,
            column: 27
          }
        },
        loc: {
          start: {
            line: 161,
            column: 37
          },
          end: {
            line: 179,
            column: 1
          }
        },
        line: 161
      },
      "11": {
        name: "withApiControls",
        decl: {
          start: {
            line: 180,
            column: 9
          },
          end: {
            line: 180,
            column: 24
          }
        },
        loc: {
          start: {
            line: 180,
            column: 34
          },
          end: {
            line: 197,
            column: 1
          }
        },
        line: 180
      },
      "12": {
        name: "withSearchControls",
        decl: {
          start: {
            line: 198,
            column: 9
          },
          end: {
            line: 198,
            column: 27
          }
        },
        loc: {
          start: {
            line: 198,
            column: 37
          },
          end: {
            line: 211,
            column: 1
          }
        },
        line: 198
      },
      "13": {
        name: "getUserUsageSummary",
        decl: {
          start: {
            line: 212,
            column: 15
          },
          end: {
            line: 212,
            column: 34
          }
        },
        loc: {
          start: {
            line: 212,
            column: 43
          },
          end: {
            line: 235,
            column: 1
          }
        },
        line: 212
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 48,
            column: 29
          },
          end: {
            line: 54,
            column: 18
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 48,
            column: 50
          },
          end: {
            line: 54,
            column: 13
          }
        }, {
          start: {
            line: 54,
            column: 16
          },
          end: {
            line: 54,
            column: 18
          }
        }],
        line: 48
      },
      "1": {
        loc: {
          start: {
            line: 52,
            column: 27
          },
          end: {
            line: 52,
            column: 114
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 52,
            column: 27
          },
          end: {
            line: 52,
            column: 65
          }
        }, {
          start: {
            line: 52,
            column: 69
          },
          end: {
            line: 52,
            column: 101
          }
        }, {
          start: {
            line: 52,
            column: 105
          },
          end: {
            line: 52,
            column: 114
          }
        }],
        line: 52
      },
      "2": {
        loc: {
          start: {
            line: 56,
            column: 12
          },
          end: {
            line: 69,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 56,
            column: 12
          },
          end: {
            line: 69,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 56
      },
      "3": {
        loc: {
          start: {
            line: 59,
            column: 16
          },
          end: {
            line: 68,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 59,
            column: 16
          },
          end: {
            line: 68,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 59
      },
      "4": {
        loc: {
          start: {
            line: 71,
            column: 12
          },
          end: {
            line: 74,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 71,
            column: 12
          },
          end: {
            line: 74,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 71
      },
      "5": {
        loc: {
          start: {
            line: 76,
            column: 12
          },
          end: {
            line: 100,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 76,
            column: 12
          },
          end: {
            line: 100,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 76
      },
      "6": {
        loc: {
          start: {
            line: 85,
            column: 16
          },
          end: {
            line: 98,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 85,
            column: 16
          },
          end: {
            line: 98,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 85
      },
      "7": {
        loc: {
          start: {
            line: 104,
            column: 12
          },
          end: {
            line: 116,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 104,
            column: 12
          },
          end: {
            line: 116,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 104
      },
      "8": {
        loc: {
          start: {
            line: 121,
            column: 12
          },
          end: {
            line: 136,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 121,
            column: 12
          },
          end: {
            line: 136,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 121
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\lib\\usage\\usage-middleware.ts"],
      sourcesContent: ["/**\r\n * Usage Middleware\r\n * \r\n * This middleware integrates usage tracking, rate limiting, and tier enforcement\r\n * for all API routes in the multi-tenant architecture.\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport { getUsageTracker, type UsageAction } from './usage-tracker'\r\nimport { getRateLimiter, type RateLimitAction, type RateLimitWindow } from './rate-limiter'\r\nimport { getTierManager } from './tier-manager'\r\nimport { logger } from '@/app/lib/logger'\r\nimport { createError } from '@/app/lib/api-errors'\r\nimport type { AuthContext } from '@/app/lib/auth/auth-middleware'\r\n\r\nexport interface UsageMiddlewareConfig {\r\n  trackUsage?: {\r\n    action: UsageAction\r\n    resourceType?: string\r\n    quantity?: number\r\n  }\r\n  enforceRateLimit?: {\r\n    action: RateLimitAction\r\n    window?: RateLimitWindow\r\n  }\r\n  enforceTierLimits?: {\r\n    action: 'upload' | 'chat' | 'api_call' | 'storage'\r\n    quantity?: number\r\n  }\r\n  requireFeature?: string\r\n  logMetadata?: boolean\r\n}\r\n\r\n/**\r\n * Usage tracking and enforcement middleware\r\n */\r\nexport function withUsageControls(\r\n  config: UsageMiddlewareConfig,\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return async (request: NextRequest, context: AuthContext): Promise<NextResponse> => {\r\n    const { user } = context\r\n    const startTime = Date.now()\r\n\r\n    try {\r\n      // Extract request metadata for logging\r\n      const metadata = config.logMetadata ? {\r\n        method: request.method,\r\n        url: request.url,\r\n        userAgent: request.headers.get('user-agent'),\r\n        ipAddress: request.headers.get('x-forwarded-for') || \r\n                   request.headers.get('x-real-ip') || \r\n                   'unknown',\r\n        timestamp: new Date().toISOString()\r\n      } : {}\r\n\r\n      // 1. Check feature access if required\r\n      if (config.requireFeature) {\r\n        const tierManager = getTierManager()\r\n        const hasAccess = await tierManager.hasFeatureAccess(user.id, config.requireFeature)\r\n        \r\n        if (!hasAccess) {\r\n          return NextResponse.json(\r\n            {\r\n              success: false,\r\n              error: 'FEATURE_NOT_AVAILABLE',\r\n              message: `Feature '${config.requireFeature}' is not available for your subscription tier`,\r\n              upgradeRequired: true\r\n            },\r\n            { status: 402 }\r\n          )\r\n        }\r\n      }\r\n\r\n      // 2. Enforce tier limits if configured\r\n      if (config.enforceTierLimits) {\r\n        const tierManager = getTierManager()\r\n        await tierManager.enforceActionLimits(\r\n          user.id,\r\n          config.enforceTierLimits.action,\r\n          config.enforceTierLimits.quantity\r\n        )\r\n      }\r\n\r\n      // 3. Enforce rate limits if configured\r\n      if (config.enforceRateLimit) {\r\n        const rateLimiter = getRateLimiter()\r\n        const rateLimitResult = await rateLimiter.enforceRateLimit(\r\n          user.id,\r\n          config.enforceRateLimit.action,\r\n          config.enforceRateLimit.window\r\n        )\r\n\r\n        // Add rate limit headers to response\r\n        const response = await handler(request, context)\r\n        response.headers.set('X-RateLimit-Limit', rateLimitResult.limit.toString())\r\n        response.headers.set('X-RateLimit-Remaining', rateLimitResult.remaining.toString())\r\n        response.headers.set('X-RateLimit-Reset', rateLimitResult.resetTime.toISOString())\r\n\r\n        // 4. Track usage after successful operation\r\n        if (config.trackUsage) {\r\n          const usageTracker = getUsageTracker()\r\n          await usageTracker.logUsage(user.id, config.trackUsage.action, {\r\n            resourceType: config.trackUsage.resourceType,\r\n            quantity: config.trackUsage.quantity,\r\n            ipAddress: metadata.ipAddress,\r\n            userAgent: metadata.userAgent,\r\n            metadata: {\r\n              ...metadata,\r\n              processingTime: Date.now() - startTime,\r\n              rateLimitUsed: rateLimitResult.limit - rateLimitResult.remaining\r\n            }\r\n          })\r\n        }\r\n\r\n        return response\r\n      }\r\n\r\n      // Execute handler without rate limiting\r\n      const response = await handler(request, context)\r\n\r\n      // 4. Track usage after successful operation\r\n      if (config.trackUsage) {\r\n        const usageTracker = getUsageTracker()\r\n        await usageTracker.logUsage(user.id, config.trackUsage.action, {\r\n          resourceType: config.trackUsage.resourceType,\r\n          quantity: config.trackUsage.quantity,\r\n          ipAddress: metadata.ipAddress,\r\n          userAgent: metadata.userAgent,\r\n          metadata: {\r\n            ...metadata,\r\n            processingTime: Date.now() - startTime\r\n          }\r\n        })\r\n      }\r\n\r\n      return response\r\n\r\n    } catch (error) {\r\n      const processingTime = Date.now() - startTime\r\n\r\n      // Log failed operation\r\n      if (config.trackUsage) {\r\n        try {\r\n          const usageTracker = getUsageTracker()\r\n          await usageTracker.logUsage(user.id, config.trackUsage.action, {\r\n            resourceType: config.trackUsage.resourceType,\r\n            quantity: 0, // No usage counted for failed operations\r\n            metadata: {\r\n              failed: true,\r\n              error: (error as Error).message,\r\n              processingTime\r\n            }\r\n          })\r\n        } catch (loggingError) {\r\n          logger.error('Failed to log failed operation', loggingError as Error)\r\n        }\r\n      }\r\n\r\n      // Re-throw the original error\r\n      throw error\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Convenience middleware creators\r\n */\r\n\r\n/**\r\n * Middleware for chat operations\r\n */\r\nexport function withChatControls(\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return withUsageControls({\r\n    trackUsage: {\r\n      action: 'chat_message',\r\n      resourceType: 'chat',\r\n      quantity: 1\r\n    },\r\n    enforceRateLimit: {\r\n      action: 'chat_message',\r\n      window: 'minute'\r\n    },\r\n    enforceTierLimits: {\r\n      action: 'chat',\r\n      quantity: 1\r\n    },\r\n    requireFeature: 'ai_chat',\r\n    logMetadata: true\r\n  }, handler)\r\n}\r\n\r\n/**\r\n * Middleware for upload operations\r\n */\r\nexport function withUploadControls(\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return withUsageControls({\r\n    trackUsage: {\r\n      action: 'document_upload',\r\n      resourceType: 'file',\r\n      quantity: 1\r\n    },\r\n    enforceRateLimit: {\r\n      action: 'document_upload',\r\n      window: 'minute'\r\n    },\r\n    enforceTierLimits: {\r\n      action: 'upload',\r\n      quantity: 1\r\n    },\r\n    requireFeature: 'document_upload',\r\n    logMetadata: true\r\n  }, handler)\r\n}\r\n\r\n/**\r\n * Middleware for API operations\r\n */\r\nexport function withApiControls(\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return withUsageControls({\r\n    trackUsage: {\r\n      action: 'api_call',\r\n      resourceType: 'api',\r\n      quantity: 1\r\n    },\r\n    enforceRateLimit: {\r\n      action: 'api_request',\r\n      window: 'minute'\r\n    },\r\n    enforceTierLimits: {\r\n      action: 'api_call',\r\n      quantity: 1\r\n    },\r\n    logMetadata: true\r\n  }, handler)\r\n}\r\n\r\n/**\r\n * Middleware for vector search operations\r\n */\r\nexport function withSearchControls(\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return withUsageControls({\r\n    trackUsage: {\r\n      action: 'vector_search',\r\n      resourceType: 'search',\r\n      quantity: 1\r\n    },\r\n    enforceRateLimit: {\r\n      action: 'vector_search',\r\n      window: 'minute'\r\n    },\r\n    logMetadata: true\r\n  }, handler)\r\n}\r\n\r\n/**\r\n * Get usage summary for a user\r\n */\r\nexport async function getUserUsageSummary(userId: string): Promise<{\r\n  subscription: any\r\n  currentUsage: any\r\n  rateLimits: any\r\n  recommendations?: any\r\n}> {\r\n  try {\r\n    const tierManager = getTierManager()\r\n    const rateLimiter = getRateLimiter()\r\n    const usageTracker = getUsageTracker()\r\n\r\n    const [subscription, rateLimits, usageStats] = await Promise.all([\r\n      tierManager.getUserSubscription(userId),\r\n      rateLimiter.getRateLimitStatus(userId),\r\n      usageTracker.getUserUsageStats(userId)\r\n    ])\r\n\r\n    const recommendations = await tierManager.getUpgradeRecommendations(userId)\r\n\r\n    return {\r\n      subscription,\r\n      currentUsage: usageStats,\r\n      rateLimits,\r\n      recommendations\r\n    }\r\n\r\n  } catch (error) {\r\n    logger.error('Failed to get user usage summary', { userId }, error as Error)\r\n    throw createError.databaseError('Failed to get usage summary', error as Error)\r\n  }\r\n}"],
      names: ["getUserUsageSummary", "withApiControls", "withChatControls", "withSearchControls", "withUploadControls", "withUsageControls", "config", "handler", "request", "context", "user", "startTime", "Date", "now", "metadata", "logMetadata", "method", "url", "userAgent", "headers", "get", "ipAddress", "timestamp", "toISOString", "requireFeature", "tierManager", "getTierManager", "hasAccess", "hasFeatureAccess", "id", "NextResponse", "json", "success", "error", "message", "upgradeRequired", "status", "enforceTierLimits", "enforceActionLimits", "action", "quantity", "enforceRateLimit", "rateLimiter", "getRateLimiter", "rateLimitResult", "window", "response", "set", "limit", "toString", "remaining", "resetTime", "trackUsage", "usageTracker", "getUsageTracker", "logUsage", "resourceType", "processingTime", "rateLimitUsed", "failed", "loggingError", "logger", "userId", "subscription", "rateLimits", "usageStats", "Promise", "all", "getUserSubscription", "getRateLimitStatus", "getUserUsageStats", "recommendations", "getUpgradeRecommendations", "currentUsage", "createError", "databaseError"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "8073e3b2e329092c31202bb28044f9488736c5ca"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1n4duqffpm = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1n4duqffpm();
cov_1n4duqffpm().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_1n4duqffpm().f[0]++;
  cov_1n4duqffpm().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_1n4duqffpm().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_1n4duqffpm().s[3]++;
_export(exports, {
  get getUserUsageSummary() {
    /* istanbul ignore next */
    cov_1n4duqffpm().f[1]++;
    cov_1n4duqffpm().s[4]++;
    return getUserUsageSummary;
  },
  get withApiControls() {
    /* istanbul ignore next */
    cov_1n4duqffpm().f[2]++;
    cov_1n4duqffpm().s[5]++;
    return withApiControls;
  },
  get withChatControls() {
    /* istanbul ignore next */
    cov_1n4duqffpm().f[3]++;
    cov_1n4duqffpm().s[6]++;
    return withChatControls;
  },
  get withSearchControls() {
    /* istanbul ignore next */
    cov_1n4duqffpm().f[4]++;
    cov_1n4duqffpm().s[7]++;
    return withSearchControls;
  },
  get withUploadControls() {
    /* istanbul ignore next */
    cov_1n4duqffpm().f[5]++;
    cov_1n4duqffpm().s[8]++;
    return withUploadControls;
  },
  get withUsageControls() {
    /* istanbul ignore next */
    cov_1n4duqffpm().f[6]++;
    cov_1n4duqffpm().s[9]++;
    return withUsageControls;
  }
});
const _server =
/* istanbul ignore next */
(cov_1n4duqffpm().s[10]++, require("next/server"));
const _usagetracker =
/* istanbul ignore next */
(cov_1n4duqffpm().s[11]++, require("./usage-tracker"));
const _ratelimiter =
/* istanbul ignore next */
(cov_1n4duqffpm().s[12]++, require("./rate-limiter"));
const _tiermanager =
/* istanbul ignore next */
(cov_1n4duqffpm().s[13]++, require("./tier-manager"));
const _logger =
/* istanbul ignore next */
(cov_1n4duqffpm().s[14]++, require("../logger"));
const _apierrors =
/* istanbul ignore next */
(cov_1n4duqffpm().s[15]++, require("../api-errors"));
function withUsageControls(config, handler) {
  /* istanbul ignore next */
  cov_1n4duqffpm().f[7]++;
  cov_1n4duqffpm().s[16]++;
  return async (request, context) => {
    /* istanbul ignore next */
    cov_1n4duqffpm().f[8]++;
    const {
      user
    } =
    /* istanbul ignore next */
    (cov_1n4duqffpm().s[17]++, context);
    const startTime =
    /* istanbul ignore next */
    (cov_1n4duqffpm().s[18]++, Date.now());
    /* istanbul ignore next */
    cov_1n4duqffpm().s[19]++;
    try {
      // Extract request metadata for logging
      const metadata =
      /* istanbul ignore next */
      (cov_1n4duqffpm().s[20]++, config.logMetadata ?
      /* istanbul ignore next */
      (cov_1n4duqffpm().b[0][0]++, {
        method: request.method,
        url: request.url,
        userAgent: request.headers.get('user-agent'),
        ipAddress:
        /* istanbul ignore next */
        (cov_1n4duqffpm().b[1][0]++, request.headers.get('x-forwarded-for')) ||
        /* istanbul ignore next */
        (cov_1n4duqffpm().b[1][1]++, request.headers.get('x-real-ip')) ||
        /* istanbul ignore next */
        (cov_1n4duqffpm().b[1][2]++, 'unknown'),
        timestamp: new Date().toISOString()
      }) :
      /* istanbul ignore next */
      (cov_1n4duqffpm().b[0][1]++, {}));
      // 1. Check feature access if required
      /* istanbul ignore next */
      cov_1n4duqffpm().s[21]++;
      if (config.requireFeature) {
        /* istanbul ignore next */
        cov_1n4duqffpm().b[2][0]++;
        const tierManager =
        /* istanbul ignore next */
        (cov_1n4duqffpm().s[22]++, (0, _tiermanager.getTierManager)());
        const hasAccess =
        /* istanbul ignore next */
        (cov_1n4duqffpm().s[23]++, await tierManager.hasFeatureAccess(user.id, config.requireFeature));
        /* istanbul ignore next */
        cov_1n4duqffpm().s[24]++;
        if (!hasAccess) {
          /* istanbul ignore next */
          cov_1n4duqffpm().b[3][0]++;
          cov_1n4duqffpm().s[25]++;
          return _server.NextResponse.json({
            success: false,
            error: 'FEATURE_NOT_AVAILABLE',
            message: `Feature '${config.requireFeature}' is not available for your subscription tier`,
            upgradeRequired: true
          }, {
            status: 402
          });
        } else
        /* istanbul ignore next */
        {
          cov_1n4duqffpm().b[3][1]++;
        }
      } else
      /* istanbul ignore next */
      {
        cov_1n4duqffpm().b[2][1]++;
      }
      // 2. Enforce tier limits if configured
      cov_1n4duqffpm().s[26]++;
      if (config.enforceTierLimits) {
        /* istanbul ignore next */
        cov_1n4duqffpm().b[4][0]++;
        const tierManager =
        /* istanbul ignore next */
        (cov_1n4duqffpm().s[27]++, (0, _tiermanager.getTierManager)());
        /* istanbul ignore next */
        cov_1n4duqffpm().s[28]++;
        await tierManager.enforceActionLimits(user.id, config.enforceTierLimits.action, config.enforceTierLimits.quantity);
      } else
      /* istanbul ignore next */
      {
        cov_1n4duqffpm().b[4][1]++;
      }
      // 3. Enforce rate limits if configured
      cov_1n4duqffpm().s[29]++;
      if (config.enforceRateLimit) {
        /* istanbul ignore next */
        cov_1n4duqffpm().b[5][0]++;
        const rateLimiter =
        /* istanbul ignore next */
        (cov_1n4duqffpm().s[30]++, (0, _ratelimiter.getRateLimiter)());
        const rateLimitResult =
        /* istanbul ignore next */
        (cov_1n4duqffpm().s[31]++, await rateLimiter.enforceRateLimit(user.id, config.enforceRateLimit.action, config.enforceRateLimit.window));
        // Add rate limit headers to response
        const response =
        /* istanbul ignore next */
        (cov_1n4duqffpm().s[32]++, await handler(request, context));
        /* istanbul ignore next */
        cov_1n4duqffpm().s[33]++;
        response.headers.set('X-RateLimit-Limit', rateLimitResult.limit.toString());
        /* istanbul ignore next */
        cov_1n4duqffpm().s[34]++;
        response.headers.set('X-RateLimit-Remaining', rateLimitResult.remaining.toString());
        /* istanbul ignore next */
        cov_1n4duqffpm().s[35]++;
        response.headers.set('X-RateLimit-Reset', rateLimitResult.resetTime.toISOString());
        // 4. Track usage after successful operation
        /* istanbul ignore next */
        cov_1n4duqffpm().s[36]++;
        if (config.trackUsage) {
          /* istanbul ignore next */
          cov_1n4duqffpm().b[6][0]++;
          const usageTracker =
          /* istanbul ignore next */
          (cov_1n4duqffpm().s[37]++, (0, _usagetracker.getUsageTracker)());
          /* istanbul ignore next */
          cov_1n4duqffpm().s[38]++;
          await usageTracker.logUsage(user.id, config.trackUsage.action, {
            resourceType: config.trackUsage.resourceType,
            quantity: config.trackUsage.quantity,
            ipAddress: metadata.ipAddress,
            userAgent: metadata.userAgent,
            metadata: {
              ...metadata,
              processingTime: Date.now() - startTime,
              rateLimitUsed: rateLimitResult.limit - rateLimitResult.remaining
            }
          });
        } else
        /* istanbul ignore next */
        {
          cov_1n4duqffpm().b[6][1]++;
        }
        cov_1n4duqffpm().s[39]++;
        return response;
      } else
      /* istanbul ignore next */
      {
        cov_1n4duqffpm().b[5][1]++;
      }
      // Execute handler without rate limiting
      const response =
      /* istanbul ignore next */
      (cov_1n4duqffpm().s[40]++, await handler(request, context));
      // 4. Track usage after successful operation
      /* istanbul ignore next */
      cov_1n4duqffpm().s[41]++;
      if (config.trackUsage) {
        /* istanbul ignore next */
        cov_1n4duqffpm().b[7][0]++;
        const usageTracker =
        /* istanbul ignore next */
        (cov_1n4duqffpm().s[42]++, (0, _usagetracker.getUsageTracker)());
        /* istanbul ignore next */
        cov_1n4duqffpm().s[43]++;
        await usageTracker.logUsage(user.id, config.trackUsage.action, {
          resourceType: config.trackUsage.resourceType,
          quantity: config.trackUsage.quantity,
          ipAddress: metadata.ipAddress,
          userAgent: metadata.userAgent,
          metadata: {
            ...metadata,
            processingTime: Date.now() - startTime
          }
        });
      } else
      /* istanbul ignore next */
      {
        cov_1n4duqffpm().b[7][1]++;
      }
      cov_1n4duqffpm().s[44]++;
      return response;
    } catch (error) {
      const processingTime =
      /* istanbul ignore next */
      (cov_1n4duqffpm().s[45]++, Date.now() - startTime);
      // Log failed operation
      /* istanbul ignore next */
      cov_1n4duqffpm().s[46]++;
      if (config.trackUsage) {
        /* istanbul ignore next */
        cov_1n4duqffpm().b[8][0]++;
        cov_1n4duqffpm().s[47]++;
        try {
          const usageTracker =
          /* istanbul ignore next */
          (cov_1n4duqffpm().s[48]++, (0, _usagetracker.getUsageTracker)());
          /* istanbul ignore next */
          cov_1n4duqffpm().s[49]++;
          await usageTracker.logUsage(user.id, config.trackUsage.action, {
            resourceType: config.trackUsage.resourceType,
            quantity: 0,
            metadata: {
              failed: true,
              error: error.message,
              processingTime
            }
          });
        } catch (loggingError) {
          /* istanbul ignore next */
          cov_1n4duqffpm().s[50]++;
          _logger.logger.error('Failed to log failed operation', loggingError);
        }
      } else
      /* istanbul ignore next */
      {
        cov_1n4duqffpm().b[8][1]++;
      }
      // Re-throw the original error
      cov_1n4duqffpm().s[51]++;
      throw error;
    }
  };
}
function withChatControls(handler) {
  /* istanbul ignore next */
  cov_1n4duqffpm().f[9]++;
  cov_1n4duqffpm().s[52]++;
  return withUsageControls({
    trackUsage: {
      action: 'chat_message',
      resourceType: 'chat',
      quantity: 1
    },
    enforceRateLimit: {
      action: 'chat_message',
      window: 'minute'
    },
    enforceTierLimits: {
      action: 'chat',
      quantity: 1
    },
    requireFeature: 'ai_chat',
    logMetadata: true
  }, handler);
}
function withUploadControls(handler) {
  /* istanbul ignore next */
  cov_1n4duqffpm().f[10]++;
  cov_1n4duqffpm().s[53]++;
  return withUsageControls({
    trackUsage: {
      action: 'document_upload',
      resourceType: 'file',
      quantity: 1
    },
    enforceRateLimit: {
      action: 'document_upload',
      window: 'minute'
    },
    enforceTierLimits: {
      action: 'upload',
      quantity: 1
    },
    requireFeature: 'document_upload',
    logMetadata: true
  }, handler);
}
function withApiControls(handler) {
  /* istanbul ignore next */
  cov_1n4duqffpm().f[11]++;
  cov_1n4duqffpm().s[54]++;
  return withUsageControls({
    trackUsage: {
      action: 'api_call',
      resourceType: 'api',
      quantity: 1
    },
    enforceRateLimit: {
      action: 'api_request',
      window: 'minute'
    },
    enforceTierLimits: {
      action: 'api_call',
      quantity: 1
    },
    logMetadata: true
  }, handler);
}
function withSearchControls(handler) {
  /* istanbul ignore next */
  cov_1n4duqffpm().f[12]++;
  cov_1n4duqffpm().s[55]++;
  return withUsageControls({
    trackUsage: {
      action: 'vector_search',
      resourceType: 'search',
      quantity: 1
    },
    enforceRateLimit: {
      action: 'vector_search',
      window: 'minute'
    },
    logMetadata: true
  }, handler);
}
async function getUserUsageSummary(userId) {
  /* istanbul ignore next */
  cov_1n4duqffpm().f[13]++;
  cov_1n4duqffpm().s[56]++;
  try {
    const tierManager =
    /* istanbul ignore next */
    (cov_1n4duqffpm().s[57]++, (0, _tiermanager.getTierManager)());
    const rateLimiter =
    /* istanbul ignore next */
    (cov_1n4duqffpm().s[58]++, (0, _ratelimiter.getRateLimiter)());
    const usageTracker =
    /* istanbul ignore next */
    (cov_1n4duqffpm().s[59]++, (0, _usagetracker.getUsageTracker)());
    const [subscription, rateLimits, usageStats] =
    /* istanbul ignore next */
    (cov_1n4duqffpm().s[60]++, await Promise.all([tierManager.getUserSubscription(userId), rateLimiter.getRateLimitStatus(userId), usageTracker.getUserUsageStats(userId)]));
    const recommendations =
    /* istanbul ignore next */
    (cov_1n4duqffpm().s[61]++, await tierManager.getUpgradeRecommendations(userId));
    /* istanbul ignore next */
    cov_1n4duqffpm().s[62]++;
    return {
      subscription,
      currentUsage: usageStats,
      rateLimits,
      recommendations
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_1n4duqffpm().s[63]++;
    _logger.logger.error('Failed to get user usage summary', {
      userId
    }, error);
    /* istanbul ignore next */
    cov_1n4duqffpm().s[64]++;
    throw _apierrors.createError.databaseError('Failed to get usage summary', error);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMW40ZHVxZmZwbSIsInBhdGgiLCJoYXNoIiwiZ2xvYmFsIiwiRnVuY3Rpb24iLCJnY3YiLCJjb3ZlcmFnZURhdGEiLCJzdGF0ZW1lbnRNYXAiLCJzdGFydCIsImxpbmUiLCJjb2x1bW4iLCJlbmQiLCJmbk1hcCIsIm5hbWUiLCJkZWNsIiwibG9jIiwiYnJhbmNoTWFwIiwidHlwZSIsImxvY2F0aW9ucyIsInVuZGVmaW5lZCIsInMiLCJmIiwiYiIsImlucHV0U291cmNlTWFwIiwidmVyc2lvbiIsInNvdXJjZXMiLCJzb3VyY2VzQ29udGVudCIsIm5hbWVzIiwibWFwcGluZ3MiLCJfY292ZXJhZ2VTY2hlbWEiLCJjb3ZlcmFnZSIsImFjdHVhbENvdmVyYWdlIiwiZ2V0VXNlclVzYWdlU3VtbWFyeSIsIndpdGhBcGlDb250cm9scyIsIndpdGhDaGF0Q29udHJvbHMiLCJ3aXRoU2VhcmNoQ29udHJvbHMiLCJ3aXRoVXBsb2FkQ29udHJvbHMiLCJ3aXRoVXNhZ2VDb250cm9scyIsImNvbmZpZyIsImhhbmRsZXIiLCJyZXF1ZXN0IiwiY29udGV4dCIsInVzZXIiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwibWV0YWRhdGEiLCJsb2dNZXRhZGF0YSIsIm1ldGhvZCIsInVybCIsInVzZXJBZ2VudCIsImhlYWRlcnMiLCJnZXQiLCJpcEFkZHJlc3MiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsInJlcXVpcmVGZWF0dXJlIiwidGllck1hbmFnZXIiLCJfdGllcm1hbmFnZXIiLCJnZXRUaWVyTWFuYWdlciIsImhhc0FjY2VzcyIsImhhc0ZlYXR1cmVBY2Nlc3MiLCJpZCIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwibWVzc2FnZSIsInVwZ3JhZGVSZXF1aXJlZCIsInN0YXR1cyIsImVuZm9yY2VUaWVyTGltaXRzIiwiZW5mb3JjZUFjdGlvbkxpbWl0cyIsImFjdGlvbiIsInF1YW50aXR5IiwiZW5mb3JjZVJhdGVMaW1pdCIsInJhdGVMaW1pdGVyIiwiX3JhdGVsaW1pdGVyIiwiZ2V0UmF0ZUxpbWl0ZXIiLCJyYXRlTGltaXRSZXN1bHQiLCJ3aW5kb3ciLCJyZXNwb25zZSIsInNldCIsImxpbWl0IiwidG9TdHJpbmciLCJyZW1haW5pbmciLCJyZXNldFRpbWUiLCJ0cmFja1VzYWdlIiwidXNhZ2VUcmFja2VyIiwiX3VzYWdldHJhY2tlciIsImdldFVzYWdlVHJhY2tlciIsImxvZ1VzYWdlIiwicmVzb3VyY2VUeXBlIiwicHJvY2Vzc2luZ1RpbWUiLCJyYXRlTGltaXRVc2VkIiwiZmFpbGVkIiwibG9nZ2luZ0Vycm9yIiwiX2xvZ2dlciIsImxvZ2dlciIsInVzZXJJZCIsInN1YnNjcmlwdGlvbiIsInJhdGVMaW1pdHMiLCJ1c2FnZVN0YXRzIiwiUHJvbWlzZSIsImFsbCIsImdldFVzZXJTdWJzY3JpcHRpb24iLCJnZXRSYXRlTGltaXRTdGF0dXMiLCJnZXRVc2VyVXNhZ2VTdGF0cyIsInJlY29tbWVuZGF0aW9ucyIsImdldFVwZ3JhZGVSZWNvbW1lbmRhdGlvbnMiLCJjdXJyZW50VXNhZ2UiLCJfYXBpZXJyb3JzIiwiY3JlYXRlRXJyb3IiLCJkYXRhYmFzZUVycm9yIl0sInNvdXJjZXMiOlsiUjpcXEFwcHNcXEJyaWVmbHlfQ2xvdWRcXGJyaWVmbHktY2xvdWQtbmV4dGpzXFxzcmNcXGFwcFxcbGliXFx1c2FnZVxcdXNhZ2UtbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVXNhZ2UgTWlkZGxld2FyZVxyXG4gKiBcclxuICogVGhpcyBtaWRkbGV3YXJlIGludGVncmF0ZXMgdXNhZ2UgdHJhY2tpbmcsIHJhdGUgbGltaXRpbmcsIGFuZCB0aWVyIGVuZm9yY2VtZW50XHJcbiAqIGZvciBhbGwgQVBJIHJvdXRlcyBpbiB0aGUgbXVsdGktdGVuYW50IGFyY2hpdGVjdHVyZS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGdldFVzYWdlVHJhY2tlciwgdHlwZSBVc2FnZUFjdGlvbiB9IGZyb20gJy4vdXNhZ2UtdHJhY2tlcidcclxuaW1wb3J0IHsgZ2V0UmF0ZUxpbWl0ZXIsIHR5cGUgUmF0ZUxpbWl0QWN0aW9uLCB0eXBlIFJhdGVMaW1pdFdpbmRvdyB9IGZyb20gJy4vcmF0ZS1saW1pdGVyJ1xyXG5pbXBvcnQgeyBnZXRUaWVyTWFuYWdlciB9IGZyb20gJy4vdGllci1tYW5hZ2VyJ1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL2FwcC9saWIvbG9nZ2VyJ1xyXG5pbXBvcnQgeyBjcmVhdGVFcnJvciB9IGZyb20gJ0AvYXBwL2xpYi9hcGktZXJyb3JzJ1xyXG5pbXBvcnQgdHlwZSB7IEF1dGhDb250ZXh0IH0gZnJvbSAnQC9hcHAvbGliL2F1dGgvYXV0aC1taWRkbGV3YXJlJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2FnZU1pZGRsZXdhcmVDb25maWcge1xyXG4gIHRyYWNrVXNhZ2U/OiB7XHJcbiAgICBhY3Rpb246IFVzYWdlQWN0aW9uXHJcbiAgICByZXNvdXJjZVR5cGU/OiBzdHJpbmdcclxuICAgIHF1YW50aXR5PzogbnVtYmVyXHJcbiAgfVxyXG4gIGVuZm9yY2VSYXRlTGltaXQ/OiB7XHJcbiAgICBhY3Rpb246IFJhdGVMaW1pdEFjdGlvblxyXG4gICAgd2luZG93PzogUmF0ZUxpbWl0V2luZG93XHJcbiAgfVxyXG4gIGVuZm9yY2VUaWVyTGltaXRzPzoge1xyXG4gICAgYWN0aW9uOiAndXBsb2FkJyB8ICdjaGF0JyB8ICdhcGlfY2FsbCcgfCAnc3RvcmFnZSdcclxuICAgIHF1YW50aXR5PzogbnVtYmVyXHJcbiAgfVxyXG4gIHJlcXVpcmVGZWF0dXJlPzogc3RyaW5nXHJcbiAgbG9nTWV0YWRhdGE/OiBib29sZWFuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVc2FnZSB0cmFja2luZyBhbmQgZW5mb3JjZW1lbnQgbWlkZGxld2FyZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhVc2FnZUNvbnRyb2xzKFxyXG4gIGNvbmZpZzogVXNhZ2VNaWRkbGV3YXJlQ29uZmlnLFxyXG4gIGhhbmRsZXI6IChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgY29udGV4dDogQXV0aENvbnRleHQpID0+IFByb21pc2U8TmV4dFJlc3BvbnNlPlxyXG4pIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBjb250ZXh0OiBBdXRoQ29udGV4dCk6IFByb21pc2U8TmV4dFJlc3BvbnNlPiA9PiB7XHJcbiAgICBjb25zdCB7IHVzZXIgfSA9IGNvbnRleHRcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBFeHRyYWN0IHJlcXVlc3QgbWV0YWRhdGEgZm9yIGxvZ2dpbmdcclxuICAgICAgY29uc3QgbWV0YWRhdGEgPSBjb25maWcubG9nTWV0YWRhdGEgPyB7XHJcbiAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcclxuICAgICAgICB1cmw6IHJlcXVlc3QudXJsLFxyXG4gICAgICAgIHVzZXJBZ2VudDogcmVxdWVzdC5oZWFkZXJzLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgICAgIGlwQWRkcmVzczogcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgXHJcbiAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKSB8fCBcclxuICAgICAgICAgICAgICAgICAgICd1bmtub3duJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9IDoge31cclxuXHJcbiAgICAgIC8vIDEuIENoZWNrIGZlYXR1cmUgYWNjZXNzIGlmIHJlcXVpcmVkXHJcbiAgICAgIGlmIChjb25maWcucmVxdWlyZUZlYXR1cmUpIHtcclxuICAgICAgICBjb25zdCB0aWVyTWFuYWdlciA9IGdldFRpZXJNYW5hZ2VyKClcclxuICAgICAgICBjb25zdCBoYXNBY2Nlc3MgPSBhd2FpdCB0aWVyTWFuYWdlci5oYXNGZWF0dXJlQWNjZXNzKHVzZXIuaWQsIGNvbmZpZy5yZXF1aXJlRmVhdHVyZSlcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWhhc0FjY2Vzcykge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgZXJyb3I6ICdGRUFUVVJFX05PVF9BVkFJTEFCTEUnLFxyXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGBGZWF0dXJlICcke2NvbmZpZy5yZXF1aXJlRmVhdHVyZX0nIGlzIG5vdCBhdmFpbGFibGUgZm9yIHlvdXIgc3Vic2NyaXB0aW9uIHRpZXJgLFxyXG4gICAgICAgICAgICAgIHVwZ3JhZGVSZXF1aXJlZDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7IHN0YXR1czogNDAyIH1cclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDIuIEVuZm9yY2UgdGllciBsaW1pdHMgaWYgY29uZmlndXJlZFxyXG4gICAgICBpZiAoY29uZmlnLmVuZm9yY2VUaWVyTGltaXRzKSB7XHJcbiAgICAgICAgY29uc3QgdGllck1hbmFnZXIgPSBnZXRUaWVyTWFuYWdlcigpXHJcbiAgICAgICAgYXdhaXQgdGllck1hbmFnZXIuZW5mb3JjZUFjdGlvbkxpbWl0cyhcclxuICAgICAgICAgIHVzZXIuaWQsXHJcbiAgICAgICAgICBjb25maWcuZW5mb3JjZVRpZXJMaW1pdHMuYWN0aW9uLFxyXG4gICAgICAgICAgY29uZmlnLmVuZm9yY2VUaWVyTGltaXRzLnF1YW50aXR5XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAzLiBFbmZvcmNlIHJhdGUgbGltaXRzIGlmIGNvbmZpZ3VyZWRcclxuICAgICAgaWYgKGNvbmZpZy5lbmZvcmNlUmF0ZUxpbWl0KSB7XHJcbiAgICAgICAgY29uc3QgcmF0ZUxpbWl0ZXIgPSBnZXRSYXRlTGltaXRlcigpXHJcbiAgICAgICAgY29uc3QgcmF0ZUxpbWl0UmVzdWx0ID0gYXdhaXQgcmF0ZUxpbWl0ZXIuZW5mb3JjZVJhdGVMaW1pdChcclxuICAgICAgICAgIHVzZXIuaWQsXHJcbiAgICAgICAgICBjb25maWcuZW5mb3JjZVJhdGVMaW1pdC5hY3Rpb24sXHJcbiAgICAgICAgICBjb25maWcuZW5mb3JjZVJhdGVMaW1pdC53aW5kb3dcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vIEFkZCByYXRlIGxpbWl0IGhlYWRlcnMgdG8gcmVzcG9uc2VcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIocmVxdWVzdCwgY29udGV4dClcclxuICAgICAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnWC1SYXRlTGltaXQtTGltaXQnLCByYXRlTGltaXRSZXN1bHQubGltaXQudG9TdHJpbmcoKSlcclxuICAgICAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnWC1SYXRlTGltaXQtUmVtYWluaW5nJywgcmF0ZUxpbWl0UmVzdWx0LnJlbWFpbmluZy50b1N0cmluZygpKVxyXG4gICAgICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdYLVJhdGVMaW1pdC1SZXNldCcsIHJhdGVMaW1pdFJlc3VsdC5yZXNldFRpbWUudG9JU09TdHJpbmcoKSlcclxuXHJcbiAgICAgICAgLy8gNC4gVHJhY2sgdXNhZ2UgYWZ0ZXIgc3VjY2Vzc2Z1bCBvcGVyYXRpb25cclxuICAgICAgICBpZiAoY29uZmlnLnRyYWNrVXNhZ2UpIHtcclxuICAgICAgICAgIGNvbnN0IHVzYWdlVHJhY2tlciA9IGdldFVzYWdlVHJhY2tlcigpXHJcbiAgICAgICAgICBhd2FpdCB1c2FnZVRyYWNrZXIubG9nVXNhZ2UodXNlci5pZCwgY29uZmlnLnRyYWNrVXNhZ2UuYWN0aW9uLCB7XHJcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogY29uZmlnLnRyYWNrVXNhZ2UucmVzb3VyY2VUeXBlLFxyXG4gICAgICAgICAgICBxdWFudGl0eTogY29uZmlnLnRyYWNrVXNhZ2UucXVhbnRpdHksXHJcbiAgICAgICAgICAgIGlwQWRkcmVzczogbWV0YWRhdGEuaXBBZGRyZXNzLFxyXG4gICAgICAgICAgICB1c2VyQWdlbnQ6IG1ldGFkYXRhLnVzZXJBZ2VudCxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgICAuLi5tZXRhZGF0YSxcclxuICAgICAgICAgICAgICBwcm9jZXNzaW5nVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcclxuICAgICAgICAgICAgICByYXRlTGltaXRVc2VkOiByYXRlTGltaXRSZXN1bHQubGltaXQgLSByYXRlTGltaXRSZXN1bHQucmVtYWluaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRXhlY3V0ZSBoYW5kbGVyIHdpdGhvdXQgcmF0ZSBsaW1pdGluZ1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIocmVxdWVzdCwgY29udGV4dClcclxuXHJcbiAgICAgIC8vIDQuIFRyYWNrIHVzYWdlIGFmdGVyIHN1Y2Nlc3NmdWwgb3BlcmF0aW9uXHJcbiAgICAgIGlmIChjb25maWcudHJhY2tVc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IHVzYWdlVHJhY2tlciA9IGdldFVzYWdlVHJhY2tlcigpXHJcbiAgICAgICAgYXdhaXQgdXNhZ2VUcmFja2VyLmxvZ1VzYWdlKHVzZXIuaWQsIGNvbmZpZy50cmFja1VzYWdlLmFjdGlvbiwge1xyXG4gICAgICAgICAgcmVzb3VyY2VUeXBlOiBjb25maWcudHJhY2tVc2FnZS5yZXNvdXJjZVR5cGUsXHJcbiAgICAgICAgICBxdWFudGl0eTogY29uZmlnLnRyYWNrVXNhZ2UucXVhbnRpdHksXHJcbiAgICAgICAgICBpcEFkZHJlc3M6IG1ldGFkYXRhLmlwQWRkcmVzcyxcclxuICAgICAgICAgIHVzZXJBZ2VudDogbWV0YWRhdGEudXNlckFnZW50LFxyXG4gICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgLi4ubWV0YWRhdGEsXHJcbiAgICAgICAgICAgIHByb2Nlc3NpbmdUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgcHJvY2Vzc2luZ1RpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXHJcblxyXG4gICAgICAvLyBMb2cgZmFpbGVkIG9wZXJhdGlvblxyXG4gICAgICBpZiAoY29uZmlnLnRyYWNrVXNhZ2UpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgdXNhZ2VUcmFja2VyID0gZ2V0VXNhZ2VUcmFja2VyKClcclxuICAgICAgICAgIGF3YWl0IHVzYWdlVHJhY2tlci5sb2dVc2FnZSh1c2VyLmlkLCBjb25maWcudHJhY2tVc2FnZS5hY3Rpb24sIHtcclxuICAgICAgICAgICAgcmVzb3VyY2VUeXBlOiBjb25maWcudHJhY2tVc2FnZS5yZXNvdXJjZVR5cGUsXHJcbiAgICAgICAgICAgIHF1YW50aXR5OiAwLCAvLyBObyB1c2FnZSBjb3VudGVkIGZvciBmYWlsZWQgb3BlcmF0aW9uc1xyXG4gICAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICAgIGZhaWxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICBlcnJvcjogKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgIHByb2Nlc3NpbmdUaW1lXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBjYXRjaCAobG9nZ2luZ0Vycm9yKSB7XHJcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgZmFpbGVkIG9wZXJhdGlvbicsIGxvZ2dpbmdFcnJvciBhcyBFcnJvcilcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJlLXRocm93IHRoZSBvcmlnaW5hbCBlcnJvclxyXG4gICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnZlbmllbmNlIG1pZGRsZXdhcmUgY3JlYXRvcnNcclxuICovXHJcblxyXG4vKipcclxuICogTWlkZGxld2FyZSBmb3IgY2hhdCBvcGVyYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gd2l0aENoYXRDb250cm9scyhcclxuICBoYW5kbGVyOiAocmVxdWVzdDogTmV4dFJlcXVlc3QsIGNvbnRleHQ6IEF1dGhDb250ZXh0KSA9PiBQcm9taXNlPE5leHRSZXNwb25zZT5cclxuKSB7XHJcbiAgcmV0dXJuIHdpdGhVc2FnZUNvbnRyb2xzKHtcclxuICAgIHRyYWNrVXNhZ2U6IHtcclxuICAgICAgYWN0aW9uOiAnY2hhdF9tZXNzYWdlJyxcclxuICAgICAgcmVzb3VyY2VUeXBlOiAnY2hhdCcsXHJcbiAgICAgIHF1YW50aXR5OiAxXHJcbiAgICB9LFxyXG4gICAgZW5mb3JjZVJhdGVMaW1pdDoge1xyXG4gICAgICBhY3Rpb246ICdjaGF0X21lc3NhZ2UnLFxyXG4gICAgICB3aW5kb3c6ICdtaW51dGUnXHJcbiAgICB9LFxyXG4gICAgZW5mb3JjZVRpZXJMaW1pdHM6IHtcclxuICAgICAgYWN0aW9uOiAnY2hhdCcsXHJcbiAgICAgIHF1YW50aXR5OiAxXHJcbiAgICB9LFxyXG4gICAgcmVxdWlyZUZlYXR1cmU6ICdhaV9jaGF0JyxcclxuICAgIGxvZ01ldGFkYXRhOiB0cnVlXHJcbiAgfSwgaGFuZGxlcilcclxufVxyXG5cclxuLyoqXHJcbiAqIE1pZGRsZXdhcmUgZm9yIHVwbG9hZCBvcGVyYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gd2l0aFVwbG9hZENvbnRyb2xzKFxyXG4gIGhhbmRsZXI6IChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgY29udGV4dDogQXV0aENvbnRleHQpID0+IFByb21pc2U8TmV4dFJlc3BvbnNlPlxyXG4pIHtcclxuICByZXR1cm4gd2l0aFVzYWdlQ29udHJvbHMoe1xyXG4gICAgdHJhY2tVc2FnZToge1xyXG4gICAgICBhY3Rpb246ICdkb2N1bWVudF91cGxvYWQnLFxyXG4gICAgICByZXNvdXJjZVR5cGU6ICdmaWxlJyxcclxuICAgICAgcXVhbnRpdHk6IDFcclxuICAgIH0sXHJcbiAgICBlbmZvcmNlUmF0ZUxpbWl0OiB7XHJcbiAgICAgIGFjdGlvbjogJ2RvY3VtZW50X3VwbG9hZCcsXHJcbiAgICAgIHdpbmRvdzogJ21pbnV0ZSdcclxuICAgIH0sXHJcbiAgICBlbmZvcmNlVGllckxpbWl0czoge1xyXG4gICAgICBhY3Rpb246ICd1cGxvYWQnLFxyXG4gICAgICBxdWFudGl0eTogMVxyXG4gICAgfSxcclxuICAgIHJlcXVpcmVGZWF0dXJlOiAnZG9jdW1lbnRfdXBsb2FkJyxcclxuICAgIGxvZ01ldGFkYXRhOiB0cnVlXHJcbiAgfSwgaGFuZGxlcilcclxufVxyXG5cclxuLyoqXHJcbiAqIE1pZGRsZXdhcmUgZm9yIEFQSSBvcGVyYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gd2l0aEFwaUNvbnRyb2xzKFxyXG4gIGhhbmRsZXI6IChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgY29udGV4dDogQXV0aENvbnRleHQpID0+IFByb21pc2U8TmV4dFJlc3BvbnNlPlxyXG4pIHtcclxuICByZXR1cm4gd2l0aFVzYWdlQ29udHJvbHMoe1xyXG4gICAgdHJhY2tVc2FnZToge1xyXG4gICAgICBhY3Rpb246ICdhcGlfY2FsbCcsXHJcbiAgICAgIHJlc291cmNlVHlwZTogJ2FwaScsXHJcbiAgICAgIHF1YW50aXR5OiAxXHJcbiAgICB9LFxyXG4gICAgZW5mb3JjZVJhdGVMaW1pdDoge1xyXG4gICAgICBhY3Rpb246ICdhcGlfcmVxdWVzdCcsXHJcbiAgICAgIHdpbmRvdzogJ21pbnV0ZSdcclxuICAgIH0sXHJcbiAgICBlbmZvcmNlVGllckxpbWl0czoge1xyXG4gICAgICBhY3Rpb246ICdhcGlfY2FsbCcsXHJcbiAgICAgIHF1YW50aXR5OiAxXHJcbiAgICB9LFxyXG4gICAgbG9nTWV0YWRhdGE6IHRydWVcclxuICB9LCBoYW5kbGVyKVxyXG59XHJcblxyXG4vKipcclxuICogTWlkZGxld2FyZSBmb3IgdmVjdG9yIHNlYXJjaCBvcGVyYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gd2l0aFNlYXJjaENvbnRyb2xzKFxyXG4gIGhhbmRsZXI6IChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgY29udGV4dDogQXV0aENvbnRleHQpID0+IFByb21pc2U8TmV4dFJlc3BvbnNlPlxyXG4pIHtcclxuICByZXR1cm4gd2l0aFVzYWdlQ29udHJvbHMoe1xyXG4gICAgdHJhY2tVc2FnZToge1xyXG4gICAgICBhY3Rpb246ICd2ZWN0b3Jfc2VhcmNoJyxcclxuICAgICAgcmVzb3VyY2VUeXBlOiAnc2VhcmNoJyxcclxuICAgICAgcXVhbnRpdHk6IDFcclxuICAgIH0sXHJcbiAgICBlbmZvcmNlUmF0ZUxpbWl0OiB7XHJcbiAgICAgIGFjdGlvbjogJ3ZlY3Rvcl9zZWFyY2gnLFxyXG4gICAgICB3aW5kb3c6ICdtaW51dGUnXHJcbiAgICB9LFxyXG4gICAgbG9nTWV0YWRhdGE6IHRydWVcclxuICB9LCBoYW5kbGVyKVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVzYWdlIHN1bW1hcnkgZm9yIGEgdXNlclxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJVc2FnZVN1bW1hcnkodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzdWJzY3JpcHRpb246IGFueVxyXG4gIGN1cnJlbnRVc2FnZTogYW55XHJcbiAgcmF0ZUxpbWl0czogYW55XHJcbiAgcmVjb21tZW5kYXRpb25zPzogYW55XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdGllck1hbmFnZXIgPSBnZXRUaWVyTWFuYWdlcigpXHJcbiAgICBjb25zdCByYXRlTGltaXRlciA9IGdldFJhdGVMaW1pdGVyKClcclxuICAgIGNvbnN0IHVzYWdlVHJhY2tlciA9IGdldFVzYWdlVHJhY2tlcigpXHJcblxyXG4gICAgY29uc3QgW3N1YnNjcmlwdGlvbiwgcmF0ZUxpbWl0cywgdXNhZ2VTdGF0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIHRpZXJNYW5hZ2VyLmdldFVzZXJTdWJzY3JpcHRpb24odXNlcklkKSxcclxuICAgICAgcmF0ZUxpbWl0ZXIuZ2V0UmF0ZUxpbWl0U3RhdHVzKHVzZXJJZCksXHJcbiAgICAgIHVzYWdlVHJhY2tlci5nZXRVc2VyVXNhZ2VTdGF0cyh1c2VySWQpXHJcbiAgICBdKVxyXG5cclxuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IHRpZXJNYW5hZ2VyLmdldFVwZ3JhZGVSZWNvbW1lbmRhdGlvbnModXNlcklkKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1YnNjcmlwdGlvbixcclxuICAgICAgY3VycmVudFVzYWdlOiB1c2FnZVN0YXRzLFxyXG4gICAgICByYXRlTGltaXRzLFxyXG4gICAgICByZWNvbW1lbmRhdGlvbnNcclxuICAgIH1cclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCB1c2VyIHVzYWdlIHN1bW1hcnknLCB7IHVzZXJJZCB9LCBlcnJvciBhcyBFcnJvcilcclxuICAgIHRocm93IGNyZWF0ZUVycm9yLmRhdGFiYXNlRXJyb3IoJ0ZhaWxlZCB0byBnZXQgdXNhZ2Ugc3VtbWFyeScsIGVycm9yIGFzIEVycm9yKVxyXG4gIH1cclxufSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0dBS0M7O0FBQUE7QUFBQSxTQUFBQSxlQUFBO0VBQUEsSUFBQUMsSUFBQTtFQUFBLElBQUFDLElBQUE7RUFBQSxJQUFBQyxNQUFBLE9BQUFDLFFBQUE7RUFBQSxJQUFBQyxHQUFBO0VBQUEsSUFBQUMsWUFBQTtJQUFBTCxJQUFBO0lBQUFNLFlBQUE7TUFBQTtRQUFBQyxLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO0lBQUE7SUFBQUUsS0FBQTtNQUFBO1FBQUFDLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtJQUFBO0lBQUFPLFNBQUE7TUFBQTtRQUFBRCxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFPLElBQUE7UUFBQUMsU0FBQTtVQUFBVixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBRCxJQUFBO01BQUE7TUFBQTtRQUFBTSxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFPLElBQUE7UUFBQUMsU0FBQTtVQUFBVixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBRCxJQUFBO01BQUE7TUFBQTtRQUFBTSxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFPLElBQUE7UUFBQUMsU0FBQTtVQUFBVixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUEsRUFBQVUsU0FBQTtZQUFBVCxNQUFBLEVBQUFTO1VBQUE7VUFBQVIsR0FBQTtZQUFBRixJQUFBLEVBQUFVLFNBQUE7WUFBQVQsTUFBQSxFQUFBUztVQUFBO1FBQUE7UUFBQVYsSUFBQTtNQUFBO01BQUE7UUFBQU0sR0FBQTtVQUFBUCxLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBTyxJQUFBO1FBQUFDLFNBQUE7VUFBQVYsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7VUFBQUYsS0FBQTtZQUFBQyxJQUFBLEVBQUFVLFNBQUE7WUFBQVQsTUFBQSxFQUFBUztVQUFBO1VBQUFSLEdBQUE7WUFBQUYsSUFBQSxFQUFBVSxTQUFBO1lBQUFULE1BQUEsRUFBQVM7VUFBQTtRQUFBO1FBQUFWLElBQUE7TUFBQTtNQUFBO1FBQUFNLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQU8sSUFBQTtRQUFBQyxTQUFBO1VBQUFWLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1VBQUFGLEtBQUE7WUFBQUMsSUFBQSxFQUFBVSxTQUFBO1lBQUFULE1BQUEsRUFBQVM7VUFBQTtVQUFBUixHQUFBO1lBQUFGLElBQUEsRUFBQVUsU0FBQTtZQUFBVCxNQUFBLEVBQUFTO1VBQUE7UUFBQTtRQUFBVixJQUFBO01BQUE7TUFBQTtRQUFBTSxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFPLElBQUE7UUFBQUMsU0FBQTtVQUFBVixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUEsRUFBQVUsU0FBQTtZQUFBVCxNQUFBLEVBQUFTO1VBQUE7VUFBQVIsR0FBQTtZQUFBRixJQUFBLEVBQUFVLFNBQUE7WUFBQVQsTUFBQSxFQUFBUztVQUFBO1FBQUE7UUFBQVYsSUFBQTtNQUFBO01BQUE7UUFBQU0sR0FBQTtVQUFBUCxLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBTyxJQUFBO1FBQUFDLFNBQUE7VUFBQVYsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7VUFBQUYsS0FBQTtZQUFBQyxJQUFBLEVBQUFVLFNBQUE7WUFBQVQsTUFBQSxFQUFBUztVQUFBO1VBQUFSLEdBQUE7WUFBQUYsSUFBQSxFQUFBVSxTQUFBO1lBQUFULE1BQUEsRUFBQVM7VUFBQTtRQUFBO1FBQUFWLElBQUE7TUFBQTtNQUFBO1FBQUFNLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQU8sSUFBQTtRQUFBQyxTQUFBO1VBQUFWLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1VBQUFGLEtBQUE7WUFBQUMsSUFBQSxFQUFBVSxTQUFBO1lBQUFULE1BQUEsRUFBQVM7VUFBQTtVQUFBUixHQUFBO1lBQUFGLElBQUEsRUFBQVUsU0FBQTtZQUFBVCxNQUFBLEVBQUFTO1VBQUE7UUFBQTtRQUFBVixJQUFBO01BQUE7TUFBQTtRQUFBTSxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFPLElBQUE7UUFBQUMsU0FBQTtVQUFBVixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUEsRUFBQVUsU0FBQTtZQUFBVCxNQUFBLEVBQUFTO1VBQUE7VUFBQVIsR0FBQTtZQUFBRixJQUFBLEVBQUFVLFNBQUE7WUFBQVQsTUFBQSxFQUFBUztVQUFBO1FBQUE7UUFBQVYsSUFBQTtNQUFBO0lBQUE7SUFBQVcsQ0FBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7SUFBQTtJQUFBQyxDQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtJQUFBO0lBQUFDLENBQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7SUFBQTtJQUFBQyxjQUFBO01BQUFDLE9BQUE7TUFBQUMsT0FBQTtNQUFBQyxjQUFBO01BQUFDLEtBQUE7TUFBQUMsUUFBQTtJQUFBO0lBQUFDLGVBQUE7SUFBQTNCLElBQUE7RUFBQTtFQUFBLElBQUE0QixRQUFBLEdBQUEzQixNQUFBLENBQUFFLEdBQUEsTUFBQUYsTUFBQSxDQUFBRSxHQUFBO0VBQUEsS0FBQXlCLFFBQUEsQ0FBQTdCLElBQUEsS0FBQTZCLFFBQUEsQ0FBQTdCLElBQUEsRUFBQUMsSUFBQSxLQUFBQSxJQUFBO0lBQUE0QixRQUFBLENBQUE3QixJQUFBLElBQUFLLFlBQUE7RUFBQTtFQUFBLElBQUF5QixjQUFBLEdBQUFELFFBQUEsQ0FBQTdCLElBQUE7RUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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