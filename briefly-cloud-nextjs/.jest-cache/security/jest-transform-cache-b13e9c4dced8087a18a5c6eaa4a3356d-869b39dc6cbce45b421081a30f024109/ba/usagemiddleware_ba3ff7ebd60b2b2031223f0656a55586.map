{"version":3,"names":["cov_1n4duqffpm","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","getUserUsageSummary","withApiControls","withChatControls","withSearchControls","withUploadControls","withUsageControls","config","handler","request","context","user","startTime","Date","now","metadata","logMetadata","method","url","userAgent","headers","get","ipAddress","timestamp","toISOString","requireFeature","tierManager","_tiermanager","getTierManager","hasAccess","hasFeatureAccess","id","_server","NextResponse","json","success","error","message","upgradeRequired","status","enforceTierLimits","enforceActionLimits","action","quantity","enforceRateLimit","rateLimiter","_ratelimiter","getRateLimiter","rateLimitResult","window","response","set","limit","toString","remaining","resetTime","trackUsage","usageTracker","_usagetracker","getUsageTracker","logUsage","resourceType","processingTime","rateLimitUsed","failed","loggingError","_logger","logger","userId","subscription","rateLimits","usageStats","Promise","all","getUserSubscription","getRateLimitStatus","getUserUsageStats","recommendations","getUpgradeRecommendations","currentUsage","_apierrors","createError","databaseError"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\lib\\usage\\usage-middleware.ts"],"sourcesContent":["/**\r\n * Usage Middleware\r\n * \r\n * This middleware integrates usage tracking, rate limiting, and tier enforcement\r\n * for all API routes in the multi-tenant architecture.\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport { getUsageTracker, type UsageAction } from './usage-tracker'\r\nimport { getRateLimiter, type RateLimitAction, type RateLimitWindow } from './rate-limiter'\r\nimport { getTierManager } from './tier-manager'\r\nimport { logger } from '@/app/lib/logger'\r\nimport { createError } from '@/app/lib/api-errors'\r\nimport type { AuthContext } from '@/app/lib/auth/auth-middleware'\r\n\r\nexport interface UsageMiddlewareConfig {\r\n  trackUsage?: {\r\n    action: UsageAction\r\n    resourceType?: string\r\n    quantity?: number\r\n  }\r\n  enforceRateLimit?: {\r\n    action: RateLimitAction\r\n    window?: RateLimitWindow\r\n  }\r\n  enforceTierLimits?: {\r\n    action: 'upload' | 'chat' | 'api_call' | 'storage'\r\n    quantity?: number\r\n  }\r\n  requireFeature?: string\r\n  logMetadata?: boolean\r\n}\r\n\r\n/**\r\n * Usage tracking and enforcement middleware\r\n */\r\nexport function withUsageControls(\r\n  config: UsageMiddlewareConfig,\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return async (request: NextRequest, context: AuthContext): Promise<NextResponse> => {\r\n    const { user } = context\r\n    const startTime = Date.now()\r\n\r\n    try {\r\n      // Extract request metadata for logging\r\n      const metadata = config.logMetadata ? {\r\n        method: request.method,\r\n        url: request.url,\r\n        userAgent: request.headers.get('user-agent'),\r\n        ipAddress: request.headers.get('x-forwarded-for') || \r\n                   request.headers.get('x-real-ip') || \r\n                   'unknown',\r\n        timestamp: new Date().toISOString()\r\n      } : {}\r\n\r\n      // 1. Check feature access if required\r\n      if (config.requireFeature) {\r\n        const tierManager = getTierManager()\r\n        const hasAccess = await tierManager.hasFeatureAccess(user.id, config.requireFeature)\r\n        \r\n        if (!hasAccess) {\r\n          return NextResponse.json(\r\n            {\r\n              success: false,\r\n              error: 'FEATURE_NOT_AVAILABLE',\r\n              message: `Feature '${config.requireFeature}' is not available for your subscription tier`,\r\n              upgradeRequired: true\r\n            },\r\n            { status: 402 }\r\n          )\r\n        }\r\n      }\r\n\r\n      // 2. Enforce tier limits if configured\r\n      if (config.enforceTierLimits) {\r\n        const tierManager = getTierManager()\r\n        await tierManager.enforceActionLimits(\r\n          user.id,\r\n          config.enforceTierLimits.action,\r\n          config.enforceTierLimits.quantity\r\n        )\r\n      }\r\n\r\n      // 3. Enforce rate limits if configured\r\n      if (config.enforceRateLimit) {\r\n        const rateLimiter = getRateLimiter()\r\n        const rateLimitResult = await rateLimiter.enforceRateLimit(\r\n          user.id,\r\n          config.enforceRateLimit.action,\r\n          config.enforceRateLimit.window\r\n        )\r\n\r\n        // Add rate limit headers to response\r\n        const response = await handler(request, context)\r\n        response.headers.set('X-RateLimit-Limit', rateLimitResult.limit.toString())\r\n        response.headers.set('X-RateLimit-Remaining', rateLimitResult.remaining.toString())\r\n        response.headers.set('X-RateLimit-Reset', rateLimitResult.resetTime.toISOString())\r\n\r\n        // 4. Track usage after successful operation\r\n        if (config.trackUsage) {\r\n          const usageTracker = getUsageTracker()\r\n          await usageTracker.logUsage(user.id, config.trackUsage.action, {\r\n            resourceType: config.trackUsage.resourceType,\r\n            quantity: config.trackUsage.quantity,\r\n            ipAddress: metadata.ipAddress,\r\n            userAgent: metadata.userAgent,\r\n            metadata: {\r\n              ...metadata,\r\n              processingTime: Date.now() - startTime,\r\n              rateLimitUsed: rateLimitResult.limit - rateLimitResult.remaining\r\n            }\r\n          })\r\n        }\r\n\r\n        return response\r\n      }\r\n\r\n      // Execute handler without rate limiting\r\n      const response = await handler(request, context)\r\n\r\n      // 4. Track usage after successful operation\r\n      if (config.trackUsage) {\r\n        const usageTracker = getUsageTracker()\r\n        await usageTracker.logUsage(user.id, config.trackUsage.action, {\r\n          resourceType: config.trackUsage.resourceType,\r\n          quantity: config.trackUsage.quantity,\r\n          ipAddress: metadata.ipAddress,\r\n          userAgent: metadata.userAgent,\r\n          metadata: {\r\n            ...metadata,\r\n            processingTime: Date.now() - startTime\r\n          }\r\n        })\r\n      }\r\n\r\n      return response\r\n\r\n    } catch (error) {\r\n      const processingTime = Date.now() - startTime\r\n\r\n      // Log failed operation\r\n      if (config.trackUsage) {\r\n        try {\r\n          const usageTracker = getUsageTracker()\r\n          await usageTracker.logUsage(user.id, config.trackUsage.action, {\r\n            resourceType: config.trackUsage.resourceType,\r\n            quantity: 0, // No usage counted for failed operations\r\n            metadata: {\r\n              failed: true,\r\n              error: (error as Error).message,\r\n              processingTime\r\n            }\r\n          })\r\n        } catch (loggingError) {\r\n          logger.error('Failed to log failed operation', loggingError as Error)\r\n        }\r\n      }\r\n\r\n      // Re-throw the original error\r\n      throw error\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Convenience middleware creators\r\n */\r\n\r\n/**\r\n * Middleware for chat operations\r\n */\r\nexport function withChatControls(\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return withUsageControls({\r\n    trackUsage: {\r\n      action: 'chat_message',\r\n      resourceType: 'chat',\r\n      quantity: 1\r\n    },\r\n    enforceRateLimit: {\r\n      action: 'chat_message',\r\n      window: 'minute'\r\n    },\r\n    enforceTierLimits: {\r\n      action: 'chat',\r\n      quantity: 1\r\n    },\r\n    requireFeature: 'ai_chat',\r\n    logMetadata: true\r\n  }, handler)\r\n}\r\n\r\n/**\r\n * Middleware for upload operations\r\n */\r\nexport function withUploadControls(\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return withUsageControls({\r\n    trackUsage: {\r\n      action: 'document_upload',\r\n      resourceType: 'file',\r\n      quantity: 1\r\n    },\r\n    enforceRateLimit: {\r\n      action: 'document_upload',\r\n      window: 'minute'\r\n    },\r\n    enforceTierLimits: {\r\n      action: 'upload',\r\n      quantity: 1\r\n    },\r\n    requireFeature: 'document_upload',\r\n    logMetadata: true\r\n  }, handler)\r\n}\r\n\r\n/**\r\n * Middleware for API operations\r\n */\r\nexport function withApiControls(\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return withUsageControls({\r\n    trackUsage: {\r\n      action: 'api_call',\r\n      resourceType: 'api',\r\n      quantity: 1\r\n    },\r\n    enforceRateLimit: {\r\n      action: 'api_request',\r\n      window: 'minute'\r\n    },\r\n    enforceTierLimits: {\r\n      action: 'api_call',\r\n      quantity: 1\r\n    },\r\n    logMetadata: true\r\n  }, handler)\r\n}\r\n\r\n/**\r\n * Middleware for vector search operations\r\n */\r\nexport function withSearchControls(\r\n  handler: (request: NextRequest, context: AuthContext) => Promise<NextResponse>\r\n) {\r\n  return withUsageControls({\r\n    trackUsage: {\r\n      action: 'vector_search',\r\n      resourceType: 'search',\r\n      quantity: 1\r\n    },\r\n    enforceRateLimit: {\r\n      action: 'vector_search',\r\n      window: 'minute'\r\n    },\r\n    logMetadata: true\r\n  }, handler)\r\n}\r\n\r\n/**\r\n * Get usage summary for a user\r\n */\r\nexport async function getUserUsageSummary(userId: string): Promise<{\r\n  subscription: any\r\n  currentUsage: any\r\n  rateLimits: any\r\n  recommendations?: any\r\n}> {\r\n  try {\r\n    const tierManager = getTierManager()\r\n    const rateLimiter = getRateLimiter()\r\n    const usageTracker = getUsageTracker()\r\n\r\n    const [subscription, rateLimits, usageStats] = await Promise.all([\r\n      tierManager.getUserSubscription(userId),\r\n      rateLimiter.getRateLimitStatus(userId),\r\n      usageTracker.getUserUsageStats(userId)\r\n    ])\r\n\r\n    const recommendations = await tierManager.getUpgradeRecommendations(userId)\r\n\r\n    return {\r\n      subscription,\r\n      currentUsage: usageStats,\r\n      rateLimits,\r\n      recommendations\r\n    }\r\n\r\n  } catch (error) {\r\n    logger.error('Failed to get user usage summary', { userId }, error as Error)\r\n    throw createError.databaseError('Failed to get usage summary', error as Error)\r\n  }\r\n}"],"mappings":"AAAA;;;;;GAKC;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QA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","ignoreList":[]}