32c8fe7e3abed12d1736b4a3576d9084
"use strict";

/* istanbul ignore next */
function cov_9dyvpoqoy() {
  var path = "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\analytics\\track\\route.ts";
  var hash = "93ee735a701aab47c35db43ff970fd1039962114";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\analytics\\track\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 19
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 20
        }
      },
      "6": {
        start: {
          line: 19,
          column: 16
        },
        end: {
          line: 19,
          column: 38
        }
      },
      "7": {
        start: {
          line: 20,
          column: 13
        },
        end: {
          line: 20,
          column: 27
        }
      },
      "8": {
        start: {
          line: 21,
          column: 18
        },
        end: {
          line: 21,
          column: 38
        }
      },
      "9": {
        start: {
          line: 22,
          column: 14
        },
        end: {
          line: 22,
          column: 42
        }
      },
      "10": {
        start: {
          line: 23,
          column: 16
        },
        end: {
          line: 23,
          column: 46
        }
      },
      "11": {
        start: {
          line: 24,
          column: 19
        },
        end: {
          line: 24,
          column: 53
        }
      },
      "12": {
        start: {
          line: 25,
          column: 19
        },
        end: {
          line: 25,
          column: 53
        }
      },
      "13": {
        start: {
          line: 26,
          column: 18
        },
        end: {
          line: 26,
          column: 50
        }
      },
      "14": {
        start: {
          line: 28,
          column: 29
        },
        end: {
          line: 34,
          column: 2
        }
      },
      "15": {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 76,
          column: 7
        }
      },
      "16": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 75,
          column: 9
        }
      },
      "17": {
        start: {
          line: 38,
          column: 25
        },
        end: {
          line: 38,
          column: 45
        }
      },
      "18": {
        start: {
          line: 39,
          column: 72
        },
        end: {
          line: 39,
          column: 104
        }
      },
      "19": {
        start: {
          line: 41,
          column: 28
        },
        end: {
          line: 41,
          column: 84
        }
      },
      "20": {
        start: {
          line: 42,
          column: 34
        },
        end: {
          line: 42,
          column: 61
        }
      },
      "21": {
        start: {
          line: 44,
          column: 29
        },
        end: {
          line: 44,
          column: 52
        }
      },
      "22": {
        start: {
          line: 45,
          column: 30
        },
        end: {
          line: 53,
          column: 14
        }
      },
      "23": {
        start: {
          line: 54,
          column: 12
        },
        end: {
          line: 60,
          column: 13
        }
      },
      "24": {
        start: {
          line: 55,
          column: 16
        },
        end: {
          line: 58,
          column: 19
        }
      },
      "25": {
        start: {
          line: 59,
          column: 16
        },
        end: {
          line: 59,
          column: 89
        }
      },
      "26": {
        start: {
          line: 61,
          column: 12
        },
        end: {
          line: 65,
          column: 15
        }
      },
      "27": {
        start: {
          line: 66,
          column: 12
        },
        end: {
          line: 69,
          column: 15
        }
      },
      "28": {
        start: {
          line: 71,
          column: 12
        },
        end: {
          line: 73,
          column: 15
        }
      },
      "29": {
        start: {
          line: 74,
          column: 12
        },
        end: {
          line: 74,
          column: 79
        }
      },
      "30": {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 110,
          column: 7
        }
      },
      "31": {
        start: {
          line: 80,
          column: 8
        },
        end: {
          line: 109,
          column: 9
        }
      },
      "32": {
        start: {
          line: 82,
          column: 28
        },
        end: {
          line: 82,
          column: 84
        }
      },
      "33": {
        start: {
          line: 83,
          column: 12
        },
        end: {
          line: 85,
          column: 13
        }
      },
      "34": {
        start: {
          line: 84,
          column: 16
        },
        end: {
          line: 84,
          column: 80
        }
      },
      "35": {
        start: {
          line: 87,
          column: 29
        },
        end: {
          line: 87,
          column: 52
        }
      },
      "36": {
        start: {
          line: 88,
          column: 44
        },
        end: {
          line: 90,
          column: 25
        }
      },
      "37": {
        start: {
          line: 91,
          column: 12
        },
        end: {
          line: 96,
          column: 13
        }
      },
      "38": {
        start: {
          line: 92,
          column: 16
        },
        end: {
          line: 94,
          column: 19
        }
      },
      "39": {
        start: {
          line: 95,
          column: 16
        },
        end: {
          line: 95,
          column: 93
        }
      },
      "40": {
        start: {
          line: 97,
          column: 12
        },
        end: {
          line: 103,
          column: 15
        }
      },
      "41": {
        start: {
          line: 105,
          column: 12
        },
        end: {
          line: 107,
          column: 15
        }
      },
      "42": {
        start: {
          line: 108,
          column: 12
        },
        end: {
          line: 108,
          column: 85
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 15
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 16
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "POST",
        decl: {
          start: {
            line: 35,
            column: 15
          },
          end: {
            line: 35,
            column: 19
          }
        },
        loc: {
          start: {
            line: 35,
            column: 29
          },
          end: {
            line: 77,
            column: 1
          }
        },
        line: 35
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 36,
            column: 50
          },
          end: {
            line: 36,
            column: 51
          }
        },
        loc: {
          start: {
            line: 36,
            column: 60
          },
          end: {
            line: 76,
            column: 5
          }
        },
        line: 36
      },
      "5": {
        name: "GET",
        decl: {
          start: {
            line: 78,
            column: 15
          },
          end: {
            line: 78,
            column: 18
          }
        },
        loc: {
          start: {
            line: 78,
            column: 28
          },
          end: {
            line: 111,
            column: 1
          }
        },
        line: 78
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 79,
            column: 50
          },
          end: {
            line: 79,
            column: 51
          }
        },
        loc: {
          start: {
            line: 79,
            column: 60
          },
          end: {
            line: 110,
            column: 5
          }
        },
        line: 79
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 42,
            column: 34
          },
          end: {
            line: 42,
            column: 61
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 42,
            column: 34
          },
          end: {
            line: 42,
            column: 40
          }
        }, {
          start: {
            line: 42,
            column: 44
          },
          end: {
            line: 42,
            column: 61
          }
        }],
        line: 42
      },
      "1": {
        loc: {
          start: {
            line: 48,
            column: 28
          },
          end: {
            line: 48,
            column: 44
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 48,
            column: 28
          },
          end: {
            line: 48,
            column: 38
          }
        }, {
          start: {
            line: 48,
            column: 42
          },
          end: {
            line: 48,
            column: 44
          }
        }],
        line: 48
      },
      "2": {
        loc: {
          start: {
            line: 54,
            column: 12
          },
          end: {
            line: 60,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 54,
            column: 12
          },
          end: {
            line: 60,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 54
      },
      "3": {
        loc: {
          start: {
            line: 83,
            column: 12
          },
          end: {
            line: 85,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 83,
            column: 12
          },
          end: {
            line: 85,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 83
      },
      "4": {
        loc: {
          start: {
            line: 91,
            column: 12
          },
          end: {
            line: 96,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 91,
            column: 12
          },
          end: {
            line: 96,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 91
      },
      "5": {
        loc: {
          start: {
            line: 100,
            column: 28
          },
          end: {
            line: 100,
            column: 40
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 100,
            column: 28
          },
          end: {
            line: 100,
            column: 34
          }
        }, {
          start: {
            line: 100,
            column: 38
          },
          end: {
            line: 100,
            column: 40
          }
        }],
        line: 100
      },
      "6": {
        loc: {
          start: {
            line: 101,
            column: 27
          },
          end: {
            line: 101,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 101,
            column: 27
          },
          end: {
            line: 101,
            column: 41
          }
        }, {
          start: {
            line: 101,
            column: 45
          },
          end: {
            line: 101,
            column: 46
          }
        }],
        line: 101
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\analytics\\track\\route.ts"],
      sourcesContent: ["import { NextRequest, NextResponse } from 'next/server'\r\nimport { z } from 'zod'\r\nimport { getServerSession } from 'next-auth'\r\nimport { authOptions } from '@/app/lib/auth'\r\nimport { logger } from '@/app/lib/logger'\r\nimport { formatErrorResponse } from '@/app/lib/api-errors'\r\nimport { withRateLimit } from '@/app/lib/rate-limit'\r\nimport { createClient } from '@supabase/supabase-js'\r\nimport { supabaseAdmin } from '@/app/lib/supabase'\n\r\n// Analytics event schema\r\nconst AnalyticsEventSchema = z.object({\r\n  event: z.string(),\r\n  properties: z.record(z.any()).optional(),\r\n  userId: z.string().optional(),\r\n  sessionId: z.string(),\r\n  timestamp: z.string().datetime(),\r\n})\r\n\r\nexport async function POST(request: NextRequest) {\r\n  return withRateLimit(request, async () => {\r\n    try {\r\n      const body = await request.json()\r\n      const { event, properties, userId, sessionId, timestamp } = AnalyticsEventSchema.parse(body)\r\n\r\n      // Get user session if available\r\n      const session = await getServerSession(authOptions)\r\n      const currentUserId = userId || session?.user?.id\r\n\r\n      // Store analytics event in database\r\n      const supabase = supabaseAdmin\r\n\r\n      const { error } = await supabase\r\n        .from('analytics_events')\r\n        .insert({\r\n          id: crypto.randomUUID(),\r\n          event,\r\n          properties: properties || {},\r\n          user_id: currentUserId,\r\n          session_id: sessionId,\r\n          timestamp,\r\n          created_at: new Date().toISOString(),\r\n        })\r\n\r\n      if (error) {\r\n        logger.error('Failed to store analytics event', { error, event })\r\n        return formatErrorResponse('Failed to track event', 500)\r\n      }\r\n\r\n      logger.info('Analytics event tracked', { event, userId: currentUserId, sessionId })\r\n\r\n      return NextResponse.json({\r\n        success: true,\r\n        message: 'Event tracked successfully'\r\n      })\r\n\r\n    } catch (error) {\r\n      logger.error('Analytics tracking error', { error })\r\n      return formatErrorResponse('Invalid request', 400)\r\n    }\r\n  })\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  return withRateLimit(request, async () => {\r\n    try {\r\n      // Check authentication\r\n      const session = await getServerSession(authOptions)\r\n      if (!session?.user) {\r\n        return formatErrorResponse('Unauthorized', 401)\r\n      }\r\n\r\n      // Get analytics events for the user\r\n      const supabase = supabaseAdmin\r\n\r\n      const { data: events, error } = await supabase\r\n        .from('analytics_events')\r\n        .select('*')\r\n        .eq('user_id', session.user.id)\r\n        .order('created_at', { ascending: false })\r\n        .limit(100)\r\n\r\n      if (error) {\r\n        logger.error('Failed to get analytics events', { error })\r\n        return formatErrorResponse('Failed to retrieve events', 500)\r\n      }\r\n\r\n      return NextResponse.json({\r\n        success: true,\r\n        data: {\r\n          events: events || [],\r\n          count: events?.length || 0\r\n        }\r\n      })\r\n\r\n    } catch (error) {\r\n      logger.error('Analytics retrieval error', { error })\r\n      return formatErrorResponse('Internal server error', 500)\r\n    }\r\n  })\r\n}\r\n"],
      names: ["GET", "POST", "AnalyticsEventSchema", "z", "object", "event", "string", "properties", "record", "any", "optional", "userId", "sessionId", "timestamp", "datetime", "request", "withRateLimit", "body", "json", "parse", "session", "getServerSession", "authOptions", "currentUserId", "user", "id", "supabase", "supabaseAdmin", "error", "from", "insert", "crypto", "randomUUID", "user_id", "session_id", "created_at", "Date", "toISOString", "logger", "formatErrorResponse", "info", "NextResponse", "success", "message", "data", "events", "select", "eq", "order", "ascending", "limit", "count", "length"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "93ee735a701aab47c35db43ff970fd1039962114"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_9dyvpoqoy = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_9dyvpoqoy();
cov_9dyvpoqoy().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_9dyvpoqoy().f[0]++;
  cov_9dyvpoqoy().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_9dyvpoqoy().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_9dyvpoqoy().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_9dyvpoqoy().f[1]++;
    cov_9dyvpoqoy().s[4]++;
    return GET;
  },
  get POST() {
    /* istanbul ignore next */
    cov_9dyvpoqoy().f[2]++;
    cov_9dyvpoqoy().s[5]++;
    return POST;
  }
});
const _server =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[6]++, require("next/server"));
const _zod =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[7]++, require("zod"));
const _nextauth =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[8]++, require("next-auth"));
const _auth =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[9]++, require("../../../lib/auth"));
const _logger =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[10]++, require("../../../lib/logger"));
const _apierrors =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[11]++, require("../../../lib/api-errors"));
const _ratelimit =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[12]++, require("../../../lib/rate-limit"));
const _supabase =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[13]++, require("../../../lib/supabase"));
// Analytics event schema
const AnalyticsEventSchema =
/* istanbul ignore next */
(cov_9dyvpoqoy().s[14]++, _zod.z.object({
  event: _zod.z.string(),
  properties: _zod.z.record(_zod.z.any()).optional(),
  userId: _zod.z.string().optional(),
  sessionId: _zod.z.string(),
  timestamp: _zod.z.string().datetime()
}));
async function POST(request) {
  /* istanbul ignore next */
  cov_9dyvpoqoy().f[3]++;
  cov_9dyvpoqoy().s[15]++;
  return (0, _ratelimit.withRateLimit)(request, async () => {
    /* istanbul ignore next */
    cov_9dyvpoqoy().f[4]++;
    cov_9dyvpoqoy().s[16]++;
    try {
      const body =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[17]++, await request.json());
      const {
        event,
        properties,
        userId,
        sessionId,
        timestamp
      } =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[18]++, AnalyticsEventSchema.parse(body));
      // Get user session if available
      const session =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[19]++, await (0, _nextauth.getServerSession)(_auth.authOptions));
      const currentUserId =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[20]++,
      /* istanbul ignore next */
      (cov_9dyvpoqoy().b[0][0]++, userId) ||
      /* istanbul ignore next */
      (cov_9dyvpoqoy().b[0][1]++, session?.user?.id));
      // Store analytics event in database
      const supabase =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[21]++, _supabase.supabaseAdmin);
      const {
        error
      } =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[22]++, await supabase.from('analytics_events').insert({
        id: crypto.randomUUID(),
        event,
        properties:
        /* istanbul ignore next */
        (cov_9dyvpoqoy().b[1][0]++, properties) ||
        /* istanbul ignore next */
        (cov_9dyvpoqoy().b[1][1]++, {}),
        user_id: currentUserId,
        session_id: sessionId,
        timestamp,
        created_at: new Date().toISOString()
      }));
      /* istanbul ignore next */
      cov_9dyvpoqoy().s[23]++;
      if (error) {
        /* istanbul ignore next */
        cov_9dyvpoqoy().b[2][0]++;
        cov_9dyvpoqoy().s[24]++;
        _logger.logger.error('Failed to store analytics event', {
          error,
          event
        });
        /* istanbul ignore next */
        cov_9dyvpoqoy().s[25]++;
        return (0, _apierrors.formatErrorResponse)('Failed to track event', 500);
      } else
      /* istanbul ignore next */
      {
        cov_9dyvpoqoy().b[2][1]++;
      }
      cov_9dyvpoqoy().s[26]++;
      _logger.logger.info('Analytics event tracked', {
        event,
        userId: currentUserId,
        sessionId
      });
      /* istanbul ignore next */
      cov_9dyvpoqoy().s[27]++;
      return _server.NextResponse.json({
        success: true,
        message: 'Event tracked successfully'
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_9dyvpoqoy().s[28]++;
      _logger.logger.error('Analytics tracking error', {
        error
      });
      /* istanbul ignore next */
      cov_9dyvpoqoy().s[29]++;
      return (0, _apierrors.formatErrorResponse)('Invalid request', 400);
    }
  });
}
async function GET(request) {
  /* istanbul ignore next */
  cov_9dyvpoqoy().f[5]++;
  cov_9dyvpoqoy().s[30]++;
  return (0, _ratelimit.withRateLimit)(request, async () => {
    /* istanbul ignore next */
    cov_9dyvpoqoy().f[6]++;
    cov_9dyvpoqoy().s[31]++;
    try {
      // Check authentication
      const session =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[32]++, await (0, _nextauth.getServerSession)(_auth.authOptions));
      /* istanbul ignore next */
      cov_9dyvpoqoy().s[33]++;
      if (!session?.user) {
        /* istanbul ignore next */
        cov_9dyvpoqoy().b[3][0]++;
        cov_9dyvpoqoy().s[34]++;
        return (0, _apierrors.formatErrorResponse)('Unauthorized', 401);
      } else
      /* istanbul ignore next */
      {
        cov_9dyvpoqoy().b[3][1]++;
      }
      // Get analytics events for the user
      const supabase =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[35]++, _supabase.supabaseAdmin);
      const {
        data: events,
        error
      } =
      /* istanbul ignore next */
      (cov_9dyvpoqoy().s[36]++, await supabase.from('analytics_events').select('*').eq('user_id', session.user.id).order('created_at', {
        ascending: false
      }).limit(100));
      /* istanbul ignore next */
      cov_9dyvpoqoy().s[37]++;
      if (error) {
        /* istanbul ignore next */
        cov_9dyvpoqoy().b[4][0]++;
        cov_9dyvpoqoy().s[38]++;
        _logger.logger.error('Failed to get analytics events', {
          error
        });
        /* istanbul ignore next */
        cov_9dyvpoqoy().s[39]++;
        return (0, _apierrors.formatErrorResponse)('Failed to retrieve events', 500);
      } else
      /* istanbul ignore next */
      {
        cov_9dyvpoqoy().b[4][1]++;
      }
      cov_9dyvpoqoy().s[40]++;
      return _server.NextResponse.json({
        success: true,
        data: {
          events:
          /* istanbul ignore next */
          (cov_9dyvpoqoy().b[5][0]++, events) ||
          /* istanbul ignore next */
          (cov_9dyvpoqoy().b[5][1]++, []),
          count:
          /* istanbul ignore next */
          (cov_9dyvpoqoy().b[6][0]++, events?.length) ||
          /* istanbul ignore next */
          (cov_9dyvpoqoy().b[6][1]++, 0)
        }
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_9dyvpoqoy().s[41]++;
      _logger.logger.error('Analytics retrieval error', {
        error
      });
      /* istanbul ignore next */
      cov_9dyvpoqoy().s[42]++;
      return (0, _apierrors.formatErrorResponse)('Internal server error', 500);
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHRVQiLCJjb3ZfOWR5dnBvcW95IiwiZiIsInMiLCJQT1NUIiwiQW5hbHl0aWNzRXZlbnRTY2hlbWEiLCJfem9kIiwieiIsIm9iamVjdCIsImV2ZW50Iiwic3RyaW5nIiwicHJvcGVydGllcyIsInJlY29yZCIsImFueSIsIm9wdGlvbmFsIiwidXNlcklkIiwic2Vzc2lvbklkIiwidGltZXN0YW1wIiwiZGF0ZXRpbWUiLCJyZXF1ZXN0IiwiX3JhdGVsaW1pdCIsIndpdGhSYXRlTGltaXQiLCJib2R5IiwianNvbiIsInBhcnNlIiwic2Vzc2lvbiIsIl9uZXh0YXV0aCIsImdldFNlcnZlclNlc3Npb24iLCJfYXV0aCIsImF1dGhPcHRpb25zIiwiY3VycmVudFVzZXJJZCIsImIiLCJ1c2VyIiwiaWQiLCJzdXBhYmFzZSIsIl9zdXBhYmFzZSIsInN1cGFiYXNlQWRtaW4iLCJlcnJvciIsImZyb20iLCJpbnNlcnQiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwidXNlcl9pZCIsInNlc3Npb25faWQiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiX2xvZ2dlciIsImxvZ2dlciIsIl9hcGllcnJvcnMiLCJmb3JtYXRFcnJvclJlc3BvbnNlIiwiaW5mbyIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJzdWNjZXNzIiwibWVzc2FnZSIsImRhdGEiLCJldmVudHMiLCJzZWxlY3QiLCJlcSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJjb3VudCIsImxlbmd0aCJdLCJzb3VyY2VzIjpbIlI6XFxBcHBzXFxCcmllZmx5X0Nsb3VkXFxicmllZmx5LWNsb3VkLW5leHRqc1xcc3JjXFxhcHBcXGFwaVxcYW5hbHl0aWNzXFx0cmFja1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xyXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJ1xyXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvYXBwL2xpYi9hdXRoJ1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL2FwcC9saWIvbG9nZ2VyJ1xyXG5pbXBvcnQgeyBmb3JtYXRFcnJvclJlc3BvbnNlIH0gZnJvbSAnQC9hcHAvbGliL2FwaS1lcnJvcnMnXHJcbmltcG9ydCB7IHdpdGhSYXRlTGltaXQgfSBmcm9tICdAL2FwcC9saWIvcmF0ZS1saW1pdCdcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xyXG5pbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnQC9hcHAvbGliL3N1cGFiYXNlJ1xuXHJcbi8vIEFuYWx5dGljcyBldmVudCBzY2hlbWFcclxuY29uc3QgQW5hbHl0aWNzRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgZXZlbnQ6IHouc3RyaW5nKCksXHJcbiAgcHJvcGVydGllczogei5yZWNvcmQoei5hbnkoKSkub3B0aW9uYWwoKSxcclxuICB1c2VySWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBzZXNzaW9uSWQ6IHouc3RyaW5nKCksXHJcbiAgdGltZXN0YW1wOiB6LnN0cmluZygpLmRhdGV0aW1lKCksXHJcbn0pXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHJldHVybiB3aXRoUmF0ZUxpbWl0KHJlcXVlc3QsIGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG4gICAgICBjb25zdCB7IGV2ZW50LCBwcm9wZXJ0aWVzLCB1c2VySWQsIHNlc3Npb25JZCwgdGltZXN0YW1wIH0gPSBBbmFseXRpY3NFdmVudFNjaGVtYS5wYXJzZShib2R5KVxyXG5cclxuICAgICAgLy8gR2V0IHVzZXIgc2Vzc2lvbiBpZiBhdmFpbGFibGVcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXHJcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VySWQgPSB1c2VySWQgfHwgc2Vzc2lvbj8udXNlcj8uaWRcclxuXHJcbiAgICAgIC8vIFN0b3JlIGFuYWx5dGljcyBldmVudCBpbiBkYXRhYmFzZVxyXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IHN1cGFiYXNlQWRtaW5cclxuXHJcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2FuYWx5dGljc19ldmVudHMnKVxyXG4gICAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgICAgICAgICBldmVudCxcclxuICAgICAgICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMgfHwge30sXHJcbiAgICAgICAgICB1c2VyX2lkOiBjdXJyZW50VXNlcklkLFxyXG4gICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbklkLFxyXG4gICAgICAgICAgdGltZXN0YW1wLFxyXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBzdG9yZSBhbmFseXRpY3MgZXZlbnQnLCB7IGVycm9yLCBldmVudCB9KVxyXG4gICAgICAgIHJldHVybiBmb3JtYXRFcnJvclJlc3BvbnNlKCdGYWlsZWQgdG8gdHJhY2sgZXZlbnQnLCA1MDApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxvZ2dlci5pbmZvKCdBbmFseXRpY3MgZXZlbnQgdHJhY2tlZCcsIHsgZXZlbnQsIHVzZXJJZDogY3VycmVudFVzZXJJZCwgc2Vzc2lvbklkIH0pXHJcblxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ0V2ZW50IHRyYWNrZWQgc3VjY2Vzc2Z1bGx5J1xyXG4gICAgICB9KVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignQW5hbHl0aWNzIHRyYWNraW5nIGVycm9yJywgeyBlcnJvciB9KVxyXG4gICAgICByZXR1cm4gZm9ybWF0RXJyb3JSZXNwb25zZSgnSW52YWxpZCByZXF1ZXN0JywgNDAwKVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICByZXR1cm4gd2l0aFJhdGVMaW1pdChyZXF1ZXN0LCBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvblxyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcclxuICAgICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdEVycm9yUmVzcG9uc2UoJ1VuYXV0aG9yaXplZCcsIDQwMSlcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gR2V0IGFuYWx5dGljcyBldmVudHMgZm9yIHRoZSB1c2VyXHJcbiAgICAgIGNvbnN0IHN1cGFiYXNlID0gc3VwYWJhc2VBZG1pblxyXG5cclxuICAgICAgY29uc3QgeyBkYXRhOiBldmVudHMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdhbmFseXRpY3NfZXZlbnRzJylcclxuICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCBzZXNzaW9uLnVzZXIuaWQpXHJcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAgICAgLmxpbWl0KDEwMClcclxuXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCBhbmFseXRpY3MgZXZlbnRzJywgeyBlcnJvciB9KVxyXG4gICAgICAgIHJldHVybiBmb3JtYXRFcnJvclJlc3BvbnNlKCdGYWlsZWQgdG8gcmV0cmlldmUgZXZlbnRzJywgNTAwKVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgZXZlbnRzOiBldmVudHMgfHwgW10sXHJcbiAgICAgICAgICBjb3VudDogZXZlbnRzPy5sZW5ndGggfHwgMFxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0FuYWx5dGljcyByZXRyaWV2YWwgZXJyb3InLCB7IGVycm9yIH0pXHJcbiAgICAgIHJldHVybiBmb3JtYXRFcnJvclJlc3BvbnNlKCdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLCA1MDApXHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QTtNQUFBO01BQUEsQ0FBQWpDLGFBQUEsR0FBQUUsQ0FBQSxRQUFXZ0MsU0FBQSxDQUFBQyxhQUFhO01BRTlCLE1BQU07UUFBRW9CLElBQUEsRUFBTUMsTUFBTTtRQUFFcEI7TUFBSyxDQUFFO01BQUE7TUFBQSxDQUFBcEMsYUFBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTStCLFFBQUEsQ0FDbkNJLElBQUksQ0FBQyxvQkFDTG9CLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsV0FBV2xDLE9BQUEsQ0FBUU8sSUFBSSxDQUFDQyxFQUFFLEVBQzdCMkIsS0FBSyxDQUFDLGNBQWM7UUFBRUMsU0FBQSxFQUFXO01BQU0sR0FDdkNDLEtBQUssQ0FBQztNQUFBO01BQUE3RCxhQUFBLEdBQUFFLENBQUE7TUFFVCxJQUFJa0MsS0FBQSxFQUFPO1FBQUE7UUFBQXBDLGFBQUEsR0FBQThCLENBQUE7UUFBQTlCLGFBQUEsR0FBQUUsQ0FBQTtRQUNUNEMsT0FBQSxDQUFBQyxNQUFNLENBQUNYLEtBQUssQ0FBQyxrQ0FBa0M7VUFBRUE7UUFBTTtRQUFBO1FBQUFwQyxhQUFBLEdBQUFFLENBQUE7UUFDdkQsT0FBTyxJQUFBOEMsVUFBQSxDQUFBQyxtQkFBbUIsRUFBQyw2QkFBNkI7TUFDMUQ7TUFBQTtNQUFBO1FBQUFqRCxhQUFBLEdBQUE4QixDQUFBO01BQUE7TUFBQTlCLGFBQUEsR0FBQUUsQ0FBQTtNQUVBLE9BQU9pRCxPQUFBLENBQUFDLFlBQVksQ0FBQzlCLElBQUksQ0FBQztRQUN2QitCLE9BQUEsRUFBUztRQUNURSxJQUFBLEVBQU07VUFDSkMsTUFBQTtVQUFRO1VBQUEsQ0FBQXhELGFBQUEsR0FBQThCLENBQUEsVUFBQTBCLE1BQUE7VUFBQTtVQUFBLENBQUF4RCxhQUFBLEdBQUE4QixDQUFBLFVBQVUsRUFBRTtVQUNwQmdDLEtBQUE7VUFBTztVQUFBLENBQUE5RCxhQUFBLEdBQUE4QixDQUFBLFVBQUEwQixNQUFBLEVBQVFPLE1BQUE7VUFBQTtVQUFBLENBQUEvRCxhQUFBLEdBQUE4QixDQUFBLFVBQVU7UUFDM0I7TUFDRjtJQUVGLEVBQUUsT0FBT00sS0FBQSxFQUFPO01BQUE7TUFBQXBDLGFBQUEsR0FBQUUsQ0FBQTtNQUNkNEMsT0FBQSxDQUFBQyxNQUFNLENBQUNYLEtBQUssQ0FBQyw2QkFBNkI7UUFBRUE7TUFBTTtNQUFBO01BQUFwQyxhQUFBLEdBQUFFLENBQUE7TUFDbEQsT0FBTyxJQUFBOEMsVUFBQSxDQUFBQyxtQkFBbUIsRUFBQyx5QkFBeUI7SUFDdEQ7RUFDRjtBQUNGIiwiaWdub3JlTGlzdCI6W119