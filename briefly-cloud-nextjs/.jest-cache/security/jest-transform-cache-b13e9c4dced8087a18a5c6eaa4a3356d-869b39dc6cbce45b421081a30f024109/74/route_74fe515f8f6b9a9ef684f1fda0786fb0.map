{"version":3,"names":["cov_2bakzerk5q","actualCoverage","s","GET","getCapabilitiesHandler","_request","_context","f","capabilities","supported_formats","documents","pdf","mime_types","extensions","description","features","limitations","word","excel","powerpoint","warning","text","plain_text","markdown","csv","json","extraction_features","text_chunking","configurable_chunk_size","default_chunk_size","min_chunk_size","max_chunk_size","metadata_extraction","includes","batch_processing","max_files_per_batch","supported","caching","cache_duration","file_size","max_size_bytes","max_size_formatted","processing_time","typical_range","depends_on","content_types","not_supported","api_endpoints","extract_from_upload","method","path","requires_auth","extract_from_file_id","batch_extraction","get_extraction_status","rate_limits","single_extraction","status_checks","supported_mime_types","Object","keys","_documentextractor","SUPPORTED_EXTRACTORS","supported_extensions","values","version","last_updated","_apiutils","ApiResponse","success","error","console","internalError","_apimiddleware","createPublicApiHandler","rateLimit","_ratelimit","rateLimitConfigs","general","logging","enabled","includeBody"],"sources":["R:\\Apps\\Briefly_Cloud\\briefly-cloud-nextjs\\src\\app\\api\\extract\\capabilities\\route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport { createPublicApiHandler, ApiContext } from '@/app/lib/api-middleware'\r\nimport { ApiResponse } from '@/app/lib/api-utils'\r\nimport { rateLimitConfigs } from '@/app/lib/rate-limit'\r\nimport { SUPPORTED_EXTRACTORS } from '@/app/lib/document-extractor'\r\n\r\n// GET /api/extract/capabilities - Get text extraction capabilities\r\nasync function getCapabilitiesHandler(_request: Request, _context: ApiContext): Promise<NextResponse> {\r\n  try {\r\n    // Group extractors by category\r\n    const capabilities = {\r\n      supported_formats: {\r\n        documents: {\r\n          pdf: {\r\n            mime_types: ['application/pdf'],\r\n            extensions: ['pdf'],\r\n            description: 'Portable Document Format',\r\n            features: ['text_extraction', 'page_count', 'metadata'],\r\n            limitations: ['images_not_extracted', 'complex_layouts_may_vary'],\r\n          },\r\n          word: {\r\n            mime_types: [\r\n              'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n              'application/msword'\r\n            ],\r\n            extensions: ['docx', 'doc'],\r\n            description: 'Microsoft Word Documents',\r\n            features: ['text_extraction', 'formatting_preserved', 'metadata'],\r\n            limitations: ['images_not_extracted', 'complex_formatting_may_vary'],\r\n          },\r\n          excel: {\r\n            mime_types: [\r\n              'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n              'application/vnd.ms-excel'\r\n            ],\r\n            extensions: ['xlsx', 'xls'],\r\n            description: 'Microsoft Excel Spreadsheets',\r\n            features: ['text_extraction', 'multi_sheet_support', 'cell_data'],\r\n            limitations: ['formulas_not_evaluated', 'charts_not_extracted'],\r\n          },\r\n          powerpoint: {\r\n            mime_types: [\r\n              'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n              'application/vnd.ms-powerpoint'\r\n            ],\r\n            extensions: ['pptx', 'ppt'],\r\n            description: 'Microsoft PowerPoint Presentations',\r\n            features: ['basic_text_extraction'],\r\n            limitations: ['limited_support', 'images_not_extracted', 'slide_layouts_not_preserved'],\r\n            warning: 'PowerPoint extraction has limited support and may not capture all content',\r\n          },\r\n        },\r\n        text: {\r\n          plain_text: {\r\n            mime_types: ['text/plain'],\r\n            extensions: ['txt'],\r\n            description: 'Plain Text Files',\r\n            features: ['full_text_extraction', 'encoding_detection'],\r\n            limitations: [],\r\n          },\r\n          markdown: {\r\n            mime_types: ['text/markdown'],\r\n            extensions: ['md'],\r\n            description: 'Markdown Files',\r\n            features: ['full_text_extraction', 'formatting_preserved'],\r\n            limitations: [],\r\n          },\r\n          csv: {\r\n            mime_types: ['text/csv', 'application/csv'],\r\n            extensions: ['csv'],\r\n            description: 'Comma-Separated Values',\r\n            features: ['structured_data_extraction', 'column_preservation'],\r\n            limitations: ['complex_csv_formats_may_vary'],\r\n          },\r\n          json: {\r\n            mime_types: ['application/json'],\r\n            extensions: ['json'],\r\n            description: 'JSON Data Files',\r\n            features: ['structured_data_extraction', 'formatting_preserved'],\r\n            limitations: ['large_files_may_be_slow'],\r\n          },\r\n        },\r\n      },\r\n      \r\n      extraction_features: {\r\n        text_chunking: {\r\n          description: 'Automatic text chunking for large documents',\r\n          configurable_chunk_size: true,\r\n          default_chunk_size: 1000,\r\n          min_chunk_size: 100,\r\n          max_chunk_size: 5000,\r\n        },\r\n        metadata_extraction: {\r\n          description: 'Extract document metadata and statistics',\r\n          includes: ['word_count', 'character_count', 'page_count', 'processing_time'],\r\n        },\r\n        batch_processing: {\r\n          description: 'Process multiple files in a single request',\r\n          max_files_per_batch: 10,\r\n          supported: true,\r\n        },\r\n        caching: {\r\n          description: 'Cache extraction results to avoid reprocessing',\r\n          supported: true,\r\n          cache_duration: 'permanent_until_file_updated',\r\n        },\r\n      },\r\n      \r\n      limitations: {\r\n        file_size: {\r\n          max_size_bytes: 50 * 1024 * 1024, // 50MB\r\n          max_size_formatted: '50MB',\r\n          description: 'Maximum file size for text extraction',\r\n        },\r\n        processing_time: {\r\n          typical_range: '100ms - 10s',\r\n          depends_on: ['file_size', 'file_type', 'content_complexity'],\r\n        },\r\n        content_types: {\r\n          not_supported: [\r\n            'images_in_documents',\r\n            'charts_and_graphs',\r\n            'complex_layouts',\r\n            'embedded_objects',\r\n            'audio_video_content',\r\n          ],\r\n        },\r\n      },\r\n      \r\n      api_endpoints: {\r\n        extract_from_upload: {\r\n          method: 'POST',\r\n          path: '/api/extract',\r\n          description: 'Extract text from uploaded file',\r\n          requires_auth: true,\r\n        },\r\n        extract_from_file_id: {\r\n          method: 'POST',\r\n          path: '/api/extract/{fileId}',\r\n          description: 'Extract text from previously uploaded file',\r\n          requires_auth: true,\r\n        },\r\n        batch_extraction: {\r\n          method: 'POST',\r\n          path: '/api/extract/batch',\r\n          description: 'Extract text from multiple files',\r\n          requires_auth: true,\r\n        },\r\n        get_extraction_status: {\r\n          method: 'GET',\r\n          path: '/api/extract/{fileId}',\r\n          description: 'Get extraction status and existing chunks',\r\n          requires_auth: true,\r\n        },\r\n      },\r\n      \r\n      rate_limits: {\r\n        single_extraction: '30 requests per 15 minutes',\r\n        batch_extraction: '5 requests per hour',\r\n        status_checks: '100 requests per 15 minutes',\r\n      },\r\n      \r\n      supported_mime_types: Object.keys(SUPPORTED_EXTRACTORS),\r\n      supported_extensions: Object.values(SUPPORTED_EXTRACTORS),\r\n      \r\n      version: '1.0.0',\r\n      last_updated: '2024-01-01T00:00:00Z',\r\n    }\r\n    \r\n    return ApiResponse.success(capabilities)\r\n    \r\n  } catch (error) {\r\n    console.error('Get capabilities handler error:', error)\r\n    return ApiResponse.internalError('Failed to get extraction capabilities')\r\n  }\r\n}\r\n\r\n// Export handler with middleware (public endpoint)\r\nexport const GET = createPublicApiHandler(getCapabilitiesHandler, {\r\n  rateLimit: rateLimitConfigs.general,\r\n  logging: {\r\n    enabled: true,\r\n    includeBody: false,\r\n  },\r\n})"],"mappings":"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","ignoreList":[]}