# =============================================================================
# BRIEFLY CLOUD - ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
# Copy this file to .env.local for local development
# For production, set these variables in your Vercel project settings

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS Settings
ALLOWED_ORIGINS=https://rekonnlabs.com,https://briefly.rekonnlabs.com,http://localhost:3000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL=false
RATE_LIMIT_SKIP_FAILED=false

# Security Headers
SECURITY_CSP_ENABLED=true
SECURITY_HSTS_ENABLED=true
SECURITY_XSS_PROTECTION=true
SECURITY_CONTENT_TYPE_OPTIONS=true

# API Key Management
API_KEY_ROTATION_ENABLED=true
API_KEY_EXPIRY_DAYS=365

# Input Validation
MAX_STRING_LENGTH=10000
MAX_ARRAY_LENGTH=100
MAX_FILE_SIZE_MB=50

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# NextAuth Configuration
NEXTAUTH_URL=https://rekonnlabs.com/briefly/app
NEXTAUTH_SECRET=your-nextauth-secret-here

# OAuth Providers
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
AZURE_AD_CLIENT_ID=your-azure-client-id
AZURE_AD_CLIENT_SECRET=your-azure-client-secret
AZURE_AD_TENANT_ID=your-azure-tenant-id

# OAuth Redirect URLs (register these in Google & Azure)
# Google: https://rekonnlabs.com/briefly/app/api/auth/callback/google
# Microsoft: https://rekonnlabs.com/briefly/app/api/auth/callback/azure-ad

# =============================================================================
# AI/LLM CONFIGURATION
# =============================================================================

# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key

# Chat Models (GPT-5 family with fallbacks)
CHAT_MODEL_FREE=gpt-5-nano
CHAT_MODEL_PRO=gpt-5-mini
CHAT_MODEL_BYOK=gpt-5-mini
FEATURE_GPT5=true

# Embedding Configuration
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# =============================================================================
# VECTOR STORAGE CONFIGURATION
# =============================================================================

# Vector Backend (chroma | pgvector)
VECTOR_BACKEND=chroma

# ChromaDB Cloud Configuration
CHROMA_API_KEY=ck-D9GA7ki3k88XCfk4TACvH67Q5q5RE7tgUDvyGZ9TZDST
CHROMA_TENANT_ID=d66de939-998f-4a7c-beaa-631552b609fb
CHROMA_DB_NAME=Briefly Cloud

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Database Connection Settings
SUPABASE_MAX_CONNECTIONS=10
SUPABASE_CONNECTION_TIMEOUT=30000
SUPABASE_QUERY_TIMEOUT=30000

# =============================================================================
# PAYMENT CONFIGURATION
# =============================================================================

# Stripe Configuration
STRIPE_SECRET_KEY=your-stripe-secret-key
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret

# Stripe Price IDs
STRIPE_PRICE_PRO=price_7sY8wO0WUdHydT94eUdZ600
STRIPE_PRICE_PRO_BYOK=price_14A9AS7li6f62arfXCdZ601

# Stripe URLs
STRIPE_SUCCESS_URL=https://rekonnlabs.com/briefly/app/billing/success
STRIPE_CANCEL_URL=https://rekonnlabs.com/briefly/app/billing/cancel

# =============================================================================
# FILE PROCESSING CONFIGURATION
# =============================================================================

# File Upload Settings
MAX_FILE_SIZE_MB=50
ALLOWED_FILE_TYPES=application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.presentationml.presentation,text/plain,text/markdown,text/csv

# Document Processing
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_CHUNKS_PER_DOCUMENT=1000

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Error Monitoring
NEXT_PUBLIC_SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_LOGGING=true

# =============================================================================
# PERFORMANCE AND CACHING
# =============================================================================

# Caching
ENABLE_RESPONSE_CACHING=true
CACHE_TTL_SECONDS=3600
ENABLE_DATABASE_CACHING=true

# Performance
MAX_CONCURRENT_REQUESTS=10
REQUEST_TIMEOUT_MS=30000
UPLOAD_TIMEOUT_MS=60000

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature Toggles
FEATURE_GPT5=true
FEATURE_CHROMA_CLOUD=true
FEATURE_STRIPE_BILLING=true
FEATURE_GOOGLE_DRIVE=true
FEATURE_MICROSOFT_ONEDRIVE=true
FEATURE_FILE_UPLOAD=true
FEATURE_CHAT_STREAMING=true

# =============================================================================
# DEVELOPMENT AND DEBUGGING
# =============================================================================

# Development Settings
NODE_ENV=development
DEBUG=false
ENABLE_DEBUG_LOGGING=false

# Testing
ENABLE_TEST_MODE=false
MOCK_EXTERNAL_SERVICES=false

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Vercel Configuration
VERCEL_URL=your-vercel-url
VERCEL_ENV=production

# Domain Configuration
CUSTOM_DOMAIN=rekonnlabs.com
APP_SUBPATH=/briefly/app

# =============================================================================
# USAGE LIMITS (PER TIER)
# =============================================================================

# Free Tier Limits
FREE_TIER_MAX_DOCUMENTS=5
FREE_TIER_MAX_CHAT_MESSAGES=100
FREE_TIER_MAX_UPLOAD_SIZE_MB=10
FREE_TIER_MAX_STORAGE_MB=100

# Pro Tier Limits
PRO_TIER_MAX_DOCUMENTS=100
PRO_TIER_MAX_CHAT_MESSAGES=1000
PRO_TIER_MAX_UPLOAD_SIZE_MB=50
PRO_TIER_MAX_STORAGE_MB=1000

# Pro BYOK Tier Limits
PRO_BYOK_TIER_MAX_DOCUMENTS=500
PRO_BYOK_TIER_MAX_CHAT_MESSAGES=5000
PRO_BYOK_TIER_MAX_UPLOAD_SIZE_MB=100
PRO_BYOK_TIER_MAX_STORAGE_MB=5000

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 
# 1. Never commit .env files to version control
# 2. Use strong, unique secrets for NEXTAUTH_SECRET
# 3. Rotate API keys regularly
# 4. Monitor for suspicious activity
# 5. Keep dependencies updated
# 6. Use HTTPS in production
# 7. Implement proper CORS policies
# 8. Validate all user inputs
# 9. Use rate limiting to prevent abuse
# 10. Log security events for monitoring

